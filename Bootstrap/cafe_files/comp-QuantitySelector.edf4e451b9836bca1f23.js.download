(window.webpackJsonpCrema=window.webpackJsonpCrema||[]).push([[48],{1286:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var simpleRange=function(start,boundary,step){var result=[],length=function(start,boundary,step){var diff=boundary-start;return Math.ceil(Math.abs(diff)/Math.abs(step||1))}(start,boundary,step);if(length){result.length=length;for(var nextValue=start,i=0;i<length;i+=1)result[i]=nextValue,nextValue+=step}return result},stepProgression=function(start,boundary){return start<boundary?1:start>boundary?-1:0};exports.default=function(startOrBoundary,boundary,step){if("number"!=typeof startOrBoundary)return[];if("number"!=typeof boundary){var progression=stepProgression(0,startOrBoundary);return simpleRange(0,startOrBoundary,progression)}if("number"!=typeof step){var _progression=stepProgression(startOrBoundary,boundary);return simpleRange(startOrBoundary,boundary,_progression)}return simpleRange(startOrBoundary,boundary,step)}},1289:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorBlockId=void 0;var _defineProperty3=_interopRequireDefault(__webpack_require__(9)),_react2=_interopRequireDefault(__webpack_require__(0)),_classnames3=_interopRequireDefault(__webpack_require__(8)),_generateTheme=(_interopRequireDefault(__webpack_require__(2)),__webpack_require__(72));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(882),__webpack_require__(883);var getErrorBlockId=exports.getErrorBlockId=function(id){return"ErrorBlock__"+id+"--id"};exports.default=function(_ref){var id=_ref.id,errorMessage=_ref.errorMessage,isCompact=_ref.isCompact,className=_ref.className;if(!errorMessage)return null;var componentClassName=(0,_generateTheme.generateTheme)("ErrorBlock"),errorClassName=(0,_classnames3.default)(componentClassName,className,(0,_defineProperty3.default)({},componentClassName+"--compact",isCompact));return _react2.default.createElement("div",{id:getErrorBlockId(id),className:errorClassName},errorMessage)}},1290:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0));_interopRequireDefault(__webpack_require__(2));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(884);exports.default=function(_ref){return _ref.required?_react2.default.createElement("span",{"aria-hidden":!0,className:"MandatoryIndicator"},"Â *"):null}},1295:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends3=_interopRequireDefault(__webpack_require__(5)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(13)),_classCallCheck3=_interopRequireDefault(__webpack_require__(15)),_createClass3=_interopRequireDefault(__webpack_require__(16)),_possibleConstructorReturn3=_interopRequireDefault(__webpack_require__(19)),_inherits3=_interopRequireDefault(__webpack_require__(20)),_react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(Component){return function(_React$Component){function WithProvideFocusState(props){(0,_classCallCheck3.default)(this,WithProvideFocusState);var _this=(0,_possibleConstructorReturn3.default)(this,(WithProvideFocusState.__proto__||(0,_getPrototypeOf2.default)(WithProvideFocusState)).call(this,props));return _this.handleFocus=_this.handleFocus.bind(_this),_this.handleBlur=_this.handleBlur.bind(_this),_this.state={isFocus:!1},_this}return(0,_inherits3.default)(WithProvideFocusState,_React$Component),(0,_createClass3.default)(WithProvideFocusState,[{key:"handleFocus",value:function(){this.setState({isFocus:!0})}},{key:"handleBlur",value:function(){this.setState({isFocus:!1})}},{key:"render",value:function(){return _react2.default.createElement(Component,(0,_extends3.default)({},this.props,{isFocus:this.state.isFocus,handleFocus:this.handleFocus,handleBlur:this.handleBlur}))}}]),WithProvideFocusState}(_react2.default.Component)}},1303:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends3=_interopRequireDefault(__webpack_require__(5)),_react2=_interopRequireDefault(__webpack_require__(0)),_omit2=_interopRequireDefault(__webpack_require__(6)),_compose2=_interopRequireDefault(__webpack_require__(25)),_sanitizedConnect2=_interopRequireDefault(__webpack_require__(191)),_provideFocusState2=_interopRequireDefault(__webpack_require__(1295)),_responsive=(_interopRequireDefault(__webpack_require__(2)),__webpack_require__(38)),_TextField2=_interopRequireDefault(__webpack_require__(1304)),_generateTheme=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var applyHOC=(0,_compose2.default)(_provideFocusState2.default,(0,_sanitizedConnect2.default)((function(_ref){var viewport=_ref.viewport;return{isNarrow:(0,_responsive.isNarrow)(viewport.formFactor)}})));exports.default=applyHOC((function(props){var sanitizedProps=(0,_omit2.default)(props,["isNarrow","handleFocus","handleBlur","handleBlurEvents"]),isCompact=props.isCompact,handleFocus=props.handleFocus,handleBlur=props.handleBlur,handleBlurEvents=props.handleBlurEvents;return _react2.default.createElement(_TextField2.default,(0,_extends3.default)({},sanitizedProps,{isCompact:isCompact||props.isNarrow&&!(0,_generateTheme.isNextTheme)(),onFocus:handleFocus,onBlur:function(e){handleBlur(e),handleBlurEvents&&handleBlurEvents(e)}}))}))},1305:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TextFieldContainer=__webpack_require__(1303);Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return(obj=_TextFieldContainer,obj&&obj.__esModule?obj:{default:obj}).default;var obj}})},1683:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCustomQuantityError=exports.getDisplayableQuantities=exports.getQuantitySelectorPosition=void 0;var _toConsumableArray3=_interopRequireDefault(__webpack_require__(47)),_range2=_interopRequireDefault(__webpack_require__(1286)),_isInteger2=_interopRequireDefault(__webpack_require__(1769)),_productHelper=__webpack_require__(131),_quantitySelector=__webpack_require__(208);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MAX_QUANTITIES_BUTTONS=15,BUTTONS_ROW_LENGTH=5;exports.getQuantitySelectorPosition=function(orientation,buttonDomElement){if("left"===orientation)return"left";var buttonRect=buttonDomElement.getBoundingClientRect();return buttonRect.right-buttonRect.width/2+110>=window.innerWidth?"left":buttonRect.top-200<=80?"bottom":orientation},exports.getDisplayableQuantities=function(product){var customQuantities=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!product)return[];var type=product.type,salesMultiple=product.salesMultiple,maxQuantity=product.maxQuantity,isLimited=product.isLimited,useCustomQuantities=customQuantities.length&&type===_productHelper.PRODUCT_TYPE_CAPSULES&&!(0,_productHelper.isBundle)(product)&&!isLimited,maxDefaultItems=useCustomQuantities?MAX_QUANTITIES_BUTTONS-customQuantities.length:MAX_QUANTITIES_BUTTONS,salesMultipleOrDefault=salesMultiple||1,defaultQuantities=(0,_range2.default)(0,maxDefaultItems).map((function(index){return index*salesMultipleOrDefault})),quantities=[].concat((0,_toConsumableArray3.default)(defaultQuantities),(0,_toConsumableArray3.default)(useCustomQuantities?customQuantities:[])).filter((function(quantity){return!maxQuantity||quantity<=maxQuantity}));if(quantities.length%BUTTONS_ROW_LENGTH==0)return quantities;var paddingItemCount=BUTTONS_ROW_LENGTH-quantities.length%BUTTONS_ROW_LENGTH;return[].concat((0,_toConsumableArray3.default)(quantities),(0,_toConsumableArray3.default)((0,_range2.default)(1,paddingItemCount+1).map((function(index){return maxQuantity+index*salesMultipleOrDefault}))))},exports.getCustomQuantityError=function(requestedQuantity,product){if(!product)return null;var salesMultipleOrDefault=product.salesMultiple||1,maxQuantity=(0,_productHelper.getMaxAddibleQuantity)(product);if(isNaN(requestedQuantity)||!(0,_isInteger2.default)(requestedQuantity))return{errorType:_quantitySelector.CUSTOM_QUANTITY_ERROR_TYPES.OTHER,newCustomQuantityValue:0};if(requestedQuantity<0)return{errorType:_quantitySelector.CUSTOM_QUANTITY_ERROR_TYPES.OTHER,newCustomQuantityValue:0};if(requestedQuantity>maxQuantity)return{errorType:_quantitySelector.CUSTOM_QUANTITY_ERROR_TYPES.MAX_QUANTITY,newCustomQuantityValue:maxQuantity};var deltaQuantity=requestedQuantity%salesMultipleOrDefault,perfectMultiple=requestedQuantity-deltaQuantity;if(0!==deltaQuantity){var roundedValue=perfectMultiple+salesMultipleOrDefault<=maxQuantity?perfectMultiple+salesMultipleOrDefault:requestedQuantity-deltaQuantity,newValue=Math.min(maxQuantity,roundedValue);return{errorType:_quantitySelector.CUSTOM_QUANTITY_ERROR_TYPES.SALES_MULTIPLE,newCustomQuantityValue:newValue}}return null}},1765:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends3=_interopRequireDefault(__webpack_require__(5)),_defineProperty3=_interopRequireDefault(__webpack_require__(9)),_react2=_interopRequireDefault(__webpack_require__(0)),_omit2=_interopRequireDefault(__webpack_require__(6)),_classnames3=_interopRequireDefault(__webpack_require__(8)),_get2=_interopRequireDefault(__webpack_require__(90)),_PredefinedQuantityList2=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(1766))),_CustomQuantityError2=_interopRequireDefault(__webpack_require__(1767)),_VisuallyHidden2=_interopRequireDefault(__webpack_require__(46)),_QuantitySelectorCustomFieldContainer2=_interopRequireDefault(__webpack_require__(1768)),_LimitedProductMessage2=_interopRequireDefault(__webpack_require__(1771)),_generateTheme=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(964),__webpack_require__(965);var QuantitySelector=function(props){var _classnames,className=props.className,position=props.position,a11yTitle=props.a11yTitle,a11yDescription=props.a11yDescription,handleCloseOnEsc=props.handleCloseOnEsc,positionQuantitySelector=props.positionQuantitySelector,product=props.product,handleUpdateQuantity=props.handleUpdateQuantity,updateCustomQuantityErrorMessage=props.updateCustomQuantityErrorMessage,customQuantityError=props.customQuantityError,customErrorMessages=props.customErrorMessages,chooseHintLabel=props.chooseHintLabel,okButtonLabel=props.okButtonLabel,isNarrow=props.isNarrow,wrapperClassNames=(0,_classnames3.default)((0,_generateTheme.generateTheme)("QuantitySelector"),className),popinClassName=(0,_classnames3.default)((0,_generateTheme.generateTheme)("QuantitySelector__popin"),(_classnames={},(0,_defineProperty3.default)(_classnames,(0,_generateTheme.generateTheme)("QuantitySelector__popin--top"),!isNarrow&&"top"===position),(0,_defineProperty3.default)(_classnames,(0,_generateTheme.generateTheme)("QuantitySelector__popin--bottom"),!isNarrow&&"bottom"===position),(0,_defineProperty3.default)(_classnames,(0,_generateTheme.generateTheme)("QuantitySelector__popin--left"),!isNarrow&&"left"===position),_classnames)),quantitiesProps=(0,_omit2.default)(props,["position","className","product","customQuantityError","customErrorMessages"]);return _react2.default.createElement("div",{className:wrapperClassNames,id:"QuantitySelector__wrapper",ref:positionQuantitySelector,onKeyDown:handleCloseOnEsc,role:"dialog","aria-labelledby":"QuantitySelector__title","aria-describedby":"QuantitySelector__description"},_react2.default.createElement(_VisuallyHidden2.default,{id:"QuantitySelector__title",value:a11yTitle}),_react2.default.createElement(_VisuallyHidden2.default,{id:"QuantitySelector__description",value:a11yDescription}),_react2.default.createElement("div",{className:"QuantitySelector__container"},_react2.default.createElement("div",{className:popinClassName},customQuantityError?_react2.default.createElement(_CustomQuantityError2.default,{product:product,customQuantityError:customQuantityError,customErrorMessages:customErrorMessages}):_react2.default.createElement(_PredefinedQuantityList2.default,(0,_extends3.default)({productName:(0,_get2.default)(product,"name"),productId:(0,_get2.default)(product,"id"),productQuantity:(0,_get2.default)(product,"quantity"),productMaxCustomerQuantity:(0,_get2.default)(product,"maxCustomerQuantity"),productMaxQuantity:(0,_get2.default)(product,"maxQuantity"),handleUpdateQuantity:handleUpdateQuantity},quantitiesProps)),_react2.default.createElement(_QuantitySelectorCustomFieldContainer2.default,{productId:(0,_get2.default)(product,"id"),product:product,chooseHintLabel:chooseHintLabel,okButtonLabel:okButtonLabel,handleUpdateQuantity:handleUpdateQuantity,updateCustomQuantityErrorMessage:updateCustomQuantityErrorMessage}),_react2.default.createElement(_LimitedProductMessage2.default,{product:product}))))};QuantitySelector.defaultProps={position:"top"},exports.default=QuantitySelector},1766:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends3=_interopRequireDefault(__webpack_require__(5)),_react2=_interopRequireDefault(__webpack_require__(0)),_VisuallyHidden2=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(46))),_format2=_interopRequireDefault(__webpack_require__(37)),_generateTheme=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(957),__webpack_require__(958);exports.default=function(props){if(!props.quantities||!props.productId)return null;var quantities=props.quantities,handleUpdateQuantity=props.handleUpdateQuantity,productId=props.productId,productName=props.productName,productQuantity=props.productQuantity,productMaxCustomerQuantity=props.productMaxCustomerQuantity,productMaxQuantity=props.productMaxQuantity,a11yRemoveProductLabel=props.a11yRemoveProductLabel,a11yAddProductLabel=props.a11yAddProductLabel,a11yUpdateProductLabel=props.a11yUpdateProductLabel;return _react2.default.createElement("ul",{className:"PredefinedQuantityList"},quantities.map(function(handleUpdateQuantity,productId,productName,productQuantity,productMaxCustomerQuantity,productMaxQuantity,a11yRemoveProductLabel,a11yAddProductLabel,a11yUpdateProductLabel){return function(quantity,index){var a11yRemoveProductLabelFormatted=(0,_format2.default)(a11yRemoveProductLabel,{productName:productName}),a11yAddOrUpdateProductLabel=productQuantity?a11yUpdateProductLabel:a11yAddProductLabel,a11yAddOrUpdateProductLabelFormatted=(0,_format2.default)(a11yAddOrUpdateProductLabel,{quantity:quantity}),a11yProductLabel=0===quantity?_react2.default.createElement(_VisuallyHidden2.default,{value:a11yRemoveProductLabelFormatted}):_react2.default.createElement(_VisuallyHidden2.default,{value:a11yAddOrUpdateProductLabelFormatted}),isDisabled=quantity>productMaxQuantity||"number"==typeof productMaxCustomerQuantity&&quantity>productMaxCustomerQuantity;return _react2.default.createElement("li",{className:(0,_generateTheme.generateTheme)("PredefinedQuantityList__quantity"),key:quantity},_react2.default.createElement("button",(0,_extends3.default)({id:"ta-quantity-selector__predefined-"+index},0===index?{"data-focus-id":"PredefinedQuantityList__quantity-focusable"}:{},{className:(0,_generateTheme.generateTheme)("PredefinedQuantityList__quantity-button"),onClick:function(event){return handleUpdateQuantity(event,productId,quantity)},disabled:isDisabled}),a11yProductLabel,_react2.default.createElement("span",{"aria-hidden":"true",className:"notranslate"},quantity)))}}(handleUpdateQuantity,productId,productName,productQuantity,productMaxCustomerQuantity,productMaxQuantity,a11yRemoveProductLabel,a11yAddProductLabel,a11yUpdateProductLabel)))}},1767:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0)),_format2=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(37))),_quantitySelector=__webpack_require__(208),_productHelper=__webpack_require__(131),_generateTheme=__webpack_require__(72);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(959),__webpack_require__(960);exports.default=function(_ref){var customErrorMessages=_ref.customErrorMessages,customQuantityError=_ref.customQuantityError,product=_ref.product;if(!customQuantityError||!product)return null;var errorType=customQuantityError.errorType,messagePlaceholders={productQuantity:customQuantityError.newCustomQuantityValue,salesMultiple:product.salesMultiple,maxQuantity:(0,_productHelper.getMaxAddibleQuantity)(product)},roundingMessage=(0,_format2.default)(customErrorMessages.roundingMessage,messagePlaceholders),errorMessage=(0,_format2.default)(function(errorType,messages){switch(errorType){case _quantitySelector.CUSTOM_QUANTITY_ERROR_TYPES.MAX_QUANTITY:return messages.maximumAmountError;case _quantitySelector.CUSTOM_QUANTITY_ERROR_TYPES.SALES_MULTIPLE:return messages.salesMultipleError;default:return messages.invalidQuantityError}}(errorType,customErrorMessages),messagePlaceholders);return _react2.default.createElement("div",{className:(0,_generateTheme.generateTheme)("CustomQuantityError"),id:"CustomQuantityError"},_react2.default.createElement("div",{className:(0,_generateTheme.generateTheme)("CustomQuantityError__error-message")},errorMessage),_react2.default.createElement("div",{className:(0,_generateTheme.generateTheme)("CustomQuantityError__rounding-message")},roundingMessage))}},1768:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _assign2=_interopRequireDefault(__webpack_require__(1)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(13)),_classCallCheck3=_interopRequireDefault(__webpack_require__(15)),_createClass3=_interopRequireDefault(__webpack_require__(16)),_possibleConstructorReturn3=_interopRequireDefault(__webpack_require__(19)),_inherits3=_interopRequireDefault(__webpack_require__(20)),_react2=_interopRequireDefault(__webpack_require__(0)),_quantitySelectorHelper=__webpack_require__(1683),_focus=__webpack_require__(57),_QuantitySelectorCustomField2=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(1770)));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QuantitySelectorCustomFieldContainer=function(_React$Component){function QuantitySelectorCustomFieldContainer(props){(0,_classCallCheck3.default)(this,QuantitySelectorCustomFieldContainer);var _this=(0,_possibleConstructorReturn3.default)(this,(QuantitySelectorCustomFieldContainer.__proto__||(0,_getPrototypeOf2.default)(QuantitySelectorCustomFieldContainer)).call(this,props));return _this.state={customQuantity:""},_this}return(0,_inherits3.default)(QuantitySelectorCustomFieldContainer,_React$Component),(0,_createClass3.default)(QuantitySelectorCustomFieldContainer,[{key:"getProps",value:function(){return(0,_assign2.default)({},this.props,{handleChange:this.handleChange.bind(this),customQuantity:this.state.customQuantity,handleUpdateQuantity:this.handleUpdateQuantityWithValidation.bind(this)})}},{key:"handleChange",value:function(e){var requestedQuantity=e.target.value,customQuantityValue=""!==requestedQuantity?parseInt(requestedQuantity,10):"";this.setState({customQuantity:customQuantityValue})}},{key:"handleUpdateQuantityWithValidation",value:function(e,productId,customQuantity){var _props=this.props,product=_props.product,updateCustomQuantityErrorMessage=_props.updateCustomQuantityErrorMessage,handleUpdateQuantity=_props.handleUpdateQuantity,error=(0,_quantitySelectorHelper.getCustomQuantityError)(customQuantity,product);error?(updateCustomQuantityErrorMessage(error),this.setState({customQuantity:error.newCustomQuantityValue}),(0,_focus.focus)("QuantitySelectorCustomField__field")):handleUpdateQuantity(e,productId,customQuantity)}},{key:"render",value:function(){var product=this.props.product;return product&&product.isLimited?null:_react2.default.createElement(_QuantitySelectorCustomField2.default,this.getProps())}}]),QuantitySelectorCustomFieldContainer}(_react2.default.Component);exports.default=QuantitySelectorCustomFieldContainer},1769:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_isNan=__webpack_require__(227),_isNan2=(obj=_isNan)&&obj.__esModule?obj:{default:obj};exports.default=function(candidate){var parsedValue=parseInt(candidate,10);return!(0,_isNan2.default)(parsedValue)&&parsedValue.toString()===candidate.toString()}},1770:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0)),_generateTheme=__webpack_require__(72),_TextField2=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(1305)));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(961),__webpack_require__(962);exports.default=function(_ref){var chooseHintLabel=_ref.chooseHintLabel,okButtonLabel=_ref.okButtonLabel,handleChange=_ref.handleChange,customQuantity=_ref.customQuantity,handleUpdateQuantity=_ref.handleUpdateQuantity,productId=_ref.productId;return _react2.default.createElement("form",{className:(0,_generateTheme.generateTheme)("QuantitySelectorCustomField__container"),onSubmit:function(e){handleUpdateQuantity(e,productId,customQuantity),e.preventDefault()},noValidate:!0},_react2.default.createElement(_TextField2.default,{id:"ta-quantity-selector__custom-field","data-focus-id":"QuantitySelectorCustomField__field",type:"number",min:"0",value:customQuantity,label:chooseHintLabel,onChange:handleChange,cssClass:(0,_generateTheme.generateTheme)("QuantitySelectorCustomField__field"),inputClassName:(0,_generateTheme.generateTheme)("QuantitySelectorCustomField__input"),"aria-describedby":"CustomQuantityError",isCompact:!0}),_react2.default.createElement("button",{id:"ta-quantity-selector__custom-ok",className:(0,_generateTheme.generateTheme)("QuantitySelectorCustomField__button-ok")},okButtonLabel))}},1771:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _LimitedProductMessageContainer=__webpack_require__(1772);Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return(obj=_LimitedProductMessageContainer,obj&&obj.__esModule?obj:{default:obj}).default;var obj}})},1772:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _compose2=_interopRequireDefault(__webpack_require__(25)),_translate2=_interopRequireDefault(__webpack_require__(71)),_provideProductMaxQuantities2=_interopRequireDefault(__webpack_require__(1395)),_LimitedProductMessage2=_interopRequireDefault(__webpack_require__(1773));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var applyHoc=(0,_compose2.default)((0,_translate2.default)({limitedProductAvailableLabel:"global.limitedproduct.available",limitedProductNotAvailableLabel:"global.limitedproduct.notavailable",limitedProductRemainingLabel:"global.limitedproduct.remaining"}),_provideProductMaxQuantities2.default);exports.default=applyHoc(_LimitedProductMessage2.default)},1773:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLimitedProductMessage=void 0;var _react2=_interopRequireDefault(__webpack_require__(0)),_format2=(_interopRequireDefault(__webpack_require__(2)),_interopRequireDefault(__webpack_require__(37)));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(963);var getLimitedProductMessage=exports.getLimitedProductMessage=function(maxQuantity,maxCustomerQuantity,labels){var placeholders={maxPackagingRuleQuantity:maxQuantity,maxCustomerQuantity:maxCustomerQuantity},unformattedMessage=function(maxQuantity,maxCustomerQuantity,labels){var limitedProductNotAvailableLabel=labels.limitedProductNotAvailableLabel,limitedProductAvailableLabel=labels.limitedProductAvailableLabel,limitedProductRemainingLabel=labels.limitedProductRemainingLabel;return 0===maxCustomerQuantity?limitedProductNotAvailableLabel:maxCustomerQuantity>0&&maxCustomerQuantity<maxQuantity?limitedProductRemainingLabel:limitedProductAvailableLabel}(maxQuantity,maxCustomerQuantity,labels);return(0,_format2.default)(unformattedMessage,placeholders)};exports.default=function(props){var _ref=props.product||{},isLimited=_ref.isLimited,maxQuantity=_ref.maxQuantity,maxCustomerQuantity=_ref.maxCustomerQuantity;if(!isLimited)return null;var limitedProductMessage=getLimitedProductMessage(maxQuantity,maxCustomerQuantity,props);return _react2.default.createElement("div",{className:"LimitedProductMessage"},limitedProductMessage)}},1774:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _PortalContainer=__webpack_require__(1775);Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return(obj=_PortalContainer,obj&&obj.__esModule?obj:{default:obj}).default;var obj}})},1775:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reactDom2=_interopRequireDefault(__webpack_require__(79)),_Types2=_interopRequireDefault(__webpack_require__(2));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PortalContainer=function(props){var node=document.getElementById(props.domElementId);if(!node)throw new Error("Element with DOM Id '"+props.domElementId+"' not found");return _reactDom2.default.createPortal(props.children,node)};PortalContainer.propTypes={children:_Types2.default.any,domElementId:_Types2.default.string},exports.default=PortalContainer},956:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends3=_interopRequireDefault(__webpack_require__(5)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(13)),_classCallCheck3=_interopRequireDefault(__webpack_require__(15)),_createClass3=_interopRequireDefault(__webpack_require__(16)),_possibleConstructorReturn3=_interopRequireDefault(__webpack_require__(19)),_inherits3=_interopRequireDefault(__webpack_require__(20)),_react2=_interopRequireDefault(__webpack_require__(0)),_compose2=_interopRequireDefault(__webpack_require__(25)),_reactRedux=__webpack_require__(17),_get2=_interopRequireDefault(__webpack_require__(90)),_focusTrap2=_interopRequireDefault(__webpack_require__(228)),_QuantitySelector2=_interopRequireDefault(__webpack_require__(1765)),_translate2=_interopRequireDefault(__webpack_require__(71)),_provideClassName2=_interopRequireDefault(__webpack_require__(134)),_quantitySelector=__webpack_require__(208),_quantitySelectorHelper=(_interopRequireDefault(__webpack_require__(2)),__webpack_require__(1683)),_focus=__webpack_require__(57),_responsive=__webpack_require__(38),_a11yToggleProvider2=_interopRequireDefault(__webpack_require__(100)),_PortalContainer2=_interopRequireDefault(__webpack_require__(1774));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BUTTON_FOCUS_ID=["quantitySelector","buttonFocusId"],ORIENTATION=["quantitySelector","orientation"],QuantitySelectorContainer=function(_React$Component){function QuantitySelectorContainer(props){(0,_classCallCheck3.default)(this,QuantitySelectorContainer);var _this=(0,_possibleConstructorReturn3.default)(this,(QuantitySelectorContainer.__proto__||(0,_getPrototypeOf2.default)(QuantitySelectorContainer)).call(this,props));return _this.handleClose=_this.handleClose.bind(_this),_this.handleCloseOnEsc=_this.handleCloseOnEsc.bind(_this),_this.handleUpdateQuantity=_this.handleUpdateQuantity.bind(_this),_this.positionQuantitySelector=_this.positionQuantitySelector.bind(_this),_this.state={position:"top"},_this}return(0,_inherits3.default)(QuantitySelectorContainer,_React$Component),(0,_createClass3.default)(QuantitySelectorContainer,[{key:"componentWillReceiveProps",value:function(nextProps){!nextProps.isOpen&&this.props.isOpen&&setTimeout(this.handleClose,0)}},{key:"getPredefinedQuantities",value:function(){var _props=this.props,quantitySelector=_props.quantitySelector,thirdLine=_props.thirdLine;return(0,_quantitySelectorHelper.getDisplayableQuantities)(quantitySelector.product,thirdLine)}},{key:"positionQuantitySelector",value:function(node){var buttonFocusId=(0,_get2.default)(this.props,BUTTON_FOCUS_ID);if(buttonFocusId){var buttonElement=document.getElementById(buttonFocusId),orientation=(0,_get2.default)(this.props,ORIENTATION),position=(0,_quantitySelectorHelper.getQuantitySelectorPosition)(orientation,buttonElement);this.setState({position:position}),(0,_focus.focus)("PredefinedQuantityList__quantity-focusable"),this.trapped=(0,_focusTrap2.default)("#QuantitySelector__wrapper",{clickOutsideDeactivates:!0,escapeDeactivates:!1,returnFocusOnDeactivate:!1}),this.trapped.activate(),this.props.isOpen||(this.props.assignContainer(node),this.props.open(null,this.props.isNarrow))}}},{key:"handleUpdateQuantity",value:function(event,id,quantity){var _this2=this;return event&&event.preventDefault&&event.preventDefault(),this.props.quantitySelector.updateProductQuantity(id,quantity).then((function(){_this2.handleClose(),_this2.props.close()}))}},{key:"handleCloseOnEsc",value:function(e){27===e.which&&this.props.close()}},{key:"handleClose",value:function(){var buttonFocusId=(0,_get2.default)(this.props,BUTTON_FOCUS_ID);this.props.handleCloseQuantitySelector(),this.trapped.deactivate(),(0,_focus.focus)(buttonFocusId)}},{key:"render",value:function(){var _props2=this.props,quantitySelector=_props2.quantitySelector,salesMultipleError=_props2.salesMultipleError,maximumAmountError=_props2.maximumAmountError,invalidQuantityError=_props2.invalidQuantityError,roundingMessage=_props2.roundingMessage;if(!quantitySelector||!0===quantitySelector.unNeededQuantitySelector)return null;var customErrorMessages={salesMultipleError:salesMultipleError,maximumAmountError:maximumAmountError,invalidQuantityError:invalidQuantityError,roundingMessage:roundingMessage},buttonFocusId=(0,_get2.default)(this.props,BUTTON_FOCUS_ID);return _react2.default.createElement(_PortalContainer2.default,{domElementId:buttonFocusId},_react2.default.createElement(_QuantitySelector2.default,(0,_extends3.default)({positionQuantitySelector:this.positionQuantitySelector,handleUpdateQuantity:this.handleUpdateQuantity,handleCloseOnEsc:this.handleCloseOnEsc,quantities:this.getPredefinedQuantities(),position:this.state.position,product:(0,_get2.default)(quantitySelector,"product"),customQuantityError:(0,_get2.default)(quantitySelector,"customQuantityError"),customErrorMessages:customErrorMessages},this.props)))}}]),QuantitySelectorContainer}(_react2.default.Component);QuantitySelectorContainer.defaultProps={quantitySelector:{}};var applyHOC=(0,_compose2.default)((0,_reactRedux.connect)((function(_ref){var quantitySelector=_ref.quantitySelector,viewport=_ref.viewport;return{quantitySelector:quantitySelector,isNarrow:(0,_responsive.isNarrow)(viewport.formFactor)}}),(function(dispatch){return{handleCloseQuantitySelector:function(){return dispatch((0,_quantitySelector.closeQuantitySelector)())},updateCustomQuantityErrorMessage:function(data){return dispatch((0,_quantitySelector.setCustomQuantityError)(data))}}})),(0,_translate2.default)({a11yDescription:"quantityselector.a11y.dialog.description",a11yTitle:"quantityselector.a11y.dialog.title",a11yRemoveProductLabel:"quantityselector.a11y.removeproduct.label",a11yAddProductLabel:"quantityselector.a11y.addproduct.label",a11yUpdateProductLabel:"quantityselector.a11y.updateproduct.label",salesMultipleError:"quantityselector.customquantity.error.salesMultiple",maximumAmountError:"quantityselector.customquantity.error.maximumAmount",invalidQuantityError:"quantityselector.customquantity.error.invalidQuantity",roundingMessage:"quantityselector.customquantity.rounding.message",chooseHintLabel:"quantityselector.choosehint.label",okButtonLabel:"quantityselector.okbutton.label"}),_provideClassName2.default,(0,_a11yToggleProvider2.default)({overlay:!1}));exports.default=_react2.default.memo(applyHOC(QuantitySelectorContainer))}}]);