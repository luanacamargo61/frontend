(window.webpackJsonpCrema=window.webpackJsonpCrema||[]).push([[41],{1816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkCountry=exports.setCountryCheckData=void 0;var _promiseHelper=__webpack_require__(98),_actions=__webpack_require__(28),setCountryCheckData=exports.setCountryCheckData=function(data){return{type:_actions.ECAPI_SET_COUNTRY_CHECK_DATA,data:data}};exports.checkCountry=(0,_promiseHelper.wrapWithPromiseCache)("ECAPI_checkCountry",(function(dispatch){return napi.misc().checkCountry().then((function(result){dispatch(setCountryCheckData(result))}))}))},999:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _defineProperty3=_interopRequireDefault(__webpack_require__(9)),_assign2=_interopRequireDefault(__webpack_require__(1)),_getPrototypeOf2=_interopRequireDefault(__webpack_require__(13)),_classCallCheck3=_interopRequireDefault(__webpack_require__(15)),_createClass3=_interopRequireDefault(__webpack_require__(16)),_possibleConstructorReturn3=_interopRequireDefault(__webpack_require__(19)),_inherits3=_interopRequireDefault(__webpack_require__(20)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactRedux=__webpack_require__(17),_compose2=_interopRequireDefault(__webpack_require__(25)),_store=__webpack_require__(29),_classnames2=_interopRequireDefault(__webpack_require__(8)),_constants=(_interopRequireDefault(__webpack_require__(2)),__webpack_require__(21)),_checkCountry2=__webpack_require__(1816),_format2=_interopRequireDefault(__webpack_require__(37)),_responsive=__webpack_require__(38),_provideClassName2=_interopRequireDefault(__webpack_require__(134)),_translate2=_interopRequireDefault(__webpack_require__(71)),_VisuallyHidden2=_interopRequireDefault(__webpack_require__(46)),_Button2=_interopRequireDefault(__webpack_require__(58));__webpack_require__(1e3);var _ecapi=__webpack_require__(73);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var localNespresso=_store.local.namespace("nespresso"),CloseIcon=function(){return _react2.default.createElement("div",{className:"CloseIcon"},_react2.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%"},_react2.default.createElement("path",{d:"M19,6.41L17.59,5,12,10.59,6.41,5,5,6.41,10.59,12,5,17.59, 6.41,19,12,13.41,17.59,19,19,17.59,13.41,12z",className:"CloseIcon__path"})))},HeaderCountryMessage=function(_React$Component){function HeaderCountryMessage(props){(0,_classCallCheck3.default)(this,HeaderCountryMessage);var _this=(0,_possibleConstructorReturn3.default)(this,(HeaderCountryMessage.__proto__||(0,_getPrototypeOf2.default)(HeaderCountryMessage)).call(this,props));return _this.handleClose=_this.handleClose.bind(_this),_this.state={shouldBeDisplayed:_this.props.shouldBeDisplayed},_this}return(0,_inherits3.default)(HeaderCountryMessage,_React$Component),(0,_createClass3.default)(HeaderCountryMessage,[{key:"componentDidMount",value:function(){"function"==typeof this.props.checkCountry&&this.props.checkCountry()}},{key:"componentWillReceiveProps",value:function(nextProps){var shouldBeDisplayed=nextProps.shouldBeDisplayed;shouldBeDisplayed!==this.props.shouldBeDisplayed&&this.setState({shouldBeDisplayed:shouldBeDisplayed})}},{key:"handleClose",value:function(){var currentMarket=this.props.currentMarket;if(currentMarket){var hasCloseCountryMessage=localNespresso.get("hasCloseCountryMessage")||{},hasCloseCountryMessageStorageValue=(0,_assign2.default)({},hasCloseCountryMessage,(0,_defineProperty3.default)({},currentMarket,!0));localNespresso.set("hasCloseCountryMessage",hasCloseCountryMessageStorageValue)}this.setState({shouldBeDisplayed:!1})}},{key:"render",value:function(){var _props=this.props,currentmarketMessage=_props.currentmarketMessage,othercountryMessage=_props.othercountryMessage,a11yTitle=_props.a11yTitle,correctStoreUrl=_props.correctStoreUrl,a11yCloseLabel=_props.a11yCloseLabel,formFactor=_props.formFactor,activated=_props.activated,className=_props.className;if(!this.state.shouldBeDisplayed||!activated)return null;var _getDimensionFromForm=function(formFactor){return formFactor===_responsive.FORMFACTOR_WIDE?{height:60,marginBottom:20}:{height:80,marginBottom:0}}(formFactor),height=_getDimensionFromForm.height,marginBottom=_getDimensionFromForm.marginBottom,classname=(0,_classnames2.default)("HeaderCountryMessage",className);return _react2.default.createElement("div",{className:classname,role:"banner",style:{height:height}},_react2.default.createElement("style",null,function(height,marginBottom){return"\n  html {\n    margin-top: "+(height+marginBottom)+"px;\n  }\n  .Header__top-wrapper,\n  .HeaderNavigationBar,\n  .HeaderNavigationBar__nav {\n    top: "+height+"px;\n  }\n"}(height,marginBottom)),_react2.default.createElement(_VisuallyHidden2.default,{value:a11yTitle,tagName:"h2"}),_react2.default.createElement("div",{className:"HeaderCountryMessage__container ResponsiveContainer"},_react2.default.createElement("div",{className:"HeaderCountryMessage__text"},_react2.default.createElement("span",{className:"HeaderCountryMessage__current-market",dangerouslySetInnerHTML:{__html:currentmarketMessage}}),_react2.default.createElement("span",{className:"HeaderCountryMessage__other-country",dangerouslySetInnerHTML:{__html:(0,_format2.default)(othercountryMessage,{correctStoreUrl:correctStoreUrl})}})),_react2.default.createElement(_Button2.default,{className:"HeaderCountryMessage__close-button",onClick:this.handleClose},_react2.default.createElement(_VisuallyHidden2.default,{value:a11yCloseLabel}),_react2.default.createElement(CloseIcon,null))))}}]),HeaderCountryMessage}(_react2.default.Component);HeaderCountryMessage.defaultProps={shouldBeDisplayed:!1};var getInCountryCheck=function(state,key){return(0,_ecapi.fromEcapiGetter)(state)(_constants.MISC_DATA,_constants.MISC_COUNTRY_CHECK_DATA,key)},applyHOC=(0,_compose2.default)((0,_reactRedux.connect)((function(state){var fromState=(0,_ecapi.getFromState)(state),currentMarket=fromState("config","currentMarket"),isOnWrongCountry=!!getInCountryCheck(state,"showCountryNotification"),hasAlreadyCloseIt=(localNespresso.get("hasCloseCountryMessage")||{})[currentMarket];return{currentMarket:currentMarket,shouldBeDisplayed:isOnWrongCountry&&!hasAlreadyCloseIt,correctStoreUrl:getInCountryCheck(state,"correctStoreUrl"),formFactor:fromState("viewport","formFactor")}}),(function(dispatch){return{checkCountry:function(){return dispatch(_checkCountry2.checkCountry)}}})),(0,_translate2.default)({currentmarketMessage:"wrongcountrynotification.currentmarket.message",othercountryMessage:"wrongcountrynotification.othercountry.message",a11yTitle:"wrongcountrynotification.a11y.title",a11yCloseLabel:"wrongcountrynotification.a11y.button.close"}),_provideClassName2.default);exports.default=applyHOC(HeaderCountryMessage)}}]);