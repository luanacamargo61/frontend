/*!
 * Ecommerce tracking for Snowplow v3.15.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */

"use strict";!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).snowplowEcommerce={})}(this,(function(n){function t(n,t,o){if(o||2===arguments.length)for(var e,r=0,c=t.length;r<c;r++)!e&&r in t||(e||(e=Array.prototype.slice.call(t,0,r)),e[r]=t[r]);return n.concat(e||Array.prototype.slice.call(t))}function o(){var n,t={},o=[],e=[],r=[],c=function(n,o){null!=o&&""!==o&&(t[n]=o)};return{add:c,addDict:function(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&c(t,n[t])},addJson:function(n,t,r){var c;if(c=r)n:{if(null!=r&&(r.constructor==={}.constructor||r.constructor===[].constructor))for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){c=!0;break n}c=!1}c&&(n={keyIfEncoded:n,keyIfNotEncoded:t,json:r},e.push(n),o.push(n))},addContextEntity:function(n){r.push(n)},getPayload:function(){return t},getJson:function(){return o},withJsonProcessor:function(t){n=t},build:function(){return null==n||n(this,e,r),t}}}function e(n){var t=n.event;return n={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:n=t.schema,data:t.data}},(t=o()).add("e","ue"),t.addJson("ue_px","ue_pr",n),t}function r(n,t){void 0===t&&(t={});var o,e={};for(o in n)(t[o]||null!==n[o]&&void 0!==n[o])&&(e[o]=n[o]);return e}function c(n,t,o){try{var e=null!=n?n:Object.keys(t);n=[];for(var r=0;r<e.length;r++){var c=e[r];t.hasOwnProperty(c)?n.push(t[c]):d.warn(c+" not configured")}n.forEach(o)}catch(n){d.error("Function failed",n)}}var a,i;(i=a||(a={}))[i.none=0]="none",i[i.error=1]="error",i[i.warn=2]="warn",i[i.debug=3]="debug",i[i.info=4]="info";var d=function(n){return void 0===n&&(n=a.warn),{setLogLevel:function(t){n=a[t]?t:a.warn},warn:function(o,e){for(var r=[],c=2;c<arguments.length;c++)r[c-2]=arguments[c];n>=a.warn&&"undefined"!=typeof console&&(c="Snowplow: "+o,e?console.warn.apply(console,t([c+"\n",e],r,!1)):console.warn.apply(console,t([c],r,!1)))},error:function(o,e){for(var r=[],c=2;c<arguments.length;c++)r[c-2]=arguments[c];n>=a.error&&"undefined"!=typeof console&&(c="Snowplow: "+o+"\n",e?console.error.apply(console,t([c+"\n",e],r,!1)):console.error.apply(console,t([c],r,!1)))},debug:function(o){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n>=a.debug&&"undefined"!=typeof console&&console.debug.apply(console,t(["Snowplow: "+o],e,!1))},info:function(o){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];n>=a.info&&"undefined"!=typeof console&&console.info.apply(console,t(["Snowplow: "+o],e,!1))}}}(),u={},s={};n.EcommercePlugin=function(){return{activateBrowserPlugin:function(n){u[n.id]=n,s[n.id]={items:[]}}}},n.addItem=function(n,t){void 0===t&&(t=Object.keys(u)),t.forEach((function(t){s[t]&&s[t].items.push(n)}))},n.addTrans=function(n,t){void 0===t&&(t=Object.keys(u)),t.forEach((function(t){s[t]&&(s[t].transaction=n)}))},n.trackAddToCart=function(n,t){void 0===t&&(t=Object.keys(u)),c(t,u,(function(t){var o=(t=t.core).track,c=e({event:{schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:r({sku:n.sku,quantity:n.quantity,name:n.name,category:n.category,unitPrice:n.unitPrice,currency:n.currency})}});o.call(t,c,n.context,n.timestamp)}))},n.trackRemoveFromCart=function(n,t){void 0===t&&(t=Object.keys(u)),c(t,u,(function(t){var o=(t=t.core).track,c=e({event:{schema:"iglu:com.snowplowanalytics.snowplow/remove_from_cart/jsonschema/1-0-0",data:r({sku:n.sku,quantity:n.quantity,name:n.name,category:n.category,unitPrice:n.unitPrice,currency:n.currency})}});o.call(t,c,n.context,n.timestamp)}))},n.trackTrans=function(n){void 0===n&&(n=Object.keys(u)),c(n,u,(function(n){var t=s[n.id].transaction;if(t){var e=n.core,r=e.track,c=t.orderId,a=t.total,i=t.affiliation,d=t.tax,u=t.shipping,l=t.city,f=t.state,p=t.country,y=t.currency,m=o();m.add("e","tr"),m.add("tr_id",c),m.add("tr_af",i),m.add("tr_tt",a),m.add("tr_tx",d),m.add("tr_sh",u),m.add("tr_ci",l),m.add("tr_st",f),m.add("tr_co",p),m.add("tr_cu",y),r.call(e,m,t.context,t.timestamp)}for(t=0;t<s[n.id].items.length;t++)e=s[n.id].items[t],c=(r=n.core).track,a=e.orderId,i=e.sku,d=e.price,u=e.name,l=e.category,f=e.quantity,p=e.currency,(y=o()).add("e","ti"),y.add("ti_id",a),y.add("ti_sk",i),y.add("ti_nm",u),y.add("ti_ca",l),y.add("ti_pr",d),y.add("ti_qu",f),y.add("ti_cu",p),c.call(r,y,e.context,e.timestamp);s[n.id]={items:[]}}))},Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
