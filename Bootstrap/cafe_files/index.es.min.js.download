// zone 1.1.1 2/8/2022 2:06:24 PM
class t{constructor(){this.events={}}on(t,e){(t=[].concat(t)).forEach((t=>{this.events[t]=(this.events[t]||[]).concat(e)}))}off(t){delete this.events[t]}fire(t,...e){if(!this.events[t])return!1;this.events[t].forEach((t=>t(...e)))}all(){return this.events}}class e{constructor(e={xs:575,sm:767,md:995,lg:1366,xl:1920,xxl:2560}){const i=Object.keys(e);if(0===i.length)throw new Error("You should configure breakpoints");this._events=new t,Object.assign(this,e),this._sorted=i.map((t=>({name:t,value:this[t],["is"+t.toUpperCase()]:!0}))).sort(((t,e)=>t.value-e.value));let n=this.current,s=this.landscape;window.addEventListener("resize",function(t,e,i={}){let n;return i.hasOwnProperty("trailing")||(i.trailing=!0),function(){const s=this,r=arguments,o=()=>{n=null,i.trailing&&t.apply(s,r)},a=i.leading&&!n;clearTimeout(n),n=setTimeout(o,e),a&&t.apply(s,r)}}((()=>{const t=this.landscape,e=this.current,i=s!==t;(e.value!==n.value||i)&&(this._events.fire("change",{last:n,current:e,landscape:t,portrait:!t}),n=e),i&&(s=t,this._events.fire("orientation",{landscape:t,portrait:!t}))}),200))}on(t,e,i=!1){if(this._events.on(t,e),i){const t=this.current;e({last:t,current:t,landscape:this.landscape,portrait:!this.landscape})}}off(t){this._events.off(t)}get current(){const t=this.viewportSize.width,e=this._sorted;let i;for(let n=0;n<e.length;n++){const s=e[n];if(t<=s.value&&(0===n||t>i.value))return s;i=s}}get viewportSize(){const t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}get landscape(){return this.viewportSize.width>this.viewportSize.height}get portrait(){return!this.landscape}isBetween(t,e){return this.viewportSize.width>=this[t]&&this.viewportSize.width<=this[e]}isLessThan(t){return this.viewportSize.width<this[t]}isGreaterThan(t){return this.viewportSize.width>this[t]}isLessThanEqualTo(t){return this.viewportSize.width<=this[t]}isGreaterThanEqualTo(t){return this.viewportSize.width>=this[t]}}const i=window.navigator.userAgent;const n=new class{constructor(t,i=!1){this.items=new Map,this.isLandscape=null,this.breakpoints=new e,this.breakpoints.on("orientation",(t=>this.setOrientation(t.landscape))),this.isActivateIeAndEdge=i,this.setOptions(t)}setOptions(t={}){this.hasIntersectionObserver()&&(this.settings={isLandscape:{above:[0],rootMargin:"200% 0px"},isPortrait:{above:[0],rootMargin:"200% 0px"},...t},this.setOrientation(this.breakpoints.landscape))}isIeOrEdge(){return function(){const t=i.indexOf("Edge/");return t>0&&parseInt(i.substring(t+5,i.indexOf(".",t)),10)}()||function(){const t=i.indexOf("MSIE ");if(t>0)return parseInt(i.substring(t+5,i.indexOf(".",t)),10);if(i.indexOf("Trident/")>0){const t=i.indexOf("rv:");return parseInt(i.substring(t+3,i.indexOf(".",t)),10)}return!1}()}hasIntersectionObserver(){return(!this.isIeOrEdge()||this.isIeOrEdge()&&this.isActivateIeAndEdge)&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window}setOrientation(t){if(!this.hasIntersectionObserver())return;if(this.isLandscape===t)return;this.observer&&(this.unobserveItems(),this.observer.disconnect()),this.isLandscape=t;const{above:e,rootMargin:i}=this.settings[t?"isLandscape":"isPortrait"];this.observer=new IntersectionObserver((t=>this.onChange(t)),{threshold:e,rootMargin:i})}addItem(t){this.hasIntersectionObserver()?this.observeItem(t):this.resolve(t)}observeItem(t){const{element:e}=t;if(!this.observer)throw new Error("You must call `setOrientation` before starting to observe item");this.items.has(e)||this.observer.observe(e),delete t.element,this.items.set(e,t)}resolve({element:t,onViewportEnter:e}){this.items.set(t,{onViewportEnter:e}),this.callCallback({target:t})}onChange(t){t.forEach((t=>{!0===t.isIntersecting||void 0===t.isIntersecting&&t.intersectionRatio>0?(this.callCallback(t),this.getCallbackNotInViewPort(t)||this.unobserve(t)):this.callCallbackNotInViewPort(t)}))}callCallback(t){const e=this.getCallback(t);e&&e()}callCallbackNotInViewPort(t){const e=this.getCallbackNotInViewPort(t);e&&e()}getCallback(t){const{onViewportEnter:e}=this.items.get(t.target)||{};return"function"==typeof e&&e}getCallbackNotInViewPort(t){const{onViewportOut:e}=this.items.get(t.target)||{};return"function"==typeof e&&e}unobserve(t){this.observer&&this.observer.unobserve(t.target),this.items.delete(t.target)}unobserveItems(){this.items.forEach(((t,e)=>this.observer.unobserve(e)))}observeItems(){this.items.forEach(((t,e)=>this.observer.observe(e)))}}({isLandscape:{above:[0],rootMargin:"0% 0%"},isPortrait:{above:[0],rootMargin:"0% 0%"}});class s extends class{getIom(){return n}constructor(t){var e,i,s;(this.el=t,this.el instanceof Element||this.el instanceof HTMLDocument)&&(n.hasIntersectionObserver()?n.addItem({element:this.el,onViewportEnter:()=>this.track()}):(this.scrollHandler=function(t,e,i={}){let n,s,r;i.hasOwnProperty("leading")||(i.leading=!0);let o=null,a=0;const l=()=>{a=i.leading?Date.now():0,o=null,r=t.apply(n,s),o||(n=s=null)};return function(){const c=Date.now();a||i.leading||(a=c);const h=e-(c-a);return n=this,s=arguments,h<=0||h>e?(o&&(clearTimeout(o),o=null),a=c,r=t.apply(n,s),o||(n=s=null)):!o&&i.trailing&&(o=setTimeout(l,h)),r}}(this.isInViewport.bind(this),500),e=window,i="scroll",s=this.scrollHandler,e.addEventListener(i,s)))}isInViewport(){const t=this.el,e=window.pageYOffset,i=function(t){const e=function(t){return t.getBoundingClientRect()}(t);return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}(t).top,n=function(t,e){let i=t.offsetHeight;if(e){const e=getComputedStyle(t);i+=parseInt(e.marginTop||0)+parseInt(e.marginBottom||0)}return i}(t),s=e+window.innerHeight;s>=i+n/2&&(e<=i||s<=i+1.5*n)&&(this.track(),this.destroy())}track(){"requestIdleCallback"in window?window.requestIdleCallback((()=>this.runTrack())):window.setTimeout((()=>this.runTrack()),1)}runTrack(){}destroy(){var t,e,i;t=window,e="scroll",i=this.scrollHandler,t.removeEventListener(e,i)}}{constructor(t,e){super(t),this.data=e}runTrack(){this.data.id&&null!==this.data.id&&""!==this.data.id&&(window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"impression",eventRaisedBy:"Web component",eventAction:"Promo Impression - On Scroll",ecommerce:{promoView:{promotions:[this.data]}}}))}}let r;class o extends HTMLElement{renderInsideContent(){return this.getAttribute("container")?r:`<div class="c-Zone__content">\n                    <div class="c-Zone__headline" style="${this.getStyleHeadline()}">\n                        ${r}\n                    </div>\n                </div>`}render(){this.classList.add("c-Zone"),this.getClassNames().map((t=>{this.classList.add(t)})),this.innerHTML=`<section class="c-Zone__item">\n                            ${this.renderInsideContent()}\n                         </section>`}connectedCallback(){r=this.querySelector(".c-Zone__item")?this.querySelector(".c-Zone__item").innerHTML:this.innerHTML,this.previousState=this.isMobile(),this.render(),this.initialStyle=this.getAttribute("style")||"";const t=this;!function(t,e,i){const n=(e,i)=>{t.setAttribute(e,i)};if(/Trident\/|MSIE/.test(window.navigator.userAgent)||(s=window.navigator.userAgent,r=s.indexOf("OS "),(s.indexOf("iPhone")>-1||s.indexOf("iPad")>-1)&&r>-1&&window.Number(s.substr(r+3,3).replace("_","."))<14))n(e,i);else if("IntersectionObserver"in window){let s=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&(n(e,i),s.unobserve(t.target))}))}));s.observe(t)}var s,r}(t,"style",`${t.getAttribute("style")||""}; ${t.getStyleContent()}`),this.initTracking(),this.debouncedOnResize=function(t,e){let i;return e=e||100,function(n){i&&clearTimeout(i),i=setTimeout(t,e,n)}}(this.onResize.bind(this),250),window.addEventListener("resize",this.debouncedOnResize)}getCompleteStyle(){return`${this.initialStyle}; ${this.getStyleContent()}`}isMobile(){return window.innerWidth<=750}onResize(){this.isMobile()!==this.previousState&&(this.style=this.getCompleteStyle(),this.previousState=this.isMobile())}disconnectedCallback(){window.removeEventListener("resize",this.debouncedOnResize)}getStyleContent(){const t=this.getAttribute("background_mobile")||null,e=this.getAttribute("background_desktop")||null,i=this.getAttribute("background_position")||null,n=this.getAttribute("background_size")||null,s=this.getAttribute("background_color")||null,r=this.getAttribute("background_attachment")||null,o=this.getAttribute("background_repeat")||null,a=[];if(e||t){let i=this.isMobile()&&t?t:e;a.push(`background-image: url(${i})`)}return i?a.push(`background-position: ${i}`):a.push("background-position: center"),n&&a.push(`background-size: ${n}`),r&&a.push(`background-attachment: ${r}`),s&&a.push(`background-color: ${s}`),o?a.push(`background-repeat: ${o}`):a.push("background-repeat: no-repeat"),a.join(";")}getClassNames(){const t=[],e=this.getAttribute("align_mobile")||null,i=this.getAttribute("contrast"),n=this.getAttribute("auto_height")||null,s=this.getAttribute("align")||null,r=this.getAttribute("container")||!1;return t.push(`c-Zone--${this.isMobile()&&e?e:s}`),i&&t.push(`c-Zone--${i}`),n&&t.push("c-Zone--auto-height"),r&&t.push("c-Zone--container"),t}initTracking(){!function(t,e){const i=new s(t,e)}(this,{id:this.getAttribute("campaign_id")||null,name:this.getAttribute("campaign_name")||null,position:this.getAttribute("campaign_position")||null,creative:this.getAttribute("campaign_creative")||null})}getStyleHeadline(){const t=this.getAttribute("background_color_headline")||null,e=[];return t&&e.push(`background-color: ${t}`),e.join(";")}}customElements.get("n-zone")||customElements.define("n-zone",o);export{o as default};
