(window.webpackJsonpcasperEventHub=window.webpackJsonpcasperEventHub||[]).push([[9,8],{18:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var r=n(7),o=n(2),i=n(9);var u,a,c=(u=function(){return null!=a?a:a=new Promise((function(t){var e=document.createElement("form");e.style.display="none",e.method="POST";var n=document.createElement("input");n.setAttribute("type","email"),n.setAttribute("id","ta-header-username"),n.setAttribute("autocomplete","username email"),n.setAttribute("value",""),n.addEventListener("propertychange change click keyup input paste blur",(function(){a(),t(!!n.value)}));var r=setInterval((function(){""==n.value&&window.getComputedStyle(n).backgroundColor===i||(a(),t(!0))}),100),o=document.createElement("input");o.setAttribute("type","password"),o.setAttribute("id","ta-header-password"),o.setAttribute("autocomplete","current-password"),o.setAttribute("value",""),e.appendChild(n),e.appendChild(o),document.body.appendChild(e);var i=window.getComputedStyle(n).backgroundColor,u=setTimeout((function(){clearInterval(r),e.parentNode&&e.parentNode.removeChild(e),t(!1)}),1e3),a=function(){clearTimeout(u),clearInterval(r),e.parentNode&&e.parentNode.removeChild(e)}}))},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(u.apply(this,t))}catch(t){return Promise.reject(t)}});function s(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){var e,n;function o(e){var n,r,o,i;n=t.call(this)||this,r=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n),i=void 0,(o="eventHandler")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i;try{n.eventHandler=window.napi.data().on("user.login",e)}catch(t){}return n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,d(e,n);var u=o.prototype;return u.getState=function(){try{var e,n=this,o=window[window.config.padl.namespace].dataLayer.user;return i=function(){return o&&o.isLoggedIn?function(t,e,n){if(n)return e?e(t()):t();try{var r=Promise.resolve(t());return e?r.then(e):r}catch(t){return Promise.reject(t)}}(r.e,(function(t){e=t})):s(n.isNotLoggedIn(),(function(t){e=t?{status:"not-logged-in"}:{status:"anonymous"}}))},u=function(){return{isValid:t.prototype.validate.call(n,[e]),user:e}},(a=i())&&a.then?a.then(u):u(a)}catch(t){return Promise.reject(t)}var i,u,a},u.off=function(){window.napi.data().off("user.login",this.eventHandler)},u.isNotLoggedIn=function(){try{var t=void 0!==(e=Object(i.readStoredParams)()).utm_source&&"Email"===e.utm_source;return s(t||c(),void 0,t)}catch(t){return Promise.reject(t)}var e},o}(o.a)},7:function(t,e,n){"use strict";function r(){}function o(t){if(t&&t.then)return t.then(r)}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function c(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function s(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}function d(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}function f(t,e){var n=t();return n&&n.then?n.then(e):e(n)}n.d(e,"e",(function(){return p})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return h}));var l,p=d((function(){return f((function(){if(null==l)return o(s((function(){return c(window.napi.customer().read(),(function(t){void 0!==(l=JSON.parse(JSON.stringify(t))).preferredTechnology&&(l.preferredTechnology=l.preferredTechnology.slice(30))}))}),(function(){l={status:"anonymous"},(window.localStorage.getItem("loggedTimestamp")||window.sessionStorage.getItem("loggedTimestamp")||y("ecapiLoginToken")||y("autoLoginToken")||y("nesLoginToken"))&&(l.status="not-logged-in")})))}),(function(){return l}))})),v=d((function(){var t=window.napi.catalog();return function(t,e,n){if(n)return e?e(t()):t();try{var r=Promise.resolve(t());return e?r.then(e):r}catch(t){return Promise.reject(t)}}(m,(function(e){var n=[];return c(Promise.all(e.map(d((function(e){return o(s((function(){return c(Promise.all(e.supercategories.map(t.getCategory)),(function(t){var r=function(t){for(var e,n=[],r=[],o=null,u=!1,a=i(t);!(e=a()).done;){var c=e.value;["original","vertuo"].indexOf(c.code)>-1?n.push(c.code):c.code.indexOf("capsule-range")>-1&&-1===c.code.indexOf("-Mobile")?o=c.code.replace("capsule-range-",""):c.code.indexOf("capsule-cupSize")>-1?r.push(c.code.replace("capsule-cupSize-","")):"standing-orders"===c.code&&(u=!0)}return{cupSizes:r,isStandingOrders:u,range:o,technologies:n}}(t);n.push(a({},e,r))}))}),(function(){})))})))),(function(){return n}))}))})),m=d((function(){var t=window.napi.catalog();return c(window.napi.cart().read(),(function(e){var n=[];return c(Promise.all(e.map(d((function(e){return o(s((function(){return c(t.getProduct(e.productId),(function(t){var r=e.unitPrice,o=a({},e,t);0!==r&&0===o.price&&(o.price=r),n.push(o)}))}),(function(){})))})))),(function(){return n}))}))})),g=d((function(){return s((function(){return c(window.napi.standingOrders().getOrders("Responsive"))}),(function(){return[]}))})),h=d((function(){return s((function(){return c(window.napi.subscription().getSubscriptions(),(function(t){return c(window.napi.market().getSubscriptions(),(function(e){return c(Promise.all(t.map(d((function(t){var n;return f((function(){if(t.promotionalProductId)return c(window.napi.catalog().getProduct(t.promotionalProductId),(function(t){n=t}))}),(function(){return a({},e.subscriptionProfiles.find((function(e){return e.id===t.profileId})),t,{invoiceProduct:n})}))})))),(function(t){return t}))}))}))}),(function(t){return console.log("error with experience",t),[]}))}));function y(t){return window.document.cookie.indexOf(t+"=")>-1}},9:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u})),n.d(e,"readStoredParams",(function(){return a}));var r=n(2),o=n(1);function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n),r.prototype.getState=function(){var e=a(),n={isValid:!1};return e&&(n.isValid=t.prototype.validate.call(this,[e]),n.urlParams=e),n},r}(r.a);function a(){var t=window.sessionStorage.getItem(o.h);return t?JSON.parse(t):{}}}}]);
//# sourceMappingURL=User.js.map