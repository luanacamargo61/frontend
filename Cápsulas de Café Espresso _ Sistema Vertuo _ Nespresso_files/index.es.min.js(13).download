const e=1024,t=768,i="WEB_COMPONENT_POPIN_OPEN",s="WEB_COMPONENT_POPIN_CLOSE",n="WEB_COMPONENT_POPIN_CLOSED",r="keydown",o="WEB_COMPONENT_SLIDER_READY",a="WEB_COMPONENT_SORT_BY_CHANGE",l="swiped-down",c="vertuo",d="light";class u extends HTMLElement{constructor(){super(),this.template=""}connectedCallback(){this.props=this._createProps(),this.onStart?.(),this.loadTemplate(),this.onReady?.()}_createProps(e=null){const t=e||this.attributes;let i;try{i=[...t].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});const e=[...t].find((e=>"data"===e.nodeName));return null==e?i:{...i,...JSON.parse(e.nodeValue)}}catch(e){console.log(this.nodeName,"ERROR: No data",e)}}render(e=!1){e&&(this.innerHTML="");const t=(e,i)=>{const s=e=>3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase(),n=e=>e.childNodes&&e.childNodes.length>0?null:e.textContent;var r=Array.prototype.slice.call(i.childNodes),o=Array.prototype.slice.call(e.childNodes),a=r.length-o.length;if(a>0)for(;a>0;a--)r[r.length-a].parentNode.removeChild(r[r.length-a]);o.forEach((function(e,o){if(r[o])if(s(e)===s(r[o])){var a=n(e);if(a&&a!==n(r[o])&&(r[o].textContent=a),r[o].childNodes.length>0&&e.childNodes.length<1)r[o].innerHTML="";else{if(r[o].childNodes.length<1&&e.childNodes.length>0){var l=document.createDocumentFragment();return t(e,l),void r[o].appendChild(l)}e.childNodes.length>0&&t(e,r[o])}}else r[o].parentNode.replaceChild(e.cloneNode(!0),r[o]);else i.appendChild(e.cloneNode(!0))}))},i=(s=this.template,(new DOMParser).parseFromString(s,"text/html").body);var s;t(i,this)}loadTemplate(e="",t=!1){this.template=""===e?this.template:`${e}`,this.render(t)}disconnectedCallback(){this.onDestroy?.()}}customElements.get("nb-nespresso-element")||customElements.define("nb-nespresso-element",u);const h={get is(){const{innerWidth:i,devicePixelRatio:s}=window;return{mobile:i<t,mobile_tablet:i<e,tablet:i>=t&&i<e,desktop:i>=e&&s<=1,retina:i>=e&&s>1}},lt:e=>window.innerWidth<e};function p(e){const t=document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body.childNodes}function b(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=i.charAt(Math.floor(62*Math.random()));return t}function m(e){let t=e,i=e;return-1!==e.indexOf("#")?i=e.replace("#",""):t="#"+e,{linkNoHash:i,linkHash:t}}function g(e,t,i,s){const n=(t,i)=>{e.setAttribute(t,i);const n=()=>e.classList.add("lazy-loaded");if(s){const t=new Image;return t.src=s,t.onload=n,void(t.onerror=()=>{throw n(),e.classList.add("lazy-loaded-error"),new Error(`Image ${s} cannot be loaded`)})}n()};if(/Trident\/|MSIE/.test(window.navigator.userAgent)||(r=window.navigator.userAgent,o=r.indexOf("OS "),(r.indexOf("iPhone")>-1||r.indexOf("iPad")>-1)&&o>-1&&window.Number(r.substr(o+3,3).replace("_","."))<14))n(t,i);else if("IntersectionObserver"in window){e.classList.add("lazy-load");let s=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(n(t,i),s.unobserve(e.target))}))}));s.observe(e)}else n(t,i);var r,o}function _(e,t,i,s){let n=0;for(;e;){const r=e.indexOf(i,n);if(-1===r)break;const o=e.indexOf(s,r+1);if(-1===o)break;const a=e.substring(r+i.length,o);null!=t[a]?(e=e.substr(0,r)+t[a]+e.substr(o+s.length),n=r):n=o}return e}const f=e=>v(JSON.stringify(e)),v=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(e=>t[e]))},y=(e,t)=>{for(let i in t)e.setAttribute(i,t[i]);return e},k="plp",w=e=>"pdp"===e,E=e=>{const{url:t,name:i="",name_custom:s=""}=e;if(!i)return"";const n=""!==s?s:i,r=[],o=(({variation:e})=>w(e)?"h1":"h3")(e);return r.push(`<${o} class="cb-heading">`),t&&!w(e.variation)?r.push((({url:e,a11y_product_card:t="",name:i="",name_custom:s=""})=>{const n=t.replace("{productName}",i);return`<a href="${e}" target="_self" title="${n}" aria-label="${n}">${""!==s?s:i}</a>`})(e)):r.push(`${n}`),r.push(`</${o}>`),r.join("")},C=({headline:e="",is_headline_hidden:t=!1})=>t&&h.is.mobile||!e?"":`<p class="cb-text">${e}</p>`,S=({label_technology:e})=>e?`<p class="cb-technology t-xs-700">${e}</p>`:"",$=({label_range:e})=>e?`<p class="cb-range t-xs-500">${e}</p>`:"",L="capsule",x="machine",P="/machineTechno/",A=e=>window.napi.catalog().getProduct((e=>e.replace(/[^a-z0-9- +./]/gi,""))(e));function I(e){const t=e.technologies[0];return t.substring(t.indexOf(P)+P.length)}function O(e,t){return e%t==0}function T(e,t=I){return 1!==e.sales_multiple&&O(e.sales_multiple,10)?e.sales_multiple/10:1!==e.sales_multiple&&t(e)===c&&O(e.sales_multiple,7)?e.sales_multiple/7:1===e.sales_multiple&&O(e.unitQuantity,10)?e.unitQuantity/10:1===e.sales_multiple&&t(e)===c&&O(e.unitQuantity,7)?e.unitQuantity/7:NaN}function N(e){e.sales_multiple=e.sales_multiple||e.salesMultiple;const t=e.sales_multiple>1,i=1===e.unitQuantity,s=1===e.sales_multiple,n=e.unitQuantity>1;return(!t||!i)&&(s&&n)}const B=async e=>{const t=await(async()=>await window.napi.priceFormat())(),i=window[window.config.padl.namespace].dataLayer.app.app.currency;return t.html?t.html(i,e):t.short(i,e)||""},M=e=>e.querySelector(".cb-price-old"),D=({strikethrough_price:e},t)=>{return e?((i=e,B(i)).then((e=>{const i=M(t);i&&(i.innerHTML=e)})).catch((e=>{console.error(`Error: Component SKU - Strike Through Price  - ${e}`);const i=M(t);i&&(i.style.display="none")})),'<p class="cb-price-old"></p>'):"";var i},F=({price:e,hidePrice:t,giftcard_price:i,price_per_capsule:s,show_sleeve_price:n,type:r})=>{if(!e&&!i||t)return"";let o=null;return o=!n&&s?s:e,r!==L&&(o=e),`<p class="cb-price-current"><span>${o||i}</span></p>`},z=({eventName:e,args:t,element:i})=>{let s;i=i||window,t?s=new CustomEvent(e,{detail:t,bubbles:!0}):"function"==typeof Event?s=new Event(e):(s=document.createEvent("Event"),s.initEvent(e,!0,!0)),i.dispatchEvent(s)},q=e=>{if(e.detail)return e.detail},H=e=>{window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"customEvent",eventRaisedBy:"Web component",eventCategory:"User Engagement",eventAction:"Click",eventLabel:"",nonInteraction:0,...e})},R=e=>{window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"impression",eventRaisedBy:"Page Builder",eventAction:"Promo Impression",ecommerce:{},...e})},W=e=>{const{campaign:t,cta_name:i}=e;(e=>{var t;window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"promoClick",eventRaisedBy:"Page Builder",ecommerce:{},...e,cta_name:null!==(t=e?.cta_name)&&void 0!==t?t:"(not set)"})})({cta_name:i,ecommerce:{promoClick:{promotions:[{id:t.id,name:t.name,position:t.position,creative:t.creative}]}}})},j=async(e,t)=>{let i=t;return i||(i=await A(e)),i},V=(e,t={})=>{const{internationalName:i,internationalId:s,category:n,unitPrice:r,legacyId:o,name:a,technologies:l,bundled:c,inStock:d,type:u}=e,h=l.map((e=>e.split("/").pop())).join("|");return[{...t,name:i,id:s,price:r,dimension44:n.toLowerCase().includes("discovery").toString(),dimension53:o,dimension54:a,dimension55:n,dimension56:h,dimension57:c?"bundle":"single",dimension192:d?"in stock":"out of stock",category:u,brand:"Nespresso"}]},Q=async(e,t,i,s)=>{const n=await j(i,s),r=V(n,{list:t,position:e}),o=n.currency;window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"impression",eventAction:"Product Impression",currencyCode:o,eventRaisedBy:"Page Builder",ecommerce:{impressions:r}})},U=async(e,t,i,s)=>{if("string"!=typeof t)return;const n=await j(i,s),r=V(n,{position:e}),o=n.currency;window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"productClick",eventAction:"Product Click",currencyCode:o,eventRaisedBy:"Page Builder",ecommerce:{click:{actionField:{list:t},products:r}}})};class G extends u{constructor(){super(),this.type="default",this.popinId="",this.isQuickViewPlp=!1,this.boundOnPDPLinkClick=this.onPDPLinkClick.bind(this),this.boundOnQuickViewOpen=this.onQuickViewOpen.bind(this),this.clickMethod=this.boundOnPDPLinkClick}loadTemplate(){this.classList.add("nb-sku"),this.classList.add(`nb-sku__${this.type}`),(({variation:e,type:t},i)=>{"pdp"===e&&i.setAttribute("pdp","true"),e===k&&t===L&&h.is.mobile?i.setAttribute("landscape","true"):i.setAttribute("portrait","true")})(this.props,this),Object.assign(this.props,this.getSleevePrice(this.props));const{quick_view_plp:e={}}=this.props;this.isQuickViewPlp=e?.show_view||!1,this.clickMethod=this.isQuickViewPlp?this.boundOnQuickViewOpen:this.boundOnPDPLinkClick,this.template=`${this.renderVisual()}\n                          ${this.renderHeader()}\n                          <div class="cb-content">\n                              ${this.renderInformation()}\n                              ${this.isQuickViewPlp?this.renderQuickView():""}\n                              <div class="cb-shop">\n                                  <div class="cb-price">\n                                      ${this.renderPricing()}\n                                  </div>\n                                  ${this.renderAction()}\n                              </div>\n                              ${this.renderFooter()}\n                          </div>`,this.render()}onReady(){const{activeSku:e,sku:t}=this.props;this.setAttribute("data-product-short-sku",e||t),this.bindEvent()}renderHeaderDefault(){return`${(({labels:e=[]},t=null)=>{if(!t||!e||!e.length)return"";t&&e.length&&t.classList.add("has-labels");const i=h.is.mobile?"row":"column";return`<nb-card-labels data="${f({labels:e})}" direction="${i}"></nb-card-labels>`})(this.props,this)}${((e,t)=>{const{fair_trade:i,alt_fair_trade:s,is_organic:n,alt_organic:r,only_vertuo_next:o,alt_vertuo_next:a,is_rainforest:l,alt_rainforest:c,is_sustainable:d,alt_sustainable:u,is_q_certified_arabica:h,alt_q_certification_arabica:p,logos:b}=e;return i||n||o||l||d||h||!(null==b||b.length<1)?(t.classList.add("has-logos"),`<nb-card-logos data='${f({fair_trade:i,alt_fair_trade:s,is_organic:n,alt_organic:r,only_vertuo_next:o,alt_vertuo_next:a,is_rainforest:l,alt_rainforest:c,is_sustainable:d,alt_sustainable:u,is_q_certified_arabica:h,alt_q_certification_arabica:p,logos:b})}'></nb-card-logos>`):""})(this.props,this)}`}renderHeader(){return this.renderHeaderDefault()}renderVisualDefault(){const e=this.hasAttribute("portrait")?"portrait":"landscape";return(({url:e,image_alt_text:t,image:i,quick_view_plp:s={}},n="portrait")=>{if(!i)return"";let r=`<nb-img file="${i}"\n        description="${t}"\n        aspect_ratio="${"portrait"===n?"16/9":"1/1"}"\n        object_fit="contain"\n        force_height="${"portrait"===n?"160":"120"}">\n    </nb-img>`;return(e||s?.show_view)&&(r=`<a href="${e||"javascript:void(0)"}" target="_self" aria-hidden="true" tabindex="-1">${r}</a>`),`<div class="cb-image">\n                ${r}\n            </div>`})(this.props,e)}getSleevePrice({number_of_sleeves:e,price:t}){let i,s=!0;return"1"===e?i=t:s=!1,{hasPricePerSleeve:s,sleevePrice:i}}renderVisual(){return this.renderVisualDefault()}renderInformationDefault(){return`${S(this.props)}\n        ${$(this.props)}\n        ${E(this.props)}\n        ${C(this.props)}`}renderInformation(){return this.renderInformationDefault()}renderQuickView(){return(({sku:e,quick_view:t,tracking_list:i,tracking_position:s})=>t&&t.label&&t.popin_id?`<nb-link\n        color="gold"\n        size="large"\n        popin_id="${t.popin_id}"\n        sku='${e}'\n        tracking_list='${i}'\n        tracking_position='${s}'>${t.label}</nb-link>`:"")(this.props)}renderPricingDefault(){return`${D(this.props,this)}\n                ${F(this.props)}`}renderPricing(){return this.renderPricingDefault()}renderActionDefault(){return(e=>{const{category_name:t="",activeSku:i,sku:s,activeLongSku:n,longSku:r="",position:o,variation:a=k,hidePrice:l,url:c,view_details_label:d="View details",show_view_details:u=!1,rendererName:p="",is_machine_b2b:b=!1,contact_cta:m={}}=e;let g="large";a===k&&(g=h.is.mobile?"small":"large"),"small"===a&&(g="small");let _=c,f=d,v=m.show_contact_cta||!1,y=m.contact_cta_text||"",w=m.contact_url_anchor||"";return l||u?b&&v?(_=w,f=y,`<nb-cta\n            ${w?`link="${_}"`:""}\n            variation="primary">${f}</nb-cta>`):`<nb-cta link="${_}" variation="primary">${f}</nb-cta>`:`\n        <nb-add-to-cart\n            sku="${i||s}"\n            longSku="${n||r}"\n            buttonSize="${g}"\n            showPrice\n            range='${t}'\n            position='${o}'\n            rendererName='${p}'\n        ></nb-add-to-cart>\n    `})(this.props)}renderAction(){const e=this.querySelector('[slot="action"]')?.outerHTML;return e||this.renderActionDefault()}renderFooterDefault(){return(({additional_message_icon:e,additional_message:t,additional_message_link:i})=>{if(!t&&!i)return"";let s="";if(t){let i="";e&&(i=`<nb-icon icon="${e}" class="additionalMsgIcon"></nb-icon>`),s=`<p class="cb-warn t-sm-500-sl">\n            ${i}\n            ${t}</p>`}return i&&i.link&&i.label?s+`<nb-link\n            link='${i.link}'\n            color="${i.color}"\n            size="${i.size}"\n            seo_label="${i.seo_label}">\n            ${i.label}\n        </nb-link>`:s})(this.props)}renderFooter(){return this.renderFooterDefault()}async onPDPLinkClick(){const e=this.getAttribute("tracking_position")||0,t=this.getAttribute("tracking_list")||"";await U(e,t,this.props.longSku)}async renderSkuQuickView(){this.popinId="plp-quick-view";let e=document.querySelector(`#${this.popinId}`);e&&e.remove();const{sku:t}=this.props;t&&await(async(e,t,i)=>{try{const s=await A(e),{tracking_position:n,tracking_list:r}=i;if(!s)return;let o=document.createElement("nb-sku-quick-view");o.setAttribute("data",JSON.stringify(((e,t,i)=>{const{sku:s,longSku:n,categoryName:r,price:o,url:a,quick_view_plp:l,strikethrough_price:c,hidePrice:d,campaign:u}=t;var h;return{popin:{popin_id:e,close:l.popin.close,footer:!0},product:{...t,...i,...(h=i.capsuleProperties,{acidity:{value:h?.acidity},bitterness:{value:h?.bitterness},body:{value:h?.body},capsuleProperties:{intensity:h?.intensity},roast:{value:h?.roastLevel}})},intensity:{intensity_label:"Intensity",a11y_intensity_max:"max of {max_intensity}"},cup_sizes:{...l.cup_sizes,items:t.cupSizesDetails},aromatic_profile:{...l.aromatic_profile,items:i.capsuleProductAromatics},link:{...l.link,url:a},levels:{...l.levels},pricing:{add_to_cart:{sku:s,longSku:n,category_name:r,position:"",variation:"small",price:o,strikethrough_price:c,hidePrice:d,url:"",view_details_label:"View details",rendererName:""},showSleeve:{},showCapsulePrice:{}},campaign:u}})(t,i,s))),o.setAttribute("id",t),o.setAttribute("tracking_no_impression",!0),o.setAttribute("tracking_position",n),o.setAttribute("tracking_list",r),document.body.appendChild(o)}catch(t){console.error(`getProduct fail on sku ${e}`)}})(t,this.popinId,this.props)}async onQuickViewOpen(e){return e.preventDefault(),await this.renderSkuQuickView(),(({creative:e="",actionType:t="",internationalId:i="",internationalName:s="",productType:n="",technology:r="",category:o="",rawPrice:a="",eventAction:l=""})=>{window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"page_builder_component_interaction",event_raised_by:"page builder",component_name:e,action_type:t,item_id_event:i,item_name_event:s,item_category_event:n,item_technology_event:r,item_range_event:o,item_price_event:a,eventCategory:"User Engagement",eventAction:l,eventLabel:`${n} - ${r} - ${s}`})})({creative:this.props.campaign?.creative,actionType:"pdp quick view",internationalId:this.props.internationalId,internationalName:this.props.internationalName,productType:this.props.type,technology:I(this.props),category:this.props.category,rawPrice:this.props.rawPrice,eventAction:"PDP Quick View"}),z({eventName:i,args:{id:this.popinId}}),!1}bindEvent(){this.unbindEvent(),this.linkElements=this.querySelectorAll("a[href]"),this.linkElements.length&&Array.from(this.linkElements).forEach((e=>{e.addEventListener("click",this.clickMethod)}))}unbindEvent(){this.linkElements&&this.linkElements.length&&(Array.from(this.linkElements).forEach((e=>{e.removeEventListener("click",this.clickMethod)})),this.linkElements=[])}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-sku")||customElements.define("nb-sku",G);const K="bundle-popin-id-";let Y,J="";const X=e=>{const t=e.props.legacyId||"";let i=K+t;if(null!=document.getElementById(i))return;let s=document.createElement("nb-popin");s=e.appendChild(s),s.setAttribute("id",i),s.setAttribute("content","")},Z=e=>{const{label_decaffeinato:t}=e;return new RegExp(t,"ig")},ee=e=>{const{name:t}=e;if(((e,t)=>{const{label_decaffeinato:i}=e;return i&&""!==i&&Z(e).test(t)})(e,t)){const{label_decaffeinato:i}=e,s=h.is.mobile?"t-xs-700-caps":"t-sm-700-caps";e.name_custom=t.replace(Z(e),`<span class='${s}'>${i}</span>`).trim()}return E(e)},te=e=>{const{show_sleeve:t=!1}=e;if(!t)return"";const{label_capsules:i,sleeve_syntax:s}=e,n=(e=>{const{number_of_sleeves:t,label_sleeves:i,label_sleeve:s}=e;return(t||T(e))>1&&i?i:s})(e),r=e.number_of_capsules?e.number_of_capsules:(({bundled:e,sales_multiple:t,unit_quantity:i,unitQuantity:s})=>!1===e?t:i||s||0)(e),o=_(s,{numberOfSleeves:e.number_of_sleeves?e.number_of_sleeves:T(e),sleeveLabel:n,quantity:r,label_capsules:i,sleevePrice:e.hasPricePerSleeve?e.sleevePrice:"",perSleeveLabel:e.hasPricePerSleeve?e.perSleeveLabel:""},"{","}");return o?`<p class="cb-price-items cb-show-sleeve">${o}</p>`:""};customElements.get("nb-sku-coffee")||customElements.define("nb-sku-coffee",class extends G{constructor(){super(),this.type="coffee",this.boundHandleBundleOpen=this.handleBundleOpen.bind(this)}onReady(){this.bundlePopinLink=this.querySelector(".cb-cta-bundle"),super.onReady()}renderInformation(){return`${S(this.props)}\n                ${$(this.props)}\n                ${ee(this.props)}\n                ${C(this.props)}\n                ${(({technologies:e,intensity:t,a11y_intensity_max:i,intensity_label:s=""})=>{const n=(({technologies:e})=>-1!==e.indexOf("original")?14:12)({technologies:e});return 0===t?"":`<nb-intensity\n        class="t-xs-500-sl"\n        intensity="${t}"\n        max_intensity="${n}"\n        a11y_intensity_max="${i}"\n        intensity_label="${s}">\n    </nb-intensity>`})(this.props)}\n                ${(({type:e,bundle_details:t,bundled:i,sku:s,position:n,range:r},o)=>"capsule"===e&&t&&t.popin_link_text&&!0===i?(J=`<nb-bundle-details\n                main_sku='${s}'\n                description='${t.description}'\n                other_skus='${t.other_skus}'\n                other_skus_quantity= '${t.other_skus_quantity}'\n                range='${r}'\n                position='${n}'>\n            </nb-bundle-details>`,o.variation="white",Y=t.popin_label_close,`<nb-link class="cb-cta-bundle" size="large" color="gold" label="${t.popin_link_text}"></nb-link>`):"")(this.props,this)}\n                ${(({packaging:e})=>{if(!e)return"";const{show_packaging:t,packaging_list:i,a11y_packaging_label:s}=e;return t&&i&&i.length?`<div class="cb-sku-tab">\n        <span class="sr-only">${s}</span>\n        ${i.map((({label:e,url:t,selected:i})=>t&&!i?`<a href="${t}" target="_self"><span class="t-sm-400-caps">${e}</span></a>`:`<div aria-current="page"><span class="t-sm-700-caps">${e}</span></div>`)).join("")}\n    </div>`:""})(this.props)}`}renderPricingDefault(){return`${D(this.props,this)}\n                ${F(this.props)}`}renderPricing(){return`${this.renderPricingDefault()}\n                ${(({packaging:e})=>{if(!e)return"";const{show_packaging:t,packaging_list:i}=e;return t&&i&&i.length?`<p class="cb-price-items cb-pack-format">${i.find((e=>!0===e.selected)).pack_format}</p>`:""})(this.props)}\n                ${te(this.props)}\n                ${(e=>{const{show_capsule_price:t=!1,capsule_price_label:i,capsule_price_syntax:s="{capsule_price_label}: {price_per_capsule}",price_per_capsule:n,show_sleeve_price:r}=e;if(!t||!i||!r)return"";const o=_(s,{capsule_price_label:i,price_per_capsule:n},"{","}");return o&&n?`<p class="cb-price-items cb-price-capsule">${o}</p>`:""})(this.props)}`}handleBundleOpen(){(e=>{const t=e.props.legacyId||"";X(e);let s=K+t;e.bundlePopIn=document.getElementById(s),e.appendChild(e.bundlePopIn),y(e.bundlePopIn,{variation:"before",bgcolor:"white",size:"L",padding:"false",label_close:Y,content:J}),e.bundlePopIn.classList.add("nb-popin--bundle"),z({eventName:i,args:{id:s}})})(this)}bindEvent(){super.bindEvent(),this.bundlePopinLink&&this.bundlePopinLink.addEventListener("click",this.boundHandleBundleOpen)}unbindEvent(){super.unbindEvent(),this.bundlePopinLink&&this.bundlePopinLink.removeEventListener("click",this.boundHandleBundleOpen)}});const ie=e=>{const t=(e=>e.find((e=>"data"===e.nodeName)))([...e]),i=[...e].filter((e=>"data"!==e.nodeName)).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{});if(se(t))return i;try{return{...i,...JSON.parse(t.nodeValue)}}catch(e){console.log("ERROR: No data",e,t?.nodeValue)}},se=e=>null==e;class ne extends HTMLElement{constructor(){super(),this.props={}}connectedCallback(){this.props=ie(this.attributes),this.render()}render(){const{intensity_label:e="Intensity",a11y_intensity_max:t,max_intensity:i}=this.props,s=parseInt(this.props.intensity);if(!s||isNaN(s))return"";const n=t.replace("{max_intensity}",i);this.innerHTML=`\n            <div aria-label="${e} ${s} ${n}">\n                ${e}${this.renderIntensityMin(s)}\n                ${s}\n                ${this.renderIntensityMax(s)}\n            </div>\n        `}renderIntensityMin(e){return new Array(Math.max(e,0)-0).fill('<span class="bar filled"></span>').join("")}renderIntensityMax(e){let{max_intensity:t}=this.props;return t&&"undefined"!==t||(t=14),new Array(parseInt(t)-Math.min(e,parseInt(t))).fill('<span class="bar"></span>').join("")}}customElements.get("nb-intensity")||customElements.define("nb-intensity",ne);class re{constructor(){this._bus=document.createElement("div")}register(e,t){this._bus.addEventListener(e,t)}remove(e,t){this._bus.removeEventListener(e,t)}fire(e,t={}){this._bus.dispatchEvent(new CustomEvent(e,{detail:t}))}}if(!oe)var oe=new re;var ae=oe;const le=()=>window[window?.padlNamespace]?.dataLayer,ce=()=>{const e=le();return e?e.app.app.market.toLocaleLowerCase():"ch"},de=()=>le()?le().page.page.pageInfo.language.toLocaleLowerCase():"en";class ue extends HTMLElement{constructor(){super(),this.props={},this.market=ce(),this.language=de()}static get observedAttributes(){return["slot","quantity"]}connectedCallback(){this.props=ie(this.attributes),this.boundHandleClick=this.handleClick.bind(this),this.slot=this.innerHTML.replace(/\n*$/,"").trim(),this.render()}render(){const{variation:e,contrast:t,transparent:i="false",size:s="48",icon_right:n="",icon_left:r="",label:o,seo_label:a="",aria_label_before:l,aria_label_after:c,link_new_tab:d=!1,label_update:u,add_to_cart:h="",tracking_position:p="",tracking_list:b="",long_sku:m=""}=this.props;let{link:g}=this.props;const _=this.slot?this.slot:o,f=document.createElement(g?"a":"button");p&&b&&m&&Q(p,b,m),g&&(g=g.replace("{market}",this.market),g=g.replace("{lang}",this.language),f.setAttribute("href",g)),g&&d&&f.setAttribute("target","_blank"),a&&g&&f.setAttribute("title",a),l&&f.setAttribute("aria-label",l+" "+_),c&&f.setAttribute("aria-label",_+" "+c),l&&c&&f.setAttribute("aria-label",l+" "+_+" "+c),"navigation"!==e&&f.classList.add("button--cta"),f.classList.add(`button--${e}`),t&&("true"===i?f.classList.add(`button--${t}--transparent`):f.classList.add(`button--${t}`)),s&&f.classList.add(`size--${s}`),"primary"!==e&&"tertiary"!==e||""===h||(this.setAttribute("add_to_cart",h),this.setAttribute("quantity","0"),"small"===h?f.classList.add("addToCart--small"):f.classList.add("addToCart--large")),r&&this.setAttribute("icon_left",r),n&&this.setAttribute("icon_right",n),f.innerHTML=`\n                ${r&&`<nb-icon icon='${r}'></nb-icon>`}\n                <span>${_}</span>\n                ${"primary"===e&&""!==h&&""!==u?`<span class="update">${u}</span>`:""}\n                ${n&&`<nb-icon icon='${n}'></nb-icon>`}\n        `,this.innerHTML=f.outerHTML,this.removeListeners(),this.addListeners()}handleClick(){this.track();const{event_id:e="",popin_id:t="",qs_id:i=""}=this.props;e&&ae.fire(e,{}),t&&this.popin(t),i&&this.openQuantitySelector(i)}popin(e){z({eventName:i,args:{id:e}})}openQuantitySelector(e){z({eventName:"WEB_COMPONENT_QS_OPEN",args:{id:e}})}track(){if(this.props.campaign_id){const{campaign_id:e="",campaign_name:t="",campaign_position:i="",campaign_creative:s="",campaign_instance_index:n="",label:r,popin_id:o=""}=this.props,a={id:e,name:t,position:i,creative:s};if(""===a.id)return;const l=o?"POPIN":"CTA",c=this.slot?this.slot:r;W({campaign:a,cta_name:`${l+(n?` - ${n}`:"")} - ${c}`})}}attributeChangedCallback(e){"slot"===e&&this.render(),"quantity"===e&&(this.classList.add("updated"),setTimeout((()=>{this.classList.remove("updated")}),1200))}addListeners(){this.addEventListener("click",this.boundHandleClick)}removeListeners(){this.removeEventListener("click",this.boundHandleClick)}disconnectedCallback(){this.removeListeners()}}customElements.get("nb-cta")||customElements.define("nb-cta",ue);const he="custom",pe=[{name:"small",sizes:[16,24,32,36,48,64,72,96,108,120,128,144,150,180,192,216,225,240,288,300,360,384,450,480,600]},{name:"medium",sizes:[270,512,540,675,720,768,800,900,960,1e3,1024,1080,1200,1350,1440,1500,1536,1600,1800,2e3,2048,2400,3e3,3200,4e3]},{name:"large",sizes:[640,1280,1920,2160,2560,2880,3072,3840,4096]},{name:"product",sizes:[45,50,58,60,65,90,100,130,135,174,195,200,230,232,260,300,400,460,690]}];class be extends HTMLElement{constructor(){super()}connectedCallback(){this.props=ie(this.attributes),this.render(),this.#e()}#e(){this.lazyload===he&&g(this.firstElementChild,"src",`${this.file}`,this.file)}render(){const{file:e="",description:t="",lazyload:i=he,fetchpriority:s=""}=this.props;""!==e&&(this.lazyload=i,this.file=e+this.#t(),this.#i(),this.classList.add("nb-img"),this.innerHTML=`\n            <img\n                ${this.lazyload===he?'src=""':`src="${this.file}"`}\n                ${""!==t?`alt="${t}"`:'alt="image" aria-hidden="true"'}\n                ${"native"===this.lazyload?'loading="lazy"':""}\n                ${""!==s?`fetchpriority=${s}`:""}\n                class="loading"\n             />`,this.parentClass=this.getAttribute("class").split(" ")[0],""!==this.parentClass&&this.firstElementChild.classList.add(this.parentClass+"-content"))}#t(){const{aspect_ratio:e,force_width:t,force_height:i,impolicy:s=!0}=this.props;if("false"===s)return"";let n=this.offsetWidth;if(t&&""!==t&&(n=Number(t)),i&&""!==i){const[t,s]=e.split("/");n=Math.round(Number(i)*t/s)}let r=this.#s(n);return`?impolicy=${this.#n(r)}&imwidth=${r}&imdensity=1`}#s(e){const{devicePixelRatio:t}=window;return t>1?2*e:e}#n(e){const{exactFound:t,closests:i}=this.#r(e);if(t)return t.name;{let e=i[0].diff,t=null;return i.forEach((i=>{i.diff<=e&&(e=i.diff,t=i)})),t.name}}#r(e){let t=null,i=[];return pe.every((s=>{const n=s.sizes.find((t=>t>=e));if(n){if(n===e)return t=s,!1;i.push({name:s.name,diff:n-e})}return!0})),{exactFound:t,closests:i}}#i(){const{aspect_ratio:e,object_fit:t,placeholder_color_light:i,placeholder_color_dark:s,error_message:n}=this.props;this.#o("--image-aspect-ratio",e),this.#o("--image-object-fit",t),this.#o("--image-placeholder-color-light",i),this.#o("--image-placeholder-color-dark",s),this.#o("--image-placeholder-error-text",'"'+n+'"')}#o(e,t){t&&'"undefined"'!==t&&this.style.setProperty(e,t)}}customElements.get("nb-img")||customElements.define("nb-img",be);class me extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.boundHandleClick=this.handleClick.bind(this),this.market=ce(),this.language=de()}connectedCallback(){this.props=ie(this.attributes),this.render(),this.setClassHelper(),this.bindEvents()}render(){const{size:e="large",color:t="gold",link:i="",icon_right:s="",icon_left:n="",image:r="",image_alt:o=""}=this.props;e&&this.setAttribute("size",e),t&&this.setAttribute("color",t),r&&this.setAttribute("image",r),o&&this.setAttribute("image_alt",o),n&&this.setAttribute("icon_left",n),s&&this.setAttribute("icon_right",s),""===i?this.renderButton():this.renderLink(),this.link=this.firstElementChild}renderLink(){const{label:e,seo_label:t="",tracking_label:i="",link_new_tab:s="false",a11y_label_new_tab:n="",icon_right:r="",image:o="",image_alt:a="",icon_left:l="",selected:c="",phantom:d=""}=this.props;let{link:u}=this.props;const h=this.slot?this.slot:e;u&&(u=u.replace("{market}",this.market),u=u.replace("{lang}",this.language)),this.innerHTML=`\n        <a\n            href="${u}"\n            ${"true"===s?'target="_blank"':""}\n            ${"true"===s&&""!==n?`aria-description='${n}'`:""}\n            ${i&&`tracking_label='${i}'`}\n            ${t?`title="${t}"`:""}\n            ${"true"===c?'aria-selected="true"':""}\n            ${"true"===d?`phantom="${h}"`:""}\n        >\n            ${l&&`<nb-icon icon='${l}'></nb-icon>`}\n            ${o&&`<img src='${o}' alt='${a}'/>`}\n            <span>${h}</span>\n            ${r&&`<nb-icon icon='${r}'></nb-icon>`}\n        </a>`}renderButton(){const{label:e,tracking_label:t="",icon_right:i="",icon_left:s="",selected:n="",image:r="",image_alt:o="",phantom:a=""}=this.props,l=this.slot?this.slot:e;this.innerHTML=`\n        <button\n            ${t&&`tracking_label='${t}'`}\n            ${"true"===n?'aria-selected="true"':""}\n            ${"true"===a?`phantom="${l}"`:""}\n        >\n            ${r&&`<img src='${r}' alt='${o}'/>`}\n            ${s&&`<nb-icon icon='${s}'></nb-icon>`}\n            <span>${l}</span>\n            ${i&&`<nb-icon icon='${i}'></nb-icon>`}\n        </button>`}setClassHelper(){const{size:e="large",cta_link_type:t="false"}=this.props;let i="";switch(e){case"xsmall":i="t-2xs-500";break;case"small":i="t-xs-500-sl";break;case"medium":i="t-sm-400-sl";break;default:i="t-xs-700-caps-sl"}"true"===t&&(i="t-sm-700-caps-sl",this.setAttribute("underline","false")),this.querySelector("a, button").classList.add(i)}handleClick(){this.track();const{popin_id:e="",sku:t="",tracking_position:i="",tracking_list:s=""}=this.props;e&&t?this.quickView(e,t,i,s):e&&this.popin(e)}popin(e){z({eventName:i,args:{id:e}})}quickView(e,t,i,s){z({eventName:"WEB_COMPONENT_QUICKVIEW_OPEN",args:{id:e,sku:t,tracking_position:i,tracking_list:s}})}track(){const{campaign_id:e="",campaign_name:t="",campaign_position:i="",campaign_creative:s="",campaign_instance_index:n="",label:r,popin_id:o="",long_sku:a="",tracking_list:l="",tracking_position:c=""}=this.props,d={id:e,name:t,position:i,creative:s},u=o?"POPIN":"LINK",h=this.slot?this.slot:r,p=n||0===n?` - ${n}`:"";if(l&&c)U(c,l,a);else{if(!this.props.campaign_id)return;W({campaign:d,cta_name:`${u+p} - ${h}`})}}bindEvents(){this.unbindEvents(),this.link.addEventListener("click",this.boundHandleClick)}unbindEvents(){this.link.removeEventListener("click",this.boundHandleClick)}disconnectedCallback(){this.unbindEvents()}}customElements.get("nb-link")||customElements.define("nb-link",me);class ge{constructor(e,t){this.observer=new IntersectionObserver((e=>this.onChange(e)),{threshold:[0],rootMargin:"0% 0%"}),this.el=e,this.data=t,this.el instanceof Element&&this.observer.observe(this.el)}onChange(e){e.forEach((e=>{e.isIntersecting&&(this.track(e),this.observer.unobserve(e.target))}))}track(){"requestIdleCallback"in window?window.requestIdleCallback((()=>this.runTrack())):window.setTimeout((()=>this.runTrack()),1)}runTrack(){this.data.id&&null!==this.data.id&&""!==this.data.id&&R({ecommerce:{promoView:{promotions:[this.data]}}})}}function _e(e,t){const i=new fe(e,t);return{destroy:()=>{i.getIom().hasIntersectionObserver()||i.destroy()}}}class fe extends ge{constructor(e,t){super(e),this.data=t}runTrack(){this.data.id&&null!==this.data.id&&""!==this.data.id&&R({ecommerce:{promoView:{promotions:[this.data]}}})}}class ve extends HTMLElement{constructor(){super(),this.slot=this.innerHTML}connectedCallback(){this.props=[...this.attributes].reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{}),this.render(),this.initTracking(),this.initLazyLoad()}initTracking(){const{campaign_id:e=null,campaign_name:t=null,campaign_position:i=null,campaign_creative:s=null}=this.props;_e(this,{id:e,name:t,position:i,creative:s})}initLazyLoad(){const e=this.querySelector(".cb-bg-img");if(!e)return;const t=this.getBgImgUrl();if(!t)return;const{lazy_load:i}=this.props;"false"!==i?g(e,"style",`background-image: url(${t}); ${e.getAttribute("style")||""}`,t):e.setAttribute("style",`background-image: url(${t})`)}getBgImgUrl(){const{background_mobile:e="",background_tablet:t="",background_desktop:i="",background_retina:s=""}=this.props;let n="";return h.is.mobile&&e?n=e:h.is.tablet&&t?n=t:(h.is.retina||h.is.tablet)&&s?n=s:(h.is.desktop||h.is.retina||h.is.tablet)&&i&&(n=i),n}render(){const{styles:e="",contrast:t,background_color:i="",classname:s="",element_class:n="",slot:r}=this.props;let o="light";"undefined"===t?this.setAttribute("contrast",o):o=t,this.innerHTML=`\n            <section\n                class="${s}"\n                contrast="${o}"\n                style="${e}"\n            >\n                ${i||this.hasBgImage()?this.renderBg():""}\n                <div class="cb-inner ${n}">\n                    ${r}\n                </div>\n            </section>`}hasBgImage(){const{background_mobile:e,background_desktop:t,background_retina:i}=this.props;return!!e||!!t||!!i}renderBg(){const{background_color:e=""}=this.props;return`<div class="cb-bg-color ${e||""}">\n        </div>${this.hasBgImage()?'<div class="cb-bg-img"></div>':""}`}}customElements.get("nb-container")||customElements.define("nb-container",ve);class ye extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.checkbox=null}static get observedAttributes(){return["disabled","checked"]}connectedCallback(){this.props=ie(this.attributes),this.render()}render(){const{content:e,icon:t="",color:i="",background_image:s="",filter_label_AA:n="filter",rounded:r="true",checked:o="false",disabled:a="false",id:l}=this.props,c=(this.slot?this.slot:e).replace(/(^\s+)|(\s+$)/gm,"");const d="true"===o?"checked":"",u="true"===a?"disabled":"",h="chip-checkbox-"+(l||function(e){var t,i=0;if(!e)return i;for(t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return"id-"+i}(c));this.innerHTML=`\n            <input type='checkbox' name='options' id='${h}' aria-label='${c} ${n}' ${d} ${u}>\n            <label style='' for='${h}'>\n                ${t&&`<nb-icon icon='${t}'></nb-icon>\n                `}\n                ${i&&`<div class='chip-color' style='background:${i}'></div>\n                `}\n                ${s&&`<div class='chip-image ${"true"===r?"rounded":""}' style='background-image:url("${s}")'></div>\n                `}\n                <span class="t-2xs-700" aria-hidden="true" phantom="${c}">${c}</span>\n            </label>\n        `,this.checkbox=this.getElementsByTagName("input")[0]}attributeChangedCallback(e,t,i){this.checkbox&&("disabled"===e?this.checkbox.disabled="true"===i:"checked"===e&&(this.checkbox.checked="true"===i))}}function ke(e,t){const i=e.parentNode;if(i===document.getElementsByTagName("body")[0])return;const s=i.children;for(const i of s)i!==e&&(t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden"));ke(i,t)}function we(e,t,i){t.contains(e.target)?t.lastFocused=e.target:t.lastFocused===t.firstFocusable?i?t.lastFocusable.focus():t.firstFocusable.focus():i?t.firstFocusable.focus():t.lastFocusable.focus()}function Ee(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex="0"]');e.firstFocusable=t[0],e.lastFocusable=t[t.length-1],e.lastFocused=e.firstFocusable}customElements.get("nb-chip")||customElements.define("nb-chip",ye);class Ce extends HTMLElement{constructor(){super(),this.isOpen=!1,this.selected=null,this.buttonElement=null,this.onClickOutside=this.onClickOutside.bind(this)}connectedCallback(){this.props=ie(this.attributes),this.classList.add("nb-dropdown"),this.render()}render(){this.buttonElement=null;const{label:e="",aa_description:t}=this.props;let{options:i,element_id:s,element_name:n}=this.props;i=i.map((e=>{const t={...e};return t.checked=t.checked||t.selected,t})),this.unbindEvent(),this.innerHTML=`\n            <button\n                class='nb-dropdown__button'\n                aria-haspopup="listbox"\n                aria-expanded="${this.isOpen}"\n                aria-label="${e} ${i&&this.renderSelected()}"\n                ${""!==t?`aria-description="${t}"`:""}>\n                    <span class="nb-dropdown__button__label t-xs-700-caps-sl">${e}</span>\n                    <span class="nb-dropdown__button__value t-xs-500-sl"\n                    ${s?`name="${s}"`:""}\n                    value="${i&&this.renderSelected()}">\n                    </span>\n                </button>\n            <div class="nb-dropdown__menu" ${n?`id="${n}"`:""}>\n                <div role="listbox">\n                    ${i&&i.length>0&&this.renderOptions()}\n                </div>\n            </div>\n        `,this.buttonElement=this.querySelector(".nb-dropdown__button"),this.buttonElementValue=this.querySelector(".nb-dropdown__button__value"),this.dropdownMenu=this.querySelector(".nb-dropdown__menu > div"),this.selectedOption=this.querySelector("button[aria-selected=true]"),this.selected||(this.selected=i[0]),Ee(this.dropdownMenu),this.bindEvent()}renderOptions(){const{label:e,aa_listbox_description:t,aa_select_description:i,icon_option:s,options:n}=this.props;return n.map((n=>{var r;return`<button\n                    class="${h.is.mobile?"t-sm-400-sl":"t-xs-500-sl"}"\n                    role="option"\n                    aria-label='${e+" "+n.label}'\n                    value='${null!==(r=n.id)&&void 0!==r?r:n.label}'\n                    aria-selected='${n.checked}'\n                    ${n.link?`data-link='${n.link}'`:""}\n                    ${n.checked?void 0!==t&&`aria-description="${t}"`:void 0!==i&&`aria-description="${i}"`}>\n                  ${s&&`<nb-icon icon='${s}'></nb-icon>`} ${n.label}\n                </button>`})).join("")}renderSelected(){const e=this.props.options.find((e=>!0===e.checked||!0===e.selected));return`${e&&e.label||this.props.options[0].label}`}bindEvent(){this.boundHandleClick=this.handleClick.bind(this),this.boundHandleLabelClick=this.handleLabelClick.bind(this),this.boundHandleMobileClose=this.handleMobileClose.bind(this),this.boundFocus=this.focus.bind(this),this.boundFocusin=this.focusin.bind(this),this.boundKeyNav=this.keyNav.bind(this),this.buttonElement.addEventListener("click",this.boundHandleClick),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.addEventListener("click",this.boundHandleLabelClick)})),this.dropdownMenu.addEventListener("click",this.boundHandleMobileClose),window.addEventListener("click",this.onClickOutside)}unbindEvent(){this.buttonElement&&(this.buttonElement.removeEventListener("click",this.boundHandleClick),this.querySelectorAll(".nb-dropdown__menu button").forEach((e=>{e.removeEventListener("click",this.boundHandleLabelClick)})),this.dropdownMenu.removeEventListener("click",this.boundHandleMobileClose),window.removeEventListener("click",this.onClickOutside),document.removeEventListener(r,this.boundKeyNav))}handleClick(){this.toogleDropdown(!this.isOpen)}handleMobileClose(){this.toogleDropdown(!1)}onClickOutside(e){!this.isOpen||e.target.classList.contains("nb-dropdown__button")||e.target.classList.contains("nb-dropdown__button__label")||e.target.classList.contains("nb-dropdown__button__value")||this.toogleDropdown(!1)}handleLabelClick(e){this.isOpen=!1,this.selectedOption&&this.selectedOption.setAttribute("aria-selected","false"),this.selectedOption=e.target,this.selectedOption.setAttribute("aria-selected","true"),this.props.options=this.props.options.map((e=>({...e,checked:!1}))),this.selected=this.props.options.find((e=>e.label===this.selectedOption.value)),this.selected.checked=!0,e.target.closest(".nb-dropdown").classList.add("nb-dropdown--is-filled"),this.reRender(),z({eventName:a,args:{options:this.props.options,selected:this.selected},element:this})}reRender(){const{label:e,aa_listbox_description:t,aa_select_description:i}=this.props;this.buttonElementValue.setAttribute("value",this.selectedOption.value),this.buttonElement.setAttribute("aria-label",e+" "+this.renderSelected()),this.dropdownMenu.querySelectorAll("button").forEach((e=>{e.setAttribute("aria-description",i)})),this.selectedOption.setAttribute("aria-description",t)}setSelected(e,t=!1){const i=this.props.options.find((t=>t.value===e));i&&(this.selected.checked=!1,this.selected=i,this.selected.checked=!0),t&&z({eventName:a,args:{options:this.props.options,selected:this.selected},element:this})}toogleDropdown(e){e?this.open():this.close(),this.isOpen=!this.isOpen,this.switchAriaModal(),this.buttonElement.setAttribute("aria-expanded",this.isOpen)}switchAriaModal(){this.dropdownMenu.setAttribute("aria-modal",this.isOpen),ke(this.dropdownMenu,this.isOpen)}open(){this.dropdownMenu.addEventListener("transitionend",this.boundFocus),document.addEventListener("focusin",this.boundFocusin),document.addEventListener(r,this.boundKeyNav),this.buttonElement.classList.add("isOpen"),this.openingSource=document.activeElement}close(){this.dropdownMenu.addEventListener("transitionend",this.boundFocus),document.removeEventListener("focusin",this.boundFocusin),document.removeEventListener(r,this.boundKeyNav),this.buttonElement.classList.remove("isOpen"),this.buttonElement.setAttribute("aria-expanded",!1)}focus(){this.dropdownMenu.removeEventListener("transitionend",this.boundFocus),this.isOpen?(this.selectedOption.focus(),this.dropdownMenu.lastFocused=this.selectedOption):this.buttonElement.focus()}focusin(e){we(e,this.dropdownMenu,!1)}keyNav(e){switch(e.key){case"Escape":this.toogleDropdown(!1);break;case"ArrowUp":e.preventDefault(),this.prevOption();break;case"ArrowDown":e.preventDefault(),this.nextOption();break;case"Home":case"PageUp":e.preventDefault(),this.firstOption();break;case"End":case"PageDown":e.preventDefault(),this.lastOption()}}prevOption(){if(this.dropdownMenu.lastFocused!==this.dropdownMenu.firstFocusable){const e=this.dropdownMenu.lastFocused.previousElementSibling;e.focus(),this.dropdownMenu.lastFocused=e}}nextOption(){if(this.dropdownMenu.lastFocused!==this.dropdownMenu.lastFocusable){const e=this.dropdownMenu.lastFocused.nextElementSibling;e.focus(),this.dropdownMenu.lastFocused=e}}firstOption(){this.dropdownMenu.lastFocused!==this.dropdownMenu.firstFocusable&&(this.dropdownMenu.firstFocusable.focus(),this.dropdownMenu.lastFocused=this.dropdownMenu.firstFocusable)}lastOption(){this.dropdownMenu.lastFocused!==this.dropdownMenu.lastFocusable&&(this.dropdownMenu.lastFocusable.focus(),this.dropdownMenu.lastFocused=this.dropdownMenu.lastFocusable)}disconnectedCallback(){this.unbindEvent()}}customElements.get("nb-dropdown")||customElements.define("nb-dropdown",Ce);class Se extends ge{constructor(e,t,i,s,n){super(e),this.node=e,this.data=t,this.currency=i,this.range=s,this.position=n}async runTrack(){const e=this.node.closest("[tracking_no_impression]")?.getAttribute("tracking_no_impression")||!1,t=this.node.closest("[tracking_position]")?.getAttribute("tracking_position")||0,i=this.node.closest("[tracking_list]")?.getAttribute("tracking_list")||"";"true"!==e&&await Q(t,i,this.data.id)}async getPLPCategory(e){return(await window.getPLPData()).data.configuration.eCommerceData.categories.find((t=>t.id===e))}async getCategoriesWithPlpData(e){const t="/machineTechno/",i=[...e.cupSizes||[],...e.flavors||[],...e.ranges||[],...e.technologies||[]];return(await Promise.all(i.map((async e=>{const i=await this.getPLPCategory(e);return!i&&(e=>-1!==e.indexOf(t))(e)?(e=>e.substr(e.indexOf(t)+15))(e):i.name})))).join("|")}async getCategories(e){return e?window.getPLPData?this.getCategoriesWithPlpData(e):Promise.all(e.supercategories.map((e=>window.napi.catalog().getCategory(e)))).then((e=>{const t=[];for(const i of e){const e=i.code;if(!e)return;(~e.indexOf("-cupSize-")||~e.indexOf("-range-")||~e.indexOf("capsule-aromatic-")||~e.indexOf("machine-keyFeature-")||~e.indexOf("machine-color-")||~e.indexOf("accessory-collection-")||~e.indexOf("accessory-hero-month"))&&t.push(i.name.toLowerCase())}return t.join("|")})):""}buildGTMProductObject(e,t){let i;"capsule"===e.type?i="capsules":"accessory"===e.type?i="accessories":"machine"===e.type&&(i="machines");let s=null;e.technologies&&(s=e.technologies.map((e=>function(e=""){return e[0].toUpperCase()+e.slice(1)}(e.split("/")[2]))).join("|||"));let n="";null!=e.productSelections&&(n=e.productSelections.join("|"));const r={brand:"Nespresso",category:i,dimension43:"false",dimension44:"false",dimension53:e.legacyId,dimension54:p(e.name)[0].textContent,dimension55:t,dimension56:s,dimension57:this.isBundled(e)?"bundled":"single",dimension130:n,id:e.internationalId,name:p(e.internationalName)[0].textContent,price:e.price};return this.range&&(r.list=this.range),this.position&&(r.position=parseInt(this.position)),r}isBundled(e){let t=1===e.salesMultiple&&e.unitQuantity>1;return e.bundled?t=e.bundled:e.salesMultiple>1&&1===e.unitQuantity&&(t=!1),t}}class $e extends HTMLElement{connectedCallback(){this.sku=(this.getAttribute("sku")||"").trim(),this.range=this.getAttribute("range"),this.position=this.getAttribute("position"),this.longSku=(this.getAttribute("longSku")||"").trim(),this.buttonSize=this.getAttribute("buttonSize")||"small",this.rendererName=this.getAttribute("rendererName")||"default",this.elementID=`u-product-${""!==this.range?this.range.replace(/(\s|\W)/g,"")+"-":""}${this.position}-${this.sku}-${this.longSku.replace(/(\s|\W)/g,"")}-${this.rendererName}`,this.render(),this.isWindowNapiActive()&&(window.napi.getConfig().then((()=>{this.pushButton()})).catch((e=>console.error(e))),this.tracking().then((()=>{})).catch((e=>console.error(e))))}render(){this.innerHTML=`<div class="cb-AddToCart" id="${this.elementID}">\n                <button class='AddToBagButtonLarge'>\n                    <span class='AddToBagButtonLarge__label'>+</span>\n                </button>\n            </div>`}isWindowNapiActive(){return!!window.napi}pushButton(){if(!document.getElementById(this.elementID))return;const e=this.buttonSize;window.ui=window.ui||[],window.ui.push({id:this.elementID,module:"AddToBagButton",configuration:{props:{productId:this.longSku,buttonSize:e}},ecommerceData:{activated:!0}})}async tracking(){if(!this.isWindowNapiActive())return new Promise.resolve;!function(e,t,i,s,n){const r=new Se(e,t,i,s,n)}(this,await this.getProductData(),window[window.config.padl.namespace].dataLayer.app.app.currency,this.range,this.position)}getSkuKey(e){return-1!==e.indexOf("prod/")?"id":"legacyId"}async getProductData(){let e=null;if(null!=window.getPLPData&&(e=await window.getPLPData()),e){const t=[this.getSkuKey(this.sku),"internationalId","id","legacyId"];let i=0,s=null;for(;!s&&i<t.length-1;){const n=t[i];s=e.data.configuration.eCommerceData.products.find((e=>e[n]===this.sku)),i++}return s}if(this.isWindowNapiActive())return await A(this.longSku);console.error("Error: napi is not found.")}}customElements.get("nb-add-to-cart")||customElements.define("nb-add-to-cart",$e);const Le=e=>[...e.querySelectorAll("[data-ref]")].reduce(xe,{}),xe=(e,t)=>{const{ref:i}=t.dataset,s=i.match(/(\w+)\[(.+)\]/);return null!==s?Pe(e,t,s):{...e,[t.dataset.ref]:t}},Pe=(e,t,[,i,s])=>(void 0===e[i]&&(e[i]=[]),e[i][s]=t,e),Ae=(e="product",t=160)=>{const i=[];return e&&i.push(`impolicy=${e}`),t&&i.push(`imwidth=${t}`),`?${i.join("&")}`};class Ie extends HTMLElement{constructor(){super(),this.classList.add("nb-bubble")}static get observedAttributes(){return["state"]}attributeChangedCallback(e){"state"===e&&this.setState()}connectedCallback(){this.props=ie(this.attributes),this.render(),this.refs=Le(this),this.initLazyLoad()}initLazyLoad(){let{src:e="",src_retina:t=""}=this.props.visual;const{visual:i}=this.refs;""===t&&(t=e),t+=((e="medium",t="375",i="1024",s="1920",n="3840")=>h.is.mobile?Ae(e,t):h.is.tablet?Ae(e,i):h.is.desktop?Ae(e,s):Ae(e,n))("small","144","160","80","160"),t+="&imdensity=1",i&&t&&g(i,"src",`${t}`,t)}render(){const{label:e,link:t,state:i,a11y_scrollto:s="Scroll to"}=this.props,{linkNoHash:n,linkHash:r}=m(t);this.innerHTML=`\n            <a href="${r}" data-href="${n}" aria-label='${s} ${e}'>\n                ${this.renderVisual()}\n            </a>\n            ${this.renderLabel()}\n        `,this.link=this.querySelector("a"),this.label=this.querySelector("span"),i&&this.setAttribute("state",i),this.setTheme()}setState(){"selected"===this.getAttribute("state")?(this.link.setAttribute("aria-selected","true"),this.label.classList.add("t-xs-700-sl")):(this.link.removeAttribute("aria-selected"),this.label.classList.remove("t-xs-700-sl"))}setTheme(){const{theme:e}=this.props;e&&""!==e&&this.style.setProperty("--placeholder-background",e)}renderVisual(){let{src:e="",src_retina:t=""}=this.props.visual;return""===e&&""===t?"":'<img src="" alt="" aria-hidden="true" data-ref="visual"/>'}renderLabel(){const{label:e}=this.props;if(e)return`<span class="t-xs-500-sl">${e}</span>`}}customElements.get("nb-bubble")||customElements.define("nb-bubble",Ie);const Oe="slider_natural_chips";class Te extends HTMLElement{constructor(){super(),this.boundReinitSlider=this.reinitSlider.bind(this),this.boundLinkClick=this.linkClick.bind(this)}connectedCallback(){this.props=ie(this.attributes),this.addEventListener(o,this.boundReinitSlider),this.render(),this.dropdownButtons=this.querySelectorAll(".nb-dropdown__menu button"),this.dropdownButtons&&this.dropdownButtons.forEach((e=>{e.addEventListener("click",this.boundLinkClick)}))}render(){const{navigation:e=[],navigation_bubbles:t=""}=this.props;this.classList.add("nb-plp-sticky-bar"),this.innerHTML=`<div class='cb-restrict'>\n            ${this.renderLinksSelect(e)}\n            ${this.renderChipsSlider(t)}\n        </div>`,this.dropdown=this.querySelector("nb-dropdown"),this.navigationBubble=this.querySelector("nb-navigation-bubbles"),this.setAttribute("aria-hidden","true")}renderLinksSelect(e){if(h.is.mobile||!e||e.length<=1)return"";const t=e.map((e=>(e.checked=e.selected,e)));return`\n            <nb-dropdown\n                data='${f({icon_option:"16/symbol/check",options:t})}'\n            ></nb-dropdown>\n        `}renderChipsSlider(e){const{a11y_slider_previous_button:t="",a11y_slider_next_button:i=""}=this.props;return`<nb-navigation-bubbles\n                slider_id='${Oe}'\n                a11y_slider_previous_button="${t}"\n                a11y_slider_next_button="${i}"\n                sticky='true' data='${v(e)}'\n                selected_nav_link_label="${this.props.selected_nav_link_label||""}"></nb-navigation-bubbles>`}forceSliderWidth(){if(this.dropdown){const e=this.dropdown.offsetWidth,t=this.querySelector(".cb-restrict").offsetWidth-e;this.navigationBubble.style.setProperty("width",t/16+"rem")}}reinitSlider(e){const{id:t}=q(e);t===Oe&&(this.forceSliderWidth(),e.target.initSlider())}linkClick(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-link");t&&(window.location.href=t);const i=e.currentTarget.getAttribute("value");H({eventAction:"PLP Content Tab",eventLabel:i})}disconnectedCallback(){this.removeEventListener(o,this.boundReinitSlider),this.dropdownButtons&&this.dropdownButtons.forEach((e=>{e.removeEventListener("click",this.boundLinkClick)}))}}customElements.get("nb-plp-sticky-bar")||customElements.define("nb-plp-sticky-bar",Te);
/*!
 * swiped-events.js - v@version@
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */
const Ne=(e,t,i=void 0)=>{if(e.nwcSwipeEvents)return;e.nwcSwipeEvents=!0,t.addEventListener("touchstart",(function(e){if("true"===e.target.getAttribute("data-swipe-ignore"))return;l=e.target,function(e){if(void 0===i||!i.contains(e))return;c=[],d=[];for(;e!==i;)c.push(e.scrollTop),d.push(e.scrollLeft),e=e.parentNode}(l),a=Date.now(),s=e.touches[0].clientX,n=e.touches[0].clientY,r=0,o=0}),!1),t.addEventListener("touchmove",(function(e){if(!s||!n)return;let t=e.touches[0].clientX,i=e.touches[0].clientY;r=s-t,o=n-i}),!1),t.addEventListener("touchend",(function(t){if(l!==t.target)return;const i=.25*e.innerHeight,c=.5*e.innerWidth;let d=parseInt(p(l,"data-swipe-threshold",i),10),h=parseInt(p(l,"data-swipe-threshold",c),10),b=parseInt(p(l,"data-swipe-timeout","500"),10),m=Date.now()-a,g="",_=t.changedTouches||t.touches||[];Math.abs(r)>Math.abs(o)?Math.abs(r)>h&&m<b&&(r>0?u("left",t)&&(g="swiped-left"):u("right",t)&&(g="swiped-right")):Math.abs(o)>d&&m<b&&(o>0?u("up",t)&&(g="swiped-up"):u("down",t)&&(g="swiped-down"));if(""!==g){let e={dir:g.replace(/swiped-/,""),touchType:(_[0]||{}).touchType||"direct",xStart:parseInt(s,10),xEnd:parseInt((_[0]||{}).clientX||-1,10),yStart:parseInt(n,10),yEnd:parseInt((_[0]||{}).clientY||-1,10)};l.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:e})),l.dispatchEvent(new CustomEvent(g,{bubbles:!0,cancelable:!0,detail:e}))}s=null,n=null,a=null}),!1);let s=null,n=null,r=null,o=null,a=null,l=null,c=[],d=[];function u(e,t){if(void 0===i)return!0;let s=t.target,n=!0,r=0;for(;s!==i&&n;){if(h(s))switch(e){case"up":n=c[r]===s.scrollHeight-s.clientHeight;break;case"down":n=0===c[r];break;case"left":n=d[r]===s.scrollWidth-s.clientWidth;break;case"right":n=0===d[r];break;default:n=!0}s=s.parentNode,r++}return n}function h(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function p(e,i,s){for(;e&&e!==t.documentElement;){let t=e.getAttribute(i);if(t)return t;e=e.parentNode}return s}};var Be=e=>{const t=document.createElement("DIV");t.classList.add("nb-overlay"),t.addEventListener("click",(()=>{z({eventName:s,args:{id:e}})})),document.body.appendChild(t),setTimeout((()=>{t.classList.add("fadein")}),1)},Me=()=>{if(!document.getElementsByClassName("nb-overlay").length)return;const e=document.getElementsByClassName("nb-overlay")[0];e.classList.remove("fadein"),setTimeout((()=>{e.remove()}),1200)};const De="isOpen",Fe="scroll-lock";class ze extends HTMLElement{constructor(){super(),this.props={},this.ariaModal=null,this.isVideo=null,this.boundOpen=this.open.bind(this),this.boundClose=this.close.bind(this),this.boundEscapeClose=this.escapeClose.bind(this),this.boundFocus=this.focus.bind(this),this.boundFocusin=this.focusin.bind(this)}connectedCallback(){this.style.display="none",this.props=ie(this.attributes),this.content||this.slot||(this.slot=this.innerHTML),this.id||null==this.props.popin_id||""==this.props.popin_id||(this.id=this.props.popin_id),this.ariaModal=!1,this.isVideo=!1,this.render()}attributeChangedCallback(e,t,i){this.props=ie(this.attributes),"content"===e&&(this.props.content=i)}static get observedAttributes(){return["content"]}disconnectedCallback(){this.hasEvent&&this.unbindEvent()}render(){this.hasEvent&&this.unbindEvent();const{heading:e="",subheading:t="",bgcolor:i="highlight",size:s="M",label_close:n="Close",image:r="",image_alt:o="",variation:a="before",content:l=""}=this.props,c=l||this.slot;if(""===c)return this.bindEvent(),this.classList.remove(De),this.isOpen=!1,!1;this.checkIsVideo(c),this.isVideo?this.setAttribute("size","L"):this.setAttribute("size",s),this.setAttribute("role","dialog"),this.setAttribute("aria-hidden","true"),this.setAttribute("bgcolor",i),this.setAttribute("variation",a),this.innerHTML=`\n            <nb-cta\n                variation="navigation"\n                ${"white"===i?'contrast="highlight"':'contrast="light"'}\n                icon_right="24/symbol/close"\n                label="${n}"></nb-cta>\n            <div class="wrapper">\n                <div class="title">\n                    ${e&&`<h2 class="h-lg-700-caps-sl">${e}</h2>`}\n                </div>\n                ${t&&`<div class="subtitle">\n                            ${t&&`<p class="t-sm-500">${t}</p>`}\n                    </div>`}\n\n                <div class="content" tabindex="-1">\n                    ${r&&`<div class="popin-header-img"><img loading="lazy" src="${r}" alt="${o}" title="${o}" width="300" height="225" /></div>`}\n                    ${c}\n                </div>\n                ${this.renderFooter()}\n            </div>\n            ${this.isVideo&&h.is.mobile?'<div class="swipeOverlay"></div>':""}\n        `,setTimeout((()=>{this.style.display="inherit"}),100),Ee(this),this.buttonElement=this.querySelector("button"),this.bindEvent()}renderFooter(){const{footer:e}=this.props;var t;return!(!(t=e)||"false"===t)?"<footer></footer>":""}checkIsVideo(e){const t=document.createElement("div");t.innerHTML=e,1===t.children.length&&"NB-VIDEO"===t.children[0].tagName&&(this.isVideo=!0,this.setAttribute("video","true"))}addLock(){document.getElementsByTagName("html")[0].classList.add(Fe),Be(this.props.popin_id)}removeLock(){this.parentNode.closest("nb-popin")||document.getElementsByTagName("html")[0].classList.remove(Fe),Me()}switchAriaModal(){this.ariaModal=!this.ariaModal,this.setAttribute("aria-modal",this.ariaModal),ke(this,this.ariaModal)}async open(e){this.addEventListener("transitionend",this.boundFocus),document.addEventListener("focusin",this.boundFocusin),this.openingSource=document.activeElement;const t=q(e);t.id===this.id&&(this.addLock(),this.switchAriaModal(),this.setAttribute("aria-hidden","false"),this.isOpen=!this.isOpen,await new Promise((e=>{setTimeout((()=>{this.classList.add(De),e()}),300)})),z({eventName:"WEB_COMPONENT_POPIN_OPENED",args:t}))}close(e){if(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),this.addEventListener("transitionend",this.boundFocus),document.removeEventListener("focusin",this.boundFocusin),this.removeLock(),this.isVideo){const e=this.closest(".has-open-video");e&&e.classList.remove("has-open-video")}this.switchAriaModal(),this.setAttribute("aria-hidden","true"),this.isOpen=!this.isOpen,this.classList.remove(De),z({eventName:n,args:{id:this.props.popin_id}})}focus(){this.removeEventListener("transitionend",this.boundFocus),this.isOpen?this.buttonElement.focus():this.openingSource.focus()}focusin(e){we(e,this,!0)}escapeClose(e){"Escape"===e.key&&this.isOpen&&this.close(e)}swipeDown(e){this.isOpen&&this.close(e)}swipeOverlayTogglePlayPause(){z({eventName:"WEB_COMPONENT_VIDEO_TOGGLE",args:{id:this.props.popin_id}})}bindEvent(){this.hasEvent=!0,null!=this.buttonElement&&this.buttonElement.addEventListener("click",this.boundClose),window.addEventListener(i,this.boundOpen),window.addEventListener(s,this.boundClose),document.addEventListener(r,this.boundEscapeClose),h.is.mobile&&(Ne(window,document,this),this.boundSwipeDown=this.swipeDown.bind(this),document.addEventListener(l,this.boundSwipeDown),this.isVideo&&(this.swipeOverlay=this.querySelector(".swipeOverlay"),this.boundSwipeOverlayTogglePlayPause=this.swipeOverlayTogglePlayPause.bind(this),this.swipeOverlay.addEventListener("click",this.boundSwipeOverlayTogglePlayPause)))}unbindEvent(){this.hasEvent=!1,null!=this.buttonElement&&this.buttonElement.removeEventListener("click",this.boundClose),window.removeEventListener(i,this.boundOpen),window.removeEventListener(s,this.boundClose),document.removeEventListener(r,this.boundEscapeClose),this.boundSwipeDown&&(document.removeEventListener(l,this.boundSwipeDown),this.boundSwipeDown=null),this.boundSwipeOverlayTogglePlayPause&&(this.swipeOverlay.removeEventListener("click",this.boundSwipeOverlayTogglePlayPause),this.boundSwipeOverlayTogglePlayPause=null)}}customElements.get("nb-popin")||customElements.define("nb-popin",ze);const qe="cat/capsule-range-label",He="cat/machine-range-label",Re="cat/capsule-range-fair-trade",We="cat/capsule-attribute-only-vertuo-next",je="capsule-attribute-organic-eu",Ve="capsule-attribute-rainforest",Qe="capsule-attribute-sustainability",Ue="capsule-attribute-arabica",Ge="cat/capsule-attribute-highlight",Ke="https://www.nespresso.com/shared_res/agility/commons/img/icons/",Ye=Ke+"logo-organic-eu.svg",Je=Ke+"logo-organic-us.svg",Xe=Ke+"logo-organic-ca.svg",Ze=Ke+"logo-organic-br.svg",et=Ke+"logo-organic-jp.svg",tt=Ke+"logo-organic-be.png",it=Ke+"logo-only-vertuo-next.svg",st=Ke+"logo-rainforest.svg",nt=Ke+"logo-sustainability.svg",rt=Ke+"q_grade_certification_arabica.svg",ot=Ke+"design_award_2021.svg",at={fair_trade:Ke+"fairTrade.svg",is_organic:function(){let e=Ye;switch(ce()){case"us":e=Je;break;case"ca":e=Xe;break;case"br":e=Ze;break;case"jp":e=et;break;case"be":e=tt}return e}(),only_vertuo_next:it,is_q_certified_arabica:rt,is_rainforest:st,is_sustainable:nt,is_design_award_2021:ot};function lt(e){return e.find((e=>function(e){return gt(We).test(e.id)}(e)))}function ct(e){return e.find((e=>function(e){return gt(je).test(e.id)}(e)))}function dt(e){return e.find((e=>function(e){return gt(Ve).test(e.id)}(e)))}function ut(e){return e.find((e=>function(e){return gt(Qe).test(e.id)}(e)))}function ht(e){return e.find((e=>function(e){return gt(Ue).test(e.id)}(e)))}function pt(e){return e.filter((e=>function(e){return gt(qe).test(e.id)||gt(He).test(e.id)}(e)))}function bt(e){return e.find((e=>function(e){return gt(Ge).test(e.id)}(e)))}function mt(e){return e.find((e=>function(e){return gt(Re).test(e.id)}(e)))}function gt(e){return new RegExp(e.replace(/\//g,"\\/"))}function _t(e){let t=!1;return window.PLP_HIDE_CATEGORIES?.length&&window.PLP_HIDE_CATEGORIES.findIndex((t=>e.indexOf(t)>=0))>=0&&(t=!0),window.PLP_ONLY_SHOW_CATEGORIES?.length&&(t=!0,window.PLP_ONLY_SHOW_CATEGORIES.findIndex((t=>e.indexOf(t)>=0))>=0&&(t=!1)),t}class ft extends HTMLElement{constructor(){super(),this.props={}}connectedCallback(){this.props=ie(this.attributes),this.render()}render(){let e,t,i,s,n,r,o,a,l,c,d,u,{direction:h="row",logos:p}=this.props;this.classList.add(""+("column"===h?"direction-column":"direction-"+h));let b=[];null==p?(e=this.props?.fair_trade,t=this.props?.alt_fair_trade,i=this.props?.is_organic,s=this.props?.alt_organic,n=this.props?.only_vertuo_next,r=this.props?.alt_vertuo_next,o=this.props?.is_rainforest,a=this.props?.alt_rainforest,l=this.props?.is_sustainable,c=this.props?.alt_sustainable,d=this.props?.is_q_certified_arabica,u=this.props?.alt_q_certification_arabica):void 0===p.length?(e=p?.fair_trade,t=p?.alt_fair_trade,i=p?.is_organic,s=p?.alt_organic,n=p?.only_vertuo_next,r=p?.alt_vertuo_next,o=p?.is_rainforest,a=p?.alt_rainforest,l=p?.is_sustainable,c=p?.alt_sustainable,d=p?.is_q_certified_arabica,u=p?.alt_q_certification_arabica):p.length&&(b=[...p]),[[e,"fair_trade",t,b],[i,"is_organic",s,b],[n,"only_vertuo_next",r,b],[o,"is_rainforest",a,b],[l,"is_sustainable",c,b],[d,"is_q_certified_arabica",u,b]].map((e=>this.appendLogo.apply(this,e))),this.innerHTML=b.map((e=>`<img src="${at[e.name]}" alt="${e.alt}" loading="lazy">`)).join("")}appendLogo(e,t,i,s){e&&!this.hasLogo(s,t)&&s.push({name:t,alt:i})}hasLogo(e,t){return e.some((e=>e.name===t))}}customElements.get("nb-card-logos")||customElements.define("nb-card-logos",ft);class vt extends HTMLElement{constructor(){super(),this.props={},this.labels=[]}connectedCallback(){this.props=ie(this.attributes),this.render()}render(){const{labels:e=[],direction:t="column"}=this.props;if(this.classList.add(""+("row"===t?"direction-row":"direction-"+t)),0===e.length)return"";this.labels=e,this.innerHTML=`${this.renderLabels()}`}renderLabels(){return this.labels.map((e=>{const{name:t="",bgColor:i="",color:s=""}=e;return`<mark class="t-3xs-500"\n                            ${i&&s&&`style="background: ${i}; color: ${s}"`}>\n                            <span aria-hidden="true">${t}</span>\n                            <span class="sr-only">${t}</span>\n                        </mark>`})).join("")}}customElements.get("nb-card-labels")||customElements.define("nb-card-labels",vt);const yt="pn-ProductContainer",kt="pnAdvancerRight",wt="pnAdvancerLeft",Et="#000000";class Ct{constructor(e,t={}){return this.boundNextClick=this.onNextClick.bind(this),this.boundPrevClick=this.onPrevClick.bind(this),this.boundLinkClick=this.onLinkClick.bind(this),this.boundTouchEnd=this.onTouchEnd.bind(this),this.disableAutoScroll="true"===t.disableAutoScroll||!1,this._entriesBounds=null,new Promise((i=>{this._element=e,this._slides=[].slice.call(e.children),this._options=Object.assign({},{id:"uuid",last_known_scroll_position:0,ticking:!1,navBarTravelDirection:"",navBarTravelling:!1,navBarTravelDistance:150,scrollAmount:220},t),this.buildIHM(),i(this),setTimeout((()=>{this.setOverflowAttribute(),this.initializeIndicatorPosition()}),0)}))}get element(){return this._element}buildIHM(){this._root=this.createElement("div","pn-ProductNav"),this._container=this.createElement("div","pn-ProductNavContents"),this._pnIndicator=null,this._containerSlidesContent=null,this.hasContainer()&&(this._containerSlidesContent=this.createElement("div",yt)),this.wrapItems(),this._root.appendChild(this._container),this._containerSlidesContent&&this._element.appendChild(this._containerSlidesContent),this._element.insertBefore(this._root,this._element.childNodes[2]),this.createIndicator()}hasContainer(){return!!document.querySelector(".slider-container")}wrapItems(){const e=[];this._slides.map((t=>{const i=b(5);if(this.hasContainer()&&t.classList.contains("slider-container")&&(t.children&&t.children.length&&[...t.children].forEach(((t,i)=>{0!==i&&(t.style.display="none"),t.id=e[i],this._containerSlidesContent.appendChild(t)})),t.remove()),!t.classList.contains("pn-Advancer")){const s=this.createElement("div","pn-ProductNavLinkWrapper");s.appendChild(t),s.setAttribute("data-inner-content-id",i),e.push(i),this._container.appendChild(s)}}))}createElement(e,t){let i=document.createElement(e);return i.setAttribute("class",t),i}createIndicator(){this.elements=[],this._pnIndicator=this.createElement("div","pn-ProductNavIndicator"),this._container.appendChild(this._pnIndicator),this.elements=Array.from(this._container.querySelectorAll("nb-link a")),this.elements.forEach((e=>{e.addEventListener("click",this.boundLinkClick)}));const e=document.getElementById(`${wt}-${this._options.id}`);e&&e.addEventListener("click",this.boundPrevClick);const t=document.getElementById(`${kt}-${this._options.id}`);t&&t.addEventListener("click",this.boundNextClick),this._root&&this._container.addEventListener("touchend",this.boundTouchEnd)}onLinkClick(e){this.goToElement(e.currentTarget)}goToSlide(e){this.goToElement(this._slides[e])}showContent(e){const t=document.querySelector(`.${yt}`);t.children&&[...t.children].forEach((e=>e.style.display="none")),document.getElementById(e).style.display="block"}goToElement(e){if(this.hasContainer()){const t=e.closest("[data-inner-content-id]").getAttribute("data-inner-content-id");this.showContent(t)}if(this.deselectAllLinkBut(e),e.setAttribute("aria-selected","true"),!e||!this._entriesBounds)return;let t=0;for(const i of this._entriesBounds){if(i.target.getAttribute("data-href")===e.getAttribute("data-href"))break;t=t+i.boundingClientRect.width+10}this.disableAutoScroll||this._root.scroll({left:t,behavior:"smooth"})}deselectAllLinkBut(e){this.elements.map((t=>{t!==e&&t.setAttribute("aria-selected","false")}))}sideScroll(e,t,i,s,n){this.setOverflowAttribute();let r=0,o=setInterval((function(){"left"===t?e.scrollLeft-=n:e.scrollLeft+=n,r+=n,r>=s&&window.clearInterval(o)}),i);return{slideTimer:o}}onPrevClick(){this.sideScroll(this._root,"left",25,this._options.scrollAmount,10),setTimeout((()=>{this.setOverflowAttribute()}),300)}onNextClick(){this.sideScroll(this._root,"right",25,this._options.scrollAmount,10),setTimeout((()=>{this.setOverflowAttribute()}),300)}onTouchEnd(){this.setOverflowAttribute()}initializeIndicatorPosition(){const e=this._root.querySelector('[aria-selected="true"]');e&&this.moveIndicator(e,Et)}determineOverflow(e,t){let i=t.getBoundingClientRect(),s=Math.floor(i.right),n=Math.floor(i.left),r=e.getBoundingClientRect(),o=Math.floor(r.right),a=Math.floor(r.left);return n>a&&s<o?"both":a<n?"left":o>s?"right":"none"}moveIndicator(e,t){if(!this._pnIndicator)return;let i=e.getBoundingClientRect(),s=this._container.getBoundingClientRect().left,n=i.left-s;this._pnIndicator.style.transform="translateX("+(n+this._container.scrollLeft+10)+"px) scaleX("+.01*(i.width-20)+")",this._root.scrollLeft=Math.floor(n+this._container.getBoundingClientRect().left/2),t&&(this._pnIndicator.style.backgroundColor=t)}onResize(){this.setOverflowAttribute(),this.initializeIndicatorPosition()}clearListeners(){this.elements.forEach((e=>{e.removeEventListener("click",this.boundLinkClick)}));const e=document.getElementById(`${wt}-${this._options.id}`);e&&e.removeEventListener("click",this.boundPrevClick);const t=document.getElementById(`${kt}-${this._options.id}`);t&&t.removeEventListener("click",this.boundNextClick)}kill(){this.clearListeners()}setOverflowAttribute(){this._element.setAttribute("data-overflowing",this.determineOverflow(this._container,this._root)),this.observe()}observe(){if(!("IntersectionObserver"in window))return!1;this._entriesBounds=[];const e=new IntersectionObserver((t=>{for(const e of t)this._entriesBounds.push({target:e.target,intersection:e.boundingClientRect.right<=window.innerWidth-10&&e.boundingClientRect.left>=10,boundingClientRect:e.boundingClientRect});e.disconnect()}),{root:this._container});this._slides.map((t=>e.observe(t)))}isInViewport(e){if(!this._entriesBounds)return!1;return this._entriesBounds.find((t=>e===t.target)).intersection}}class St extends HTMLElement{constructor(){super(),this.slot=this.innerHTML,this.navBarTravelling=!0,this.disableAutoScroll=!1,this.navBarTravelDirection="",this.navBarTravelDistance=200,this.randomId=null,this.sliderMenu=null,this.boundOnResize=this.onResize.bind(this),this.onLoad=this.onLoad.bind(this),this.debouncedOnResize=function(e,t){let i;return t=t||100,function(s){i&&clearTimeout(i),i=setTimeout(e,t,s)}}(this.boundOnResize,250)}static get observedAttributes(){return["navBarTravelling","navBarTravelDirection","navBarTravelDistance"]}render(){const e="true"===this.getAttribute("navigation")||"",t=this.getAttribute("a11y_slider_previous_button")||"",i=this.getAttribute("a11y_slider_next_button")||"";this.innerHTML=`\n            <div id="pnProductNav-${this.randomId}" class="pn-ProductNavWrapper ${this.randomId}">\n                ${e&&`<nb-cta id="pnAdvancerLeft-${this.randomId}"\n                        class="pn-Advancer pn-AdvancerLeft"\n                        variation="navigation"\n                        contrast="highlight"\n                        size="32"\n                        icon_right="24/symbol/chevron-left"\n                        label="${t}"></nb-cta>`}\n                ${this.slot}\n                ${e&&`<nb-cta id="pnAdvancerRight-${this.randomId}"\n                        class="pn-Advancer pn-AdvancerRight"\n                        variation="navigation"\n                        contrast="highlight"\n                        size="32"\n                        icon_right="24/symbol/chevron-right"\n                        label="${i}"></nb-cta>`}\n                <span id="pnIndicator-${this.randomId}"\n                    class="pn-ProductNavIndicator">\n                </span>\n            </div>\n\n            `,this.loadSwiper()}connectedCallback(){this.randomId=this.getAttribute("testId")?this.getAttribute("testId"):`swiperMenu_${b(5)}`,this.navBarTravelling=this.getAttribute("navBarTravelling")||this.navBarTravelling,this.navBarTravelDirection=this.getAttribute("navBarTravelDirection")||this.navBarTravelDirection,this.navBarTravelDistance=this.getAttribute("navBarTravelDistance")||this.navBarTravelDistance,this.disableAutoScroll=this.getAttribute("disable_auto_scroll")||"",this.render(),window.addEventListener("resize",this.debouncedOnResize)}loadSwiper(){let e=this.navBarTravelDirection,t=this.navBarTravelDistance;this.sliderMenu=new Ct(this.querySelector("."+this.randomId),{id:this.randomId,index:this.index,navBarTravelDirection:e,navBarTravelDistance:t,disableAutoScroll:this.disableAutoScroll}),this.sliderMenu.then((()=>{this.classList.add("is-show"),z({eventName:o,args:{className:this.randomId},element:this})}))}handleClick(){var e;z({eventName:"WEB_COMPONENT_SLIDE_CHANGE"}),e={rootElement:["nb-slider-menu"]},window.gtmDataObject=window.gtmDataObject||[],window.gtmDataObject.push({event:"itemDisplay",eventRaisedBy:"Web component",eventAction:"Click",itemTypes:["products"],...e})}onLoad(){this.sliderMenu.then((e=>e.onLoad()))}onResize(){this.sliderMenu.then((e=>e.onResize()))}onNavigationClick(e){let t="";e.target&&e.target.closest(".link")&&e.target.closest(".link").getAttribute("tracking_label")&&(t=e.target.closest(".link").getAttribute("tracking_label")),H({eventAction:"PLP Content Tab",eventLabel:t})}disconnectedCallback(){window.removeEventListener("resize",this.debouncedOnResize),this.sliderMenu.then((e=>e.kill()))}}customElements.get("nb-slider-menu")||customElements.define("nb-slider-menu",St);class $t extends HTMLElement{constructor(){super(),this.contrast=d,this.defaultPosition=0,this.displayButtons=!0,this.displayNav=!0,this.displayCounter=!1,this.displayGradients=!1,this.itemsPerSlide=1,this.overflow=!0,this.overflowOpacity=.25,this.flexAuto=!1,this.boundPrevClick=this.#a.bind(this),this.boundNextClick=this.#l.bind(this),this.boundNavClick=this.#c.bind(this),this.boundScroll=this.#d.bind(this)}connectedCallback(){this.slot=this.innerHTML,this.props=ie(this.attributes),this.#u(),this.id&&"undefined"!==this.id||(this.id=this.props.testId?this.props.testId:`slider_natural_${b(5)}`),this.#h(),this.loops=0,this.#p().then((()=>{this.initSlider(),this.#b()})).catch((e=>{console.error(e)})).finally((()=>{this.wait&&(clearInterval(this.wait),this.wait=null)}))}#p(){return new Promise(((e,t)=>{this.wait=setInterval((()=>this.carousel.offsetWidth>0?e():(this.loops+=1,50===this.loops?t("Error: slider width is ZERO even after 5s, cannot finish slider init"):void 0)),100)}))}#m(e,t){const i=this.#g(t);var s;void 0!==i&&(this[(s=e,s.match(/[a-z]+|\d+/gi).map(((e,t)=>{let i=e.toLowerCase();return 0!==t&&(i=i.split("").map(((e,t)=>0===t?e.toUpperCase():e)).join``),i})).join``)]=i)}#g(e){return isNaN(e)?"true"===e||"false"!==e&&e:parseFloat(e)}#h(){const{options:e,a11y_labels:t}=this.props;this.container=this.querySelector(".container"),this.wrapper=this.querySelector(".wrapper"),this.carousel=this.querySelector("ul"),this.currentIndex=0,this.a11y_labels=t,h.is.mobile?this.options=e.mobile:h.is.tablet?this.options=e.tablet:this.options=e.desktop;for(const e in this.options)this.#m(e,this.options[e]);this.displayCounter&&(this.displayNav=this.displayButtons=!1),this.overflow&&this.container.classList.add("overflow"),this.buttonsContrast=this.contrast===d?"dark":d,this.setAttribute("contrast",this.contrast),this.#_(),this.#f(),this.#v()}initSlider(){this.slidesElements=this.querySelectorAll("li:not(.safari-fix)"),this.itemNumber=this.slidesElements.length,this.#m("item_width",this.options.item_width),this.#m("items_per_slide",this.options.items_per_slide),"auto"===this.itemsPerSlide&&this.#y(),this.#k(),this.#w(),this.#E(),this.maxSlides=this.itemNumber-this.itemsPerSlide,this.#C(),this.#S(),this.#$(),this.#L(),this.#x(),this.#P(),this.#A(),this.#I(),this.#O(),this.#T(),this.#N(),this.#B()}#u(){this.innerHTML=`<div class='container'><div class='wrapper'><ul class='carousel'>${this.slot}</ul></div></div>`}#C(){!this.displayButtons||this.maxSlides<=0?this.prevButton&&this.nextButton&&(this.prevButton.remove(),this.nextButton.remove()):(this.prevButton||(this.prevButton=this.#M("prev")),this.nextButton||(this.nextButton=this.#M("next")))}#M(e,t=!1){const i=t?this.contrast:this.buttonsContrast,s="prev"===e,n=document.createElement("nb-cta");return n.classList.add(e),y(n,{variation:"navigation",contrast:i,size:"48",icon_right:s?"24/symbol/chevron-left":"24/symbol/chevron-right",label:this.a11y_labels[e]}),t?s?this.counter.prepend(n):this.counter.append(n):s?this.container.prepend(n):this.container.append(n),n}#S(){if(!this.displayNav||0===this.maxSlides)return void(this.nav&&this.nav.remove());this.nav&&this.nav.remove();const e=document.createElement("nav");let t="";for(let e=0;e<=this.maxSlides;e++)t+=this.#D(e);e.innerHTML=`${t}`,this.appendChild(e),this.nav=this.querySelector("nav"),this.navElements=this.querySelectorAll("nav button")}#D(e){return`<button data-item='${e}' aria-label='${this.a11y_labels.nav} ${e}'><span></span></button>`}#$(){this.displayCounter&&0!==this.maxSlides?(this.counter&&this.counter.remove(),this.counter=document.createElement("div"),this.counter.classList.add("counter"),this.counter.classList.add("t-sm-500"),this.counter.setAttribute("aria-hidden","true"),this.counter.innerHTML=`<span class='current'>${this.currentIndex+1}</span>\n        <span>/</span>\n        <span>${this.maxSlides+1}</span>`,this.prevButton=this.#M("prev",!0),this.nextButton=this.#M("next",!0),this.appendChild(this.counter)):this.counter&&this.counter.remove()}#L(){this.displayGradients&&!this.overflow&&(this.gradientsWidth&&this.#F("--gradients-width",this.gradientsWidth,!0),this.gradientsColor&&(this.#F("--gradients-color",this.gradientsColor),this.#F("--gradients-color-transparent",this.gradientsColor+"00")),this.container.classList.add("hasGradients"))}#B(){if(!this.overflow||!(()=>{const e=window.navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(e)})())return;this.safariFix||(this.safariFix=document.createElement("li"),this.safariFix.classList.add("safari-fix"),this.safariFix.setAttribute("aria-hidden",!0),this.carousel.appendChild(this.safariFix));const e=(this.paddingCorrection-this.sliderGap)/16;this.safariFix.style.setProperty("width",e+"rem")}#y(){this.carousel.classList.remove("no-slides");let e=this.itemWidth;void 0!==this.itemWidth&&"auto"!==this.itemWidth||(e=(this.carousel.scrollWidth-this.sliderGap*(this.itemNumber-1))/this.itemNumber),this.itemsPerSlide=Math.ceil(this.carousel.offsetWidth/e)}#P(){if(this.sliderPositions=[],this.maxScroll=this.carousel.scrollWidth-this.carousel.offsetWidth,0===this.slidesElements.length)return;const e=this.slidesElements[0].offsetLeft;this.querySelectorAll("li").forEach((t=>{this.sliderPositions.push(t.offsetLeft-e)}))}#F(e,t,i=!1){this.style.setProperty(e,i?t/16+"rem":t)}#k(){if("auto"===this.itemWidth){const e=(this.container.clientWidth-(this.itemsPerSlide-1)*this.sliderGap)/this.itemsPerSlide;this.#F("--item-width",e,!0)}else this.itemWidth&&this.#F("--item-width",this.itemWidth,!0)}#_(){"auto"===this.slideMinHeight?this.#F("--slide-min-height","auto"):void 0!==this.slideMinHeight&&this.#F("--slide-min-height",this.slideMinHeight,!0)}#f(){(this.sliderGap||0===this.sliderGap)&&this.#F("--slider-gap",this.sliderGap,!0)}#E(){this.flexAuto&&this.carousel.classList.add("flex-auto")}#v(){this.placeholderBackground&&this.#F("--placeholder-background",this.placeholderBackground)}#w(){this.#F("--items-per-slide",this.itemsPerSlide)}#x(){this.maxSlides>0||this.carousel.classList.add("no-slides")}updateSlider(e,t=!1){this.#P(),this.goToSlide(parseInt(e),t)}#O(){this.#z(),this.#q(),this.#H(),this.#R()}#W(){this.#z(),this.#H()}#z(){(this.displayButtons&&!(this.maxSlides<=0)||this.displayCounter)&&(this.prevButton.classList.remove("hide"),this.nextButton.classList.remove("hide"),0===this.currentIndex?this.prevButton.classList.add("hide"):this.currentIndex===this.maxSlides&&this.nextButton.classList.add("hide"))}#q(){!this.displayNav||this.maxSlides<=0||(this.navElements.forEach((e=>{e.classList.remove("active")})),this.navElements[this.currentIndex].classList.add("active"))}#H(){this.displayCounter&&0!==this.maxSlides&&this.displayCounter&&(this.counter.querySelector(".current").textContent=parseInt(this.currentIndex+1))}#R(){if(!this.overflow)return;this.slidesElements.forEach((e=>{e.classList.add("inactive")}));let e=parseInt(this.currentIndex);for(let t=0;t<this.itemsPerSlide;t++)this.slidesElements[e+t]&&this.slidesElements[e+t].classList.remove("inactive")}goToSlide(e,t=!1){void 0!==e&&(this.currentIndex=e),e<this.maxSlides&&this.#O(),this.carousel.scrollTo({left:this.sliderPositions[parseInt(this.currentIndex,10)],behavior:t?"auto":"smooth"})}#N(){0===this.defaultPosition||this.defaultPosition>this.maxSlides+1||this.goToSlide(this.defaultPosition,!0)}#d(){this.isScrolling&&clearTimeout(this.isScrolling),this.#I(),this.isScrolling=setTimeout((()=>{this.#P();const e=Math.round(this.carousel.scrollLeft);let t=this.sliderPositions.indexOf(e);-1===t&&(t=this.sliderPositions.indexOf(e-1)),-1===t&&(t=this.sliderPositions.indexOf(e+1)),e===this.maxScroll&&(t=this.maxSlides),t>=0&&this.#j(t,!0),this.#W()}),100)}#A(){this.overflow&&this.slidesElements.length&&(this.paddingCorrection=parseInt(getComputedStyle(this.carousel).getPropertyValue("padding-left")),this.itemWidthAdjusted=this.slidesElements[0].offsetWidth+this.sliderGap)}#I(){if(!this.overflow)return;const e=this.carousel.scrollLeft;this.slidesElements.forEach(((t,i)=>{let s=t.offsetLeft-this.paddingCorrection+this.itemWidthAdjusted,n=100;e>s?n=0:e>=this.itemWidthAdjusted*i?n=Math.round((s-e)/this.itemWidthAdjusted*100):e<s-(1+this.itemsPerSlide)*this.itemWidthAdjusted?n=0:e<=s-this.itemsPerSlide*this.itemWidthAdjusted&&(n=Math.round(100*(this.itemsPerSlide+1)-(s-e)/this.itemWidthAdjusted*100));const r=n/100;let o=Math.round(100*(r*(1-this.overflowOpacity)+this.overflowOpacity))/100;t.firstElementChild.style.setProperty("opacity",o)}))}#j(e,t=!1){this.slidesElements[e]&&(this.currentIndex=e,t?this.#O():this.goToSlide())}#a(){this.currentIndex>0&&(this.currentIndex=this.currentIndex-1,this.#O()),this.goToSlide()}#l(){this.currentIndex<this.maxSlides&&(this.currentIndex=this.currentIndex+1,this.#O()),this.goToSlide()}#c(e){this.currentIndex=parseInt(e.target.dataset.item),this.#q(),this.#j(this.currentIndex)}#b(){z({eventName:o,args:{id:this.id},element:this})}#T(){this.#V(),this.carousel.addEventListener("scroll",this.boundScroll),this.prevButton&&this.prevButton.addEventListener("click",this.boundPrevClick),this.nextButton&&this.nextButton.addEventListener("click",this.boundNextClick),this.navElements&&this.navElements.forEach((e=>{e.addEventListener("click",this.boundNavClick)}))}#V(){this.carousel.removeEventListener("scroll",this.boundScroll),this.prevButton&&this.prevButton.removeEventListener("click",this.boundPrevClick),this.nextButton&&this.nextButton.removeEventListener("click",this.boundNextClick),this.navElements&&this.navElements.forEach((e=>{e.removeEventListener("click",this.boundNavClick)}))}disconnectedCallback(){this.#V()}}customElements.get("nb-slider-natural")||customElements.define("nb-slider-natural",$t);var Lt=(e=[])=>{e.forEach((e=>{if(e&&e.element)return e.element.addEventListener(e.type,e.listener,e.options)}))},xt=(e=[])=>{e.forEach((e=>{e&&e.element&&e.element.removeEventListener(e.type,e.listener)}))};const Pt=(()=>{const e=({identifier:e="",callback:t,options:i})=>{if(""===e)return{};const s=document.querySelectorAll(e),n=new IntersectionObserver(t,i);for(const e of s)n.observe(e);return{observer:n,targets:s}};return{initialize:t=>{t.map(e)},destroy:()=>{}}})(),At="EVENT_NAVIGATION_SECTION_CHANGE",It="auto",Ot=[.2,.8],Tt=(()=>{let e=null,t=!1;const i=e=>{s(e[0])},s=t=>{if(t.isIntersecting&&!e.isScrolling){let{sectionId:e=""}=t.target.dataset;e=""===e?t.target.getAttribute("data-id"):"",z({eventName:At,args:{sectionId:e}})}};return{initialize:s=>{e=s;const n=[{identifier:"[data-id]",callback:i,options:{threshold:Ot,rootMargin:"-160px 0px 0px 0px"}}],r=()=>{t||(t=!0,Pt.initialize(n))};setTimeout((()=>{r()}),2e3),window.addEventListener("WEB_COMPONENT_PROJECTS_LOADED",(()=>{r()}))},destroy:()=>{}}})();class Nt{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}class Bt extends HTMLElement{constructor(){super(),this.isMobile=window.innerWidth<t,this.isScrolling=!1}connectedCallback(){this.props=ie(this.attributes),this.classList.add("nb-navigation-bubbles"),this.sticky=this.isSticky(),this.type=this.sticky?"Chip":"Bubble",this.isCenteredItems=this.props.is_centered_items?"true":"false",this.setAttribute("type",this.type.toLowerCase()),this.setAttribute("is-centered-items",this.isCenteredItems),this.init()}isSticky(){if(!this.props)return!1;const{sticky:e="false"}=this.props;return"true"===e}init(){this.render(),this.refs=Le(this),this.slider=this.querySelector("nb-slider-natural"),Tt.initialize(this),this.eventsListeners=(e=>{const t=t=>{e.geometry=e.getGeometry();const s=t.querySelectorAll("a");for(const[e,t]of s.entries())t.addEventListener("click",i.bind(void 0,e))},i=(t,i)=>{i.preventDefault();const s=i.target.closest("a");if(s){z({eventName:At,args:{sectionId:s.getAttribute("data-href"),index:t}}),e.scroll&&e.scroll(s,t),window.location.hash=s.getAttribute("data-href");let i="",n="",r="";e.closest("nb-plp-sticky-bar")?(r=s.querySelector("nb-chip label span").textContent,n=e.props.selected_nav_link_label||""):(n=e.props.selected_nav_link_label||"",r=s.nextElementSibling.textContent?s.nextElementSibling.textContent:s.getAttribute("aria-label")),i=n?`${n} : ${r}`:`${r}`,e.track(i)}},s=t=>{const{sectionId:i,index:s}=q(t);e.updateBubbles&&e.updateBubbles(i),e.updateChips&&e.updateChips(i),e.updateSlider&&e.updateSlider(i,s)};return{createListeners:i=>{const n=[];return i&&n.push({element:e,type:o,listener:t.bind(void 0,i),options:{once:!0}}),n.push({element:window,type:At,listener:s}),n.push({element:window,type:"EVENT_HEADER_POSITION_CHANGED",listener:e.updateLayout.bind(e)}),Lt(n),n}}})(this).createListeners(this.slider)}render(){this.innerHTML=`${this.renderNavigation()}`}renderNavigation(){const{slider_id:e,a11y_slider_previous_button:t,a11y_slider_next_button:i,a11y_goto_slide:s="Goto slide"}=this.props,n=this.renderList(`render${this.type}`),r=this.sticky?"#FFFFFF":void 0,o=this.sticky?"8":void 0,a={options:{mobile:{items_per_slide:this.sticky?It:"auto",item_width:this.sticky?"auto":"104",slide_min_height:"auto",slider_gap:"0",display_buttons:"false",display_nav:"false",overflow:"false",flex_auto:this.sticky?"true":"false",placeholder_background:"transparent",display_gradients:"true",gradients_color:r,gradients_width:o},tablet:{items_per_slide:this.sticky?It:"auto",item_width:this.sticky?"auto":"112",slide_min_height:"auto",slider_gap:"0",display_buttons:"true",display_nav:"false",overflow:"false",flex_auto:this.sticky?"true":"false",placeholder_background:"transparent",display_gradients:"true",gradients_color:r,gradients_width:o},desktop:{items_per_slide:this.sticky?It:9,item_width:this.sticky?"auto":"112",slide_min_height:"auto",slider_gap:"0",display_nav:"false",overflow:"false",flex_auto:this.sticky?"true":"false",placeholder_background:"transparent",display_gradients:"true",gradients_color:r,gradients_width:o}},a11y_labels:{prev:t,next:i,nav:s}},l=`<nb-slider-natural\n            id='${e}'\n            data="${f(a)}"\n            data-ref="slider${this.type}">\n            ${n}\n        </nb-slider-natural>`;return this.sticky?l:`<nb-container\n                contrast="light">\n                ${l}\n            </nb-container>`}renderList(e){const{bubbles:t=[]}=this.props;return t.map((t=>this[e](t))).join("")}renderBubble(e){let{link:t}=e;if(!t)return null;const{linkNoHash:i}=m(t);return`\n            <li>\n                <nb-bubble data="${f(e)}" data-ref="bubbles[${i}]"></nb-bubble>\n            </li>\n        `}renderChip(e){const{link:t}=e;if(!t)return null;const{linkNoHash:i,linkHash:s}=m(t);return`\n            <li>\n                <a href="${s}" data-href='${i}' class="is-link" tabindex="-1" >\n                    <nb-chip\n                        background_image="${e.visual.src}"\n                        data-ref="chips[${i}]"\n                        rounded="false"\n                    >\n                        ${e.label}\n                    </nb-chip>\n                </a>\n            </li>\n        `}updateLayout(){this.geometry=this.getGeometry()}updateBubbles(e){const{bubbles:t={}}=this.refs;for(const i in t){const s=t[i],n=i===e?"selected":"default";s.setAttribute&&s.setAttribute("state",n)}}updateChips(e){const{chips:t={}}=this.refs;for(const i in t){const s=t[i],n=i===e?"true":"false";s.setAttribute&&s.setAttribute("checked",n)}}async updateSlider(e,t){let i=t;const s=await this.refs.sliderChip;if(s){if(void 0===t){s.querySelectorAll("a[data-href]").forEach(((t,s)=>{t.getAttribute("data-href")===e&&(i=s)}))}i&&s&&s.goToSlide&&s.goToSlide(i)}}emit(e){z({element:this,...e})}async scroll(e,t){this.isScrolling=!0;const i=e.getAttribute("data-href"),{header:s,chips:n}=this.geometry,r=0===t?0:n.height,o={scrollPaddingTop:s.top+s.height+r};await((e,t={})=>{const i={scrollPaddingTop:140,scrollDuration:300,...t},s=new Nt;let n;const r=typeof e;if(["string","object"].indexOf(r)>-1){n=e,"string"===r&&(n=document.querySelector(e));try{e=window.pageYOffset+n.getBoundingClientRect().top-i.scrollPaddingTop}catch(t){throw new Error(`error: No element found with the selector "${e}"`)}}else"number"!=typeof e&&(e=0);let o=window.performance.now(),a=0,l=window.pageYOffset-e,c=window.innerHeight,d=document.body.clientHeight;l>c&&d-c>0&&(i.scrollDuration=Math.abs(i.scrollDuration+i.scrollDuration*(Math.abs(l)/(d-c))));let u=o+i.scrollDuration;return window.requestAnimationFrame((function t(){let n=window.performance.now();if(n<u){a=(n-o)/i.scrollDuration,a=--a*a*a+1;const s=l*a;window.scrollTo(0,e+(l-s)),window.requestAnimationFrame(t)}else window.scrollTo(0,e),setTimeout((()=>s.resolve()),125);return s.promise})),s.promise})(`[data-id="${i}"]`,o),this.isScrolling=!1;document.querySelector(`[data-id="${i}"]`).focus({preventScroll:!0})}track(e){const{customEventAction:t}=this.props;let i={eventRaisedBy:"Web component",eventLabel:e};t&&(i.eventAction=t),H(i)}getGeometry(){const e=document.querySelector(".Header__top"),t=document.querySelector("nb-plp-sticky-bar"),i=e?.getBoundingClientRect()||{height:0,y:0},s=t?.getBoundingClientRect()||{height:0,y:0};return{header:{height:i.height,top:i.y},chips:{height:s.height,top:s.y}}}disconnectedCallback(){xt(this.eventListeners)}}async function Mt(){return await window.plpData}customElements.get("nb-navigation-bubbles")||customElements.define("nb-navigation-bubbles",Bt);var Dt={init:async function(e){return window.plpDataType=e,window.getPLPData=window.getPLPData||Mt,this.set("sessionId",(Math.random()+1).toString(36).substring(7)),this.set("filtersSelected",[]),this.set("sortCurrent",{}),this.set("sortOptions",[]),window.getPLPData()},set:function(e,t){this[e]=t},get:function(e){return this[e]||null},initPriceFormatter:function(){return async function(){return napi.priceFormat()}()},initCurrency:function(){return async function(){return napi.market().read()}()},products:[],productsList:function(){return this.products},productsListFiltered:function(){return this.products.reduce(((e,t)=>e.concat(t.products)),[]).filter(((e,t,i)=>this.get("filtersSelected").every((t=>!!e[t.key]&&("string"==typeof e[t.key]?e[t.key]===t.value:"number"==typeof e[t.key]?JSON.parse("["+t.value+"]").includes(e[t.key]):e[t.key].includes(t.value))))&&i.findIndex((t=>t.id===e.id))===t)).sort(((e,t)=>e[this.get("sortCurrent").key]<t[this.get("sortCurrent").key]?"asc"===this.get("sortCurrent").order?-1:1:e[this.get("sortCurrent").key]>t[this.get("sortCurrent").key]?"asc"===this.get("sortCurrent").order?1:-1:0))},productsFilteredCount:function(){return this.productsListFiltered().length},filtersUpdate:function(e,t=!0){const i=e.key,s=e.value,n=e.selected,r=this.get("filters").find((e=>e.key===i));r&&(r.values.forEach((e=>{("object"==typeof e.value?e.value.join(",")===s:e.value===s)&&(e.selected=n,n?this.get("filtersSelected").push({key:i,value:s,color:e.color||null}):this.set("filtersSelected",this.get("filtersSelected").filter((e=>!(e.key===i&&e.value===s)))))})),t&&this.fire())},filtersSelectedWithLabel:function(){return this.get("filtersSelected").map((e=>{const t=this.get("filters").find((t=>t.key===e.key)).values.find((t=>t.value===e.value)).label;return{categoryTitle:this.get("filters").find((t=>t.key===e.key)).title,label:t,key:e.key,value:e.value}}))},filtersSelectedCount:function(){return this.get("filtersSelected").length},filtersSelectedSerialized:function(){const e=[this.get("sortCurrent"),...this.get("filtersSelected")];return f(e)},filtersReset:function(){this.set("filtersSelected",[]),this.get("filters").forEach((e=>{e.values.forEach((e=>{e.selected=!1,e.disabled=!1}))})),this.set("sortCurrent",this.get("sortOptions")[0]),this.fire()},observers:[],subscribe:function(e){this.observers.push(e)},unsubscribe:function(e){this.observers=this.observers.filter((t=>{if(t!=e)return t}))},fire:function(){this.observers.forEach((e=>{e.call()}))}};const Ft="filtersPLP",zt="plp-sort-menu",qt="plp-filter-popin",Ht="navigationPLP",Rt="productsListPLP",Wt="productsResultsPLP",jt="filters",Vt="sort";var Qt=function(){document.getElementById(Rt).parentElement.setAttribute("data-loaded",Dt.sessionId)},Ut=function(){const e=document.getElementById(Ft),t=document.getElementById(Ht),i=document.getElementById(Rt),s=document.getElementById(Wt);e.setAttribute("data-request",Dt.sessionId),e.setAttribute("data-filter-counter",Dt.filtersSelectedCount()),t.setAttribute("data-request",Dt.sessionId),i.setAttribute("data-request",Dt.sessionId),e.style.display="block",t.style.display="block",i.style.display="block",s.style.display="none",Dt.get("hide_sort_and_filter")&&e.classList.add("hide-sort-and-filter"),document.getElementById(Wt).style.display="none"},Gt=function(){const e=document.getElementById(Ft),t=document.getElementById(Ht),i=document.getElementById(Rt),s=document.getElementById(Wt);e.style.display="block",e.setAttribute("data-request",Dt.sessionId),e.setAttribute("data-filter-counter",Dt.filtersSelectedCount()),t.style.display="none",i.style.display="none",s.setAttribute("data-request",Dt.filtersSelectedSerialized()),s.style.display="block"},Kt=function(){let e=document.getElementsByClassName("plp-app")[0].querySelector(`#${qt}`);e?(e.querySelector("plp-filter-popin").setAttribute("data-refresh","true"),z({eventName:i,args:{id:qt}})):(e=y(document.createElement("nb-popin",{is:customElements.get("Popin")}),{"data-request":Dt.sessionId,id:qt,popin_id:qt,variation:"before",bgcolor:"white",heading:Dt.translations["productlistrespblock.filter.label"],label_close:"test",content:'<plp-filter-popin class="plp-filter-popin-content"></plp-filter-popin>'}),document.getElementsByClassName("plp-app")[0].appendChild(e),z({eventName:i,args:{id:qt}}))},Yt=function(e){const t=e.detail.err||"Error";console.error(t)};const Jt="none selected",Xt=(e,t)=>{const i=window.location.href.split("#");history.pushState(null,null,((e,t,i)=>{const s=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(s)?e.replace(s,"$1"+t+"="+i+"$2"):e+n+t+"="+i})(i[0],e,encodeURIComponent(JSON.stringify(t))))},Zt=e=>{const t=window.location.search,i=new URLSearchParams(t).get(e);if(!i)return null;try{return JSON.parse(decodeURIComponent(i))}catch(e){console.error("plp.actions-getUrlVariable: url parsing failed")}},ei=e=>{const{isSorted:t,isFiltered:i}=e;H(t||i?{eventAction:"PLP Filter click",eventLabel:[ti(e),ii(e)].join("|")}:{eventAction:"PLP Filter click",eventLabel:Jt})},ti=e=>{const{isSorted:t,sortKey:i,sortOrder:s}=e;let n="sort:";return t?`${n}${s}|${i}`:`${n}${Jt}`},ii=e=>{const{isFiltered:t,filtersSelected:i}=e;let s="characteristics:";if(!t)return`${s}${Jt}`;return`${s}${[...new Set(i.map((e=>e.key)))].join(",")}`};let si={};const ni=e=>e.get("sortCurrent").key!==e.get("sortOptions")[0].key||e.get("sortCurrent").order!==e.get("sortOptions")[0].order,ri=e=>0!==e.filtersSelectedCount();var oi={onload:{process:function(e,t){const{plpType:i}=e.detail.value,s=Dt.init(i);Dt.set("plpType",i||null),Dt.set("innerWidth",window.innerWidth),Dt.set("innerHeight",window.innerHeight);const n=Dt.initCurrency(),r=Dt.initPriceFormatter();Promise.all([s,n,r]).then((e=>{si=e[0],Dt.set("currency",e[1].currency),Dt.set("priceFormatter",e[2]),t(new CustomEvent("onloadSuccess"))})).catch((e=>{console.error(e),t(new CustomEvent("onloadError",{detail:{err:e}}))}))}},onloadSuccess:{nextState:function(e){return Qt(e)}},onloadError:{nextState:function(e){return Yt(e)}},onMergeData:{process:function(e,t){const{filtersService:i,productService:s,dataSortService:n,pageBuilderProps:r}=e.detail.value,{categories:o,enabledTechnologies:a,translations:l,categoriesExtraData:c,nav_links:d,bubbles:u}=s(si,r),h=n(r);Dt.set("sortOptions",h),Dt.set("sortCurrent",h[0]),Dt.set("enabledTechnologies",a),Dt.set("products",o),Dt.set("translations",l),Dt.set("nav_links",d),Dt.set("bubbles",u),Dt.set("hide_sort_and_filter",r.options?.hide_sort_and_filter),Dt.set("campaign",function(e){const{campaign_id:t,campaign_name:i,campaign_creative:s=null,campaign_position:n}=e;if(!s){const{campaign:t=null}=e;return t}return{id:t,name:i,position:n,creative:s}}(r));const p=i(Dt.get("products"),r,c,l,{priceFormatter:Dt.get("priceFormatter"),currency:Dt.get("currency")});Dt.set("filters",p);const b=Zt(jt);if(b&&b.length>0){const e=((e,t)=>{const i=[];return t.forEach((t=>{e.forEach((e=>{e.key===t.key&&e.values.forEach((s=>{t.value===s.value&&i.push({key:e.key,value:s.value,selected:!0})}))}))})),i})(Dt.get("filters"),b);if(e.length>0){let t=!1;e.forEach(((i,s)=>{t=s===e.length-1,Dt.filtersUpdate(i,t)}))}}const m=Zt(Vt);if(m){const e=(g=Dt.get("sortOptions"),_=m,[...g].filter((e=>e.key===_.key&&e.order===_.order)));e.length>0&&Dt.set("sortCurrent",e[0])}var g,_;(()=>{const e=Dt.get("campaign"),t=window.document.getElementById(Ft);e&&_e(t,e)})(),t(new CustomEvent("switchProductsPage"))}},switchProductsPage:{nextState:function(e){return ni(Dt)||ri(Dt)?Gt(e):Ut(e)}},onMergeDataError:{nextState:function(e){return Yt(e)}},onFilter:{process:(e,t)=>{Xt(jt,Dt.get("filtersSelected")),Xt(Vt,{key:Dt.get("sortCurrent").key,order:Dt.get("sortCurrent").order}),t(new CustomEvent("switchProductsPage")),ei({isSorted:ni(Dt),isFiltered:ri(Dt),sortKey:Dt.get("sortCurrent").key,sortOrder:Dt.get("sortCurrent").order,filtersSelected:Dt.get("filtersSelected")})}},onSort:{process:(e,t)=>{Xt(jt,Dt.get("filtersSelected")),Xt(Vt,{key:Dt.get("sortCurrent").key,order:Dt.get("sortCurrent").order}),t(new CustomEvent("switchProductsPage")),ei({isSorted:ni(Dt),isFiltered:ri(Dt),sortKey:Dt.get("sortCurrent").key,sortOrder:Dt.get("sortCurrent").order,filtersSelected:Dt.get("filtersSelected")})}},onloadFilter:{process:function(e,t){t(new CustomEvent("onloadFilterSuccess",{detail:{e:e}}))}},onloadFilterSuccess:{nextState:function(e){return Kt(e)}},onloadFilterError:{nextState:function(e){return Yt(e)}}},ai=(e,t,i=null)=>{let s=new CustomEvent(e,{detail:{value:t,fn:i}});li(s)};const li=e=>{oi[e.type].process(e,ci)},ci=e=>{oi[e.type].nextState(e)};customElements.define("plp-filter-sort-mobile",class extends u{#Q="plp-sort-menu-mobile";constructor(){super(),this.formatSortSeparator="::",Dt.subscribe(this.componentUpdated.bind(this))}onStart(){const e=document.getElementById(zt).getAttribute("data");this.template=`<nb-dropdown id="${this.#Q}" data="${v(e)}"></nb-dropdown>`}onReady(){document.getElementById(this.#Q).addEventListener(a,(e=>{const[t,i]=e.detail.selected.value.split(this.formatSortSeparator);Dt.set("sortCurrent",{key:t,order:i})})),this.sortButton=document.getElementById(this.#Q)}componentUpdated(){const{key:e,order:t}=Dt.get("sortCurrent");this.sortButton.setSelected(this._formatSortValue(e,t)),this.sortButton.render()}_formatSortValue(e,t){return`${e}${this.formatSortSeparator}${t}`}onDestroy(){Dt.unsubscribe(this.componentUpdated)}});customElements.get("plp-filter-popin-content")||customElements.define("plp-filter-popin-content",class extends u{constructor(){super(),Dt.subscribe(this.onStoreChanges.bind(this))}onStoreChanges(){this.querySelectorAll("nb-chip").forEach((e=>{e.setAttribute("disabled",""+this.isDisabled(e.dataset.filterKey,e.dataset.filterValue)),e.setAttribute("checked",""+this.isChecked(e.dataset.filterKey,e.dataset.filterValue))}))}onStart(){var e;const t=Dt.get("filters");this.template=null!==(e=t?.map((e=>`${e.renderBefore()}\n                ${e.values.map((t=>(t.disabled=this.isDisabled(e.key,t.value),t.render()))).join("")}\n            ${e.renderAfter()}`)).join(""))&&void 0!==e?e:""}onReady(){this.querySelectorAll("nb-chip").forEach((e=>{e.addEventListener("change",this.handleChipEvent)}))}isDisabled=(e,t)=>0===Dt.productsListFiltered().filter((i=>!!i[e]&&("string"==typeof i[e]?i[e]===t:"number"==typeof i[e]&&"number"==typeof t?t===i[e]:"number"==typeof i[e]?JSON.parse("["+t+"]").includes(i[e]):!!i[e].includes(t)))).length;isChecked=(e,t)=>Dt.get("filtersSelected").filter((i=>i.key===e&&i.value===t)).length>0;onDestroy(){Dt.unsubscribe(this.onStoreChanges),this.querySelectorAll("nb-chip").forEach((e=>{e.removeEventListener("change",this.handleChipEvent)}))}handleChipEvent(e){e.stopPropagation();const t={key:e.target.parentNode.dataset.filterKey,value:e.target.parentNode.dataset.filterValue,selected:e.target.checked,label:e.target.parentNode.dataset.filterLabel};Dt.filtersUpdate(t)}}),customElements.define("plp-filter-popin-footer",class extends u{constructor(){super(),Dt.subscribe(this.componentUpdated.bind(this))}onStart(){const e=Dt.translations,{a11y_see_result_number_label:t}=this.props;this.template=`<nb-link\n                        id="nb-filter-popin-reset-all"\n                        size="large"\n                        color="black"\n                        style="visibility: hidden"\n                        >\n                          ${e["productlistrespblock.resetfilters.label"]}\n                   </nb-link>\n                   <nb-cta\n                        id="nb-filter-popin-see-results"\n                        variation="secondary"\n                        style="visibility: hidden"\n                        aria_label_after="${t}"\n                        >\n                    </nb-cta>`}getA11ySeeResultsText(){const{see_result_number_label:e,see_result_number_label_one:t}=this.props,i=Dt.productsFilteredCount();return(1===i?t:e).replace("{resultsLength}",""+i)}onReady(){this.componentUpdated(),this.querySelector("#nb-filter-popin-reset-all")?.addEventListener("click",(()=>{Dt.filtersReset(),this.setAttribute("data-refresh","true")})),this.querySelector("#nb-filter-popin-see-results")?.addEventListener("click",(()=>{window.dispatchEvent(new CustomEvent(s))}))}componentUpdated(){const e=Dt.productsFilteredCount(),t=Dt.filtersSelectedCount(),i=this.querySelector("#nb-filter-popin-reset-all"),s=this.querySelector("#nb-filter-popin-see-results");i.style.visibility=t&&t>0?"visible":"hidden",s.style.visibility=e&&e>0?"visible":"hidden",s.querySelector("span").textContent=this.getA11ySeeResultsText(),s.querySelector("button").setAttribute("aria-label",this.getA11ySeeResultsText())}onDestroy(){Dt.unsubscribe(this.onStoreChanges)}});customElements.get("plp-filter-popin")||customElements.define("plp-filter-popin",class extends u{onStart(){this.props=this._createProps(document.getElementById(Ft).parentElement.attributes);const{see_result_number_label:e="See {resultsLength} Results",see_result_number_label_zero:i="No Result",see_result_number_label_one:s="See One Result",a11y_see_result_number_label:n="Close and validate filters"}=this.props.copywriting||this.props,r=Dt.innerWidth<t?"<plp-filter-sort-mobile></plp-filter-sort-mobile>":"";this.template=`\n                ${r}\n                <div class="mobileShadow">\n                    <header>\n                        <h2 class="t-sm-700-caps-sl">${Dt.translations["productlistrespblock.filter.label"]}</h2>\n                    </header>\n                    <section>\n                        <plp-filter-popin-content\n                        ></plp-filter-popin-content>\n                    </section>\n                    <footer>\n                        <plp-filter-popin-footer\n                            see_result_number_label="${e}"\n                            see_result_number_label_zero="${i}"\n                            see_result_number_label_one="${s}"\n                            a11y_see_result_number_label="${n}"\n                        ></plp-filter-popin-footer>\n                    </footer>\n                </div>`}onReady(){window.addEventListener(n,this.eventPopinClsed)}onDestroy(){window.removeEventListener(n,this.eventPopinClsed)}eventPopinClsed(e){e.stopPropagation(),e.detail.id===qt&&ai("onFilter")}});customElements.get("plp-filter-cta")||customElements.define("plp-filter-cta",class extends u{bubbleElement=null;static get observedAttributes(){return["data-filter-counter"]}attributeChangedCallback(e,t,i){null!=i&&i.length>0&&i!==t&&"data-filter-counter"===e&&this.updateBubbleCounter(i)}onStart(){this.template=`<nb-cta id='plp-filter' variation='plpFilter' icon_right='24/symbol/filter'>${this.props.cta_filter_label}</nb-cta>`}onReady(){document.getElementById("plp-filter").addEventListener("click",(()=>{ai("onloadFilter",{})})),this.buttonElement=this.querySelector("nb-cta button"),this.bubbleElement=document.createElement("div"),this.bubbleElement.classList.add("t-2xs-700"),this.bubbleElement.classList.add("bubbleCounter"),this.bubbleElement.innerHTML="0",this.firstChild.firstChild.appendChild(this.bubbleElement)}updateBubbleCounter(e){if(!this.bubbleElement)return null;this.bubbleElement.innerHTML=e,"0"===e?this.buttonElement.classList.remove("bubbleActive"):this.buttonElement.classList.add("bubbleActive")}});const di="slider_natural_nav_links";customElements.get("plp-filter-links")||customElements.define("plp-filter-links",class extends u{constructor(){super(),this.boundReinitSlider=this.reinitSlider.bind(this)}onStart(){this.addEventListener(o,this.boundReinitSlider);const e={options:{mobile:{items_per_slide:"auto",item_width:"auto",slide_min_height:"40",slider_gap:"0",display_buttons:"false",display_nav:"false",overflow:"false",flex_auto:"true",display_gradients:"true",gradients_color:"#FFFFFF",gradients_width:"8",placeholder_background:"transparent"},tablet:{items_per_slide:"auto",item_width:"auto",slide_min_height:"80",slider_gap:"0",display_buttons:"true",display_nav:"false",overflow:"false",flex_auto:"true",display_gradients:"true",gradients_color:"#FFFFFF",placeholder_background:"transparent"},desktop:{items_per_slide:"auto",item_width:"auto",slide_min_height:"80",slider_gap:"0",display_buttons:"true",display_nav:"false",overflow:"false",flex_auto:"true",display_gradients:"true",gradients_color:"#FFFFFF",placeholder_background:"transparent"}},a11y_labels:{prev:this.props.a11y_slider_previous_button,next:this.props.a11y_slider_next_button,nav:"Go to slide"}};this.template=`<nb-slider-natural\n                            id='${di}'\n                            data="${f(e)}">\n                            ${this.renderLinksList()}\n                        </nb-slider-menu>`}renderLinksList(){const{navigation:e=[]}=this.props;return e.map((({link:e="",icon_left:t="",seo_label:i="",tracking_label:s="",label:n="",selected:r=!1})=>`<li><nb-link\n                            link='${e}'\n                            phantom='true'\n                            color='black'\n                            selected=${r}\n                            ${i&&`seo_label='${i}'`}\n                            ${s&&`tracking_label='${s}'`}\n                            ${t&&`icon_left='${t}'`}\n                    >${n}</nb-link></li>`)).join("")}reinitSlider(e){const{id:t}=q(e);t===di&&e.target.initSlider()}disconnectedCallback(){this.removeEventListener(o,this.boundReinitSlider)}});customElements.get("plp-filter-sort")||customElements.define("plp-filter-sort",class extends u{#Q=zt;constructor(){super(),this.formatSortSeprator="::",Dt.subscribe(this.componentUpdated.bind(this)),this.sortButton={}}onStart(){this.props=this._createProps(document.getElementById(Ft).parentElement.attributes);const{label_sort_by:e="Sort By",aa_description_sort_by:t="You can select different sorting values from this listbox. To interact with this listbox press SPACE or ENTER key.",aa_listbox_description_sort_by:i="You can navigate through the options using UP or DOWN arrows keys. To exit this listbox press ESCAPE key.",aa_select_description_sort_by:s="To select this option press SPACE or ENTER key.",label_close_sort_by:n="Close"}=this.props,r=Dt.get("sortOptions").map((e=>({label:e.label,value:this._formatSortValue(e.key,e.order),checked:e.checked})));Dt.get("sortCurrent").key!==Dt.get("sortOptions")[0].key&&r.forEach((e=>{e.checked=e.value===this._formatSortValue(Dt.get("sortCurrent").key,Dt.get("sortCurrent").order)}));const o={label:e,aa_description:t,aa_listbox_description:i,aa_select_description:s,icon_option:"16/symbol/check",label_close:n,options:r};this.template=`<nb-dropdown id="${this.#Q}" data='${f(o)}'/>`}onReady(){document.getElementById(this.#Q).addEventListener(a,(e=>{const[t,i]=e.detail.selected.value.split(this.formatSortSeprator);Dt.set("sortCurrent",{key:t,order:i}),ai("onSort")})),this.sortButton=document.getElementById(this.#Q)}componentUpdated(){const{key:e,order:t}=Dt.get("sortCurrent");this.sortButton.setSelected(this._formatSortValue(e,t)),this.sortButton.render()}onDestroy(){Dt.unsubscribe(this.componentUpdated)}_formatSortValue(e,t){return`${e}${this.formatSortSeprator}${t}`}});customElements.get("plp-filter")||customElements.define("plp-filter",class extends u{static get observedAttributes(){return["data-request","data-filter-counter"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&("data-request"===e?this.updateComponent():"data-filter-counter"===e&&document.getElementById("plp-filter-cta").setAttribute("data-filter-counter",i))}onStart(){this.props=this._createProps(this.parentElement.attributes),this.classList.add("plp-filter")}updateComponent(){const e=Dt.get("nav_links"),t={id:this.props.campaign_id,creative:this.props.campaign_creative,name:this.props.campaign_name,position:this.props.campaign_position},i=`\n            <div class='plp-filter-restrict'>\n                <plp-filter-cta\n                    id="plp-filter-cta"\n                    cta_filter_label="${this.props.copywriting?.cta_filter_label||this.props.cta_filter_label}"\n                    data-filter-counter="0"\n                ></plp-filter-cta>\n                <plp-filter-links\n                    data = '${f({navigation:e,a11y_slider_previous_button:this.props.a11y_slider_previous_button,a11y_slider_next_button:this.props.a11y_slider_next_button,campaign:this.props.campaign||t})}'\n                ></plp-filter-links>\n                <plp-filter-sort></plp-filter-sort>\n            </div>`;this.loadTemplate(i),this.filterLinks=this.querySelectorAll("nb-slider-natural nb-link a"),this.bindEvents()}linkClick({textContent:e}){H({eventAction:"PLP Content Tab",eventLabel:e})}bindEvents(){this.unbindEvents(),this.filterLinks?.length&&this.filterLinks.forEach((e=>{const t=e.querySelector("span").textContent;e.boundLinkClick=this.linkClick.bind(this,{textContent:t}),e.addEventListener("click",e.boundLinkClick)}))}unbindEvents(){this.filterLinks?.length&&this.filterLinks.forEach((e=>{e.removeEventListener("click",e.boundLinkClick)}))}});const ui=(()=>{let e=null,t=0,i="";const s=()=>{const i=e.getAttribute("sticky")||"false";let s=0,n=!1,r={};for(var o=0;o<e.parentElement.childNodes.length&&(e.parentElement.childNodes[o].tagName&&e.parentElement.childNodes[o].tagName===e.tagName&&(r=e.parentElement.childNodes[o+2],r&&(s=r.offsetTop-80,n=!0)),!n);o++);n&&0===s&&(s=e.parentElement.offsetTop+e.parentElement.offsetHeight);const a=window.scrollY-s>0;"true"===i!==a&&(e.setAttribute("sticky",a),t>0&&(document.body.style.paddingTop=a?t+"px":"0px"))},n=()=>{window.addEventListener("scroll",s)},r=()=>{window.removeEventListener("scroll",s)};return{initialize:(r,o=t,a=i)=>{e=r,t=o,i=a,e.setAttribute("sticky","false"),e.classList.add("nb-sticky-container"),s(),n()},destroy:()=>{r()},updatePosition:(t=0)=>{let s=e;if(""!==i&&(s=e.querySelector(i)),!s)return;const n=document.querySelector(".Header__top"),r=n?.getBoundingClientRect()||{height:0,y:0},o=r.height,a=`${r.y+o+t}px`;return s.style.top=a,0}}})();var hi=(e,t)=>{const{a11y_slider_previous_button:i,a11y_slider_next_button:s}=e,n=Dt.get("nav_links"),r=Dt.get("bubbles"),o=n.find((e=>e.selected)),a=o?.label,l=(({bubbles:e,a11y_slider_previous_button:t,a11y_slider_next_button:i,campaign:s,selected_nav_link_label:n})=>{let r="";return e&&(r=f({a11y_slider_previous_button:t,a11y_slider_next_button:i,bubbles:e,customEventAction:"PLP Content Tab",campaign:s,selected_nav_link_label:n})),r})({bubbles:r,...e,campaign:t,selected_nav_link_label:a});let c=`<nb-navigation-bubbles data='${l}'></nb-navigation-bubbles>`;const d=(e=>{let t="";return e&&(t=f({navigation:e})),t})(n);return c+=`<nb-plp-sticky-bar\n                data="${d}"\n                a11y_slider_previous_button="${i}"\n                a11y_slider_next_button="${s}"\n                navigation_bubbles="${l}",\n                selected_nav_link_label="${a}"\n            ></nb-plp-sticky-bar>`,c};customElements.get("plp-navigation")||customElements.define("plp-navigation",class extends u{#U=!0;onStart(){this.props=this._createProps(this.parentElement.attributes),this.#U&&ui.initialize(this,0,"nb-plp-sticky-bar")}static get observedAttributes(){return["sticky","data-request"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&("sticky"===e&&this.#U&&ui.updatePosition(),"data-request"===e&&this.updateComponent())}updateComponent(){const e={id:this.props.campaign_id,creative:this.props.campaign_creative,name:this.props.campaign_name,position:this.props.campaign_position},t=hi(this.props.copywriting?this.props.copywriting:this.props,this.props.campaign||e);this.loadTemplate(t)}onDestroy(){this.#U&&ui.destroy()}});var pi=(e,t="",i="",s=0)=>{const n={...e,rendererName:t};n.price=Dt.priceFormatter.short(Dt.currency,e.price),n.rawPrice=e.price,n.sleevePrice&&(n.sleevePrice=Dt.priceFormatter.short(Dt.currency,e.sleevePrice)),n.price_per_capsule&&(n.price_per_capsule=Dt.priceFormatter.short(Dt.currency,e.price_per_capsule)),n.intensity_label=Dt.translations["productlistrespblock.capsule.a11y.intensity"],n.variation=k,n.campaign=Dt.get("campaign");const r=(({type:e,is_machine_b2b:t})=>{let i="nb-sku";return e===L?i="nb-sku-coffee":e===x&&t?i="nb-sku-machine-b2b":e===x?i="nb-sku-machine":"accessory"===e?i="nb-sku-accessory":"giftcard"===e&&(i="nb-sku-gift-card"),i})(n);return`<${r}\n                tracking_list="${i}"\n                tracking_position="${s+1}"\n                id="${n.sku}"\n                data="${f(n)}"\n                ${n.highlighted?`highlighted="${n.highlighted}"`:""}\n           ></${r}>`};customElements.get("plp-results-chip")||customElements.define("plp-results-chip",class extends u{onStart(){const{icon_right:e,variation:t,label:i,a11y_label:s,color:n}=this.props,r=n?`<div class="chip-color" style="background:${n}"></div>`:"";this.template=`<nb-cta\n                    icon_right="${e}"\n                    variation="${t}"\n                    aria_label_before="${s}"\n             >\n                    ${r}\n                    ${i}\n             </nb-cta>`}onReady(){const{value:e,type:t,label:i}=this.props;this.addEventListener("click",(()=>{const s={key:t,value:e,selected:!1,label:i};Dt.filtersUpdate(s),this.remove(),ai("onFilter")}))}});customElements.get("plp-results")||customElements.define("plp-results",class extends u{onStart(){this.props=this._createProps(this.parentElement.attributes),this.productListBkp=[],this.classList.add("plp-results")}static get observedAttributes(){return["data-request"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&"data-request"===e&&this.updateComponent()}updateComponent(){if(this.arraysAreEqual(this.productListBkp,Dt.productsListFiltered()))return null;this.productListBkp=Dt.productsListFiltered();let e=(e=>{const{header_result_label:t="Currently shopping by",a11y_header_result_label_button:i="Reset filter",header_result_label_reset:s="Reset all",a11y_header_result_label_reset:n="Filters",header_result_label_results:r="Results",header_result_label_results_zero:o="Results",header_result_label_results_one:a="Result",a11y_header_result_label_results:l="With your filters activated, you have currently"}=e,c=Dt.productsFilteredCount();let d='<nb-container element_class="plp-results-header" contrast="light">';return Dt.filtersSelectedCount()>0&&(d+=`<p class="t-sm-400-sl cb-title">${t}<span class='sr-only'>&nbsp;${Dt.filtersSelectedWithLabel().map((e=>e.categoryTitle+", "+e.label+", ")).join(" / ")}</span></p>`,Dt.filtersSelectedWithLabel().forEach((e=>{d+=`<plp-results-chip\n                    icon_right="24/symbol/close"\n                    variation="secondary"\n                    value="${e.value}"\n                    type="${e.key}"\n                    label="${e.label}"\n                    color="${e.color||""}"\n                    a11y_label="${i}"\n             >${e.label}</plp-results-chip>`}))),d+=`<nb-link\n                  id="nb-plp-filter-results-reset-all"\n                  size="small"\n                  color="black"\n                  aria-label="${n}"\n             >\n                  ${s}\n             </nb-link>`,d+=`<p class="t-xs-700-caps-sl cb-results"><span class="sr-only">${l}</span> <span>${c}</span> ${(e=>0===e?o:1===e?a:r)(c)}:</p>`,d+="</nb-container>",d})(this.props);e+='<nb-container element_class="plp-grid" className="plp-grid--results-list">',Dt.productsListFiltered().forEach(((t,i)=>{e+=pi(t,"results",i)})),e+="</nb-container>",this.loadTemplate(e,!0),document.querySelector("#nb-plp-filter-results-reset-all")?.addEventListener("click",this.resetClick)}arraysAreEqual(e,t){return e===t||e.length===t.length&&e.every(((e,i)=>e===t[i]))}onDestroy(){document.querySelector("#nb-plp-filter-results-reset-all")?.removeEventListener("click",this.resetClick)}resetClick(){Dt.filtersReset(),ai("onFilter")}});customElements.get("plp-products")||customElements.define("plp-products",class extends u{static get observedAttributes(){return["data-request"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&"data-request"===e&&this.updateComponent()}updateComponent(){const e=Dt.get("products").reduce(((e,t)=>e+=(e=>{const{id:t=null,background_retina:i,background_desktop:s,background_mobile:n,background_tablet:r,contrast:o="dark",name:a=null,description:l,products:c=[]}=e;return`<div class='plp-category' data-id="${t}" tabindex='0'>\n                <nb-container\n                    classname="plp-category--header"\n                    contrast='${o}'\n                    background_retina='${i}'\n                    background_desktop='${s}'\n                    background_mobile='${n}'\n                    background_tablet='${r}'\n                >\n                    <header>\n                        ${a?`<h2 class="h-2xl-700-sl plp-category--title">${a}</h2>`:""}\n                        <div class="plp-category--description">\n                            ${l?`<p class="description t-md-400">${l}</p>`:""}\n                        </div>\n                    </header>\n                </nb-container>\n                <nb-container classname="plp-category--products" contrast='light'>\n                    <div class="plp-category--segment">\n                        <div class='plp-category--side'></div>\n                        <div class='plp-category--center'>\n                          <div class="plp-grid">\n                            ${c.map(((t,i)=>pi(t,e,a,i))).join("")}\n                          </div>\n                        </div>\n                    </div>\n                </nb-container>\n            </div>`})(t)),"");this.loadTemplate(e)}});class bi extends u{constructor(){super(),this.dataTransformService=()=>[],this.dataFiltersService=()=>[],this.dataSortService=()=>[]}static get observedAttributes(){return["data-loaded"]}attributeChangedCallback(e,t,i){null!=i&&i!==t&&i.length>0&&"data-loaded"===e&&ai("onMergeData",{filtersService:this.dataFiltersService,productService:this.dataTransformService,dataSortService:this.dataSortService,pageBuilderProps:this.props})}onStart(){ai("onload",{plpType:this.plpType}),this.classList.add("plp-app"),this.classList.add(`plp-app-${this.plpType}`),this.props.options&&this.props.options.items_per_row&&this.props.options.items_per_row>"3"&&this.classList.add(`plp-row-${this.props.options.items_per_row}`),this.template=`\n            <plp-filter id="${Ft}" style="display: none;"></plp-filter>\n            <plp-navigation id="${Ht}" style="display: none;"></plp-navigation>\n            <plp-products id="${Rt}" style="display: none;"></plp-products>\n            <plp-results id="${Wt}" style="display: none;"></plp-results>\n        `}}class mi{#G="";#K="";#Y="";#J=[];#X=null;#Z=null;#ee=null;#te=null;#ie=[];#se=[];#ne="";#re=new Date;#oe=new Date;#ae="/shared_res/agility/next-components/assets/backgrounds/barista_creation_range_XL.jpg";#le="/shared_res/agility/next-components/assets/backgrounds/barista_creation_range_L.jpg";#ce="/shared_res/agility/next-components/assets/backgrounds/barista_creation_range_S.jpg";#de="";#ue="dark";#he=!1;constructor(e,t){this.#G=e.id||this.#G,this.#K=e.name||this.#K,this.#X=e.capacityLabel||this.#X,this.#Y=e.description||this.#Y,this.#Z=e.detailsIcon||this.#Z,this.#ee=e.icon||this.#ee,this.#te=e.rangeLink||this.#te,this.#ie=e.subCategories||this.#ie,this.#se=e.superCategories||this.#se,this.#ne=e.url||this.#ne,this.#le=t?.background_desktop||this.#le,this.#ce=t?.background_mobile||this.#ce,this.#ae=t?.background_retina||this.#ae,this.#de=t?.background_tablet||this.#de,this.#ue=t?.contrast||this.#ue}get id(){return this.#G}get products(){return this.#J}set products(e){this.#J=e}get name(){return this.#K}get description(){return this.#Y}get contrast(){return this.#ue}get background_desktop(){return this.#le}get background_mobile(){return this.#ce}get background_retina(){return this.#ae}get background_tablet(){return this.#de}isProductCategory(){return!this.#he&&this.#J&&this.#J.length>0}}class gi extends mi{constructor(e,t){super(e,t)}}class _i{id="";sku="";longSku="";name="";available=!0;description=null;hidePrice=!1;image_alt_text="";image="";inStock=!0;internationalId="";internationalName="";legacyId="";maxOrderQuantity=null;packagingType=null;price=null;pushRatingEnabled=!1;ranges=[];salesMultiple=null;technologies=[];type="";unitQuantity=50;url="";labels=[];category_name="";highlighted=!1;strikethrough_price="";additional_message="";additional_message_icon="";additional_message_link={};api_override=null;view_details_label="";headline="";constructor(e){var t;this.sku=e.internationalId||this.sku,this.longSku=e.id||this.longSku,this.id=e.id||this.id,this.name=e.name||this.name,this.available=e.available||this.available,this.description=e.description||this.description,this.hidePrice=e.hidePrice||this.hidePrice,this.image_alt_text=e?.image?.altText||this.image_alt_text,this.image=e?.image?.url||this.image,this.inStock=e.inStock||this.inStock,this.internationalId=e.internationalId||this.internationalId,this.internationalName=e.internationalName||this.internationalName,this.legacyId=e.legacyId||this.legacyId,this.maxOrderQuantity=e.maxOrderQuantity||this.maxOrderQuantity,this.packagingType=e.packagingType||this.packagingType,this.price=null!==(t=e.price)&&void 0!==t?t:this.price,this.pushRatingEnabled=e.pushRatingEnabled||this.pushRatingEnabled,this.ranges=e.ranges||this.ranges,this.salesMultiple=e.salesMultiple||this.salesMultiple,this.technologies=e.technologies||this.technologies,this.type=e.type||this.type,this.unitQuantity=e.unitQuantity||this.unitQuantity,this.url=e.url||this.url,this.highlighted=e.highlighted||this.highlighted,this.strikethrough_price=e.strikethrough_price||this.strikethrough_price,this.additional_message=e.additional_message||this.additional_message,this.additional_message_icon=e.additional_message_icon||this.additional_message_icon,this.additional_message_link=e.additional_message_link||this.additional_message_link,this.api_override=e.api_override||this.api_override,this.view_details_label=e.view_details_label||this.view_details_label,this.headline=e.headline||this.headline,this.labels=e.labels||this.labels;const i=e.categoryId?e.categoryId.split("/"):[""];this.category_name=i[i.length-1]}}class fi extends _i{cupSizes=[];cupSizesDetails=[];flavors=[];in_stock=!0;sales_multiple=0;bundled=!1;logos=[];is_headline_hidden="";a11y_price="";a11y_product_card="";shop_similar="";label_sleeve="";label_sleeves="";label_capsules="";intensity=null;a11y_intensity_max="";label_decaffeinato="";show_sleeve_price=!1;show_sleeve=!1;price_per_capsule=null;final_price=null;capsule_price_label="";capsule_price_syntax="{capsule_price_label}: {price_per_capsule}";sleeve_syntax="{numberOfSleeves} {sleeveLabel} ({quantity} {label_capsules})";perSleeveLabel="";number_of_sleeves="";number_of_capsules="";show_capsule_price=!1;bundle_details={};constructor(e,t){super(e);const{alt_fair_trade:i="",alt_vertuo_next:s="",alt_organic:n="",alt_rainforest:r="",alt_sustainability:o="",alt_q_certification_arabica:a="",a11y_price:l="",a11y_product_card:c="",shop_similar:d,quick_view_plp:u={}}=t.copywriting||t,{show_sleeve:h=!1,label_sleeve:p="",label_sleeves:b="",label_capsules:m="",show_sleeve_price:g=!1,capsule_price_label:_,capsule_price_syntax:f,is_headline_hidden:v=!1,sleeve_syntax:y="{numberOfSleeves} {sleeveLabel} ({quantity} {label_capsules})",label_decaffeinato:k="",a11y_intensity_max:w="",perSleeveLabel:E=""}=t.options||t;this.cupSizes=e.cupSizes||this.cupSizes,this.cupSizesDetails=e.cupSizesDetails||this.cupSizesDetails,this.flavors=e.flavors||this.flavors,this.in_stock=this.inStock,delete this.inStock,this.intensity=e.intensity||this.intensity,this.min_intensity=t.min_intensity,this.max_intensity=t.max_intensity,this.sales_multiple=e.salesMultiple,this.logos=[],null!=e.onlyVertuoNext&&this.logos.push({name:"only_vertuo_next",alt:s}),null!=e.fairTrade&&this.logos.push({name:"fair_trade",alt:i}),null!=e.organicEu&&this.logos.push({name:"is_organic",alt:n}),null!=e.rainforest&&this.logos.push({name:"is_rainforest",alt:r}),null!=e.sustainability&&this.logos.push({name:"is_sustainable",alt:o}),null!=e.arabica&&this.logos.push({name:"is_q_certified_arabica",alt:a}),this.is_headline_hidden=v,this.a11y_price=l,this.a11y_product_card=c,this.shop_similar=d,this.label_sleeve=p,this.label_sleeves=b,this.label_capsules=m,this.a11y_intensity_max=w,this.label_decaffeinato=k,this.sleeve_syntax=y,this.perSleeveLabel=E||this.perSleeveLabel,this.show_sleeve_price=g||this.show_sleeve_price,this.show_sleeve=h||this.show_sleeve,this.capsule_price_label=_||this.capsule_price_label,this.capsule_price_syntax=f||this.capsule_price_syntax,this.quick_view_plp=u,this.capsuleProperties=e.capsuleProperties,this.capsuleProductAromatics=e.capsuleProductAromatics,this.capsuleCupSizes=e.capsuleCupSizes,this.price_per_capsule=e.price_per_capsule||this.price_per_capsule,this.price=this.getPrice(e),this.number_of_sleeves=e.number_of_sleeves||this.number_of_sleeves,this.number_of_capsules=e.number_of_capsules||this.number_of_capsules,this.show_capsule_price=e.show_capsule_price||this.show_capsule_price,this.bundled=this.isBundled(),this.bundle_details=e.bundle_details||this.bundle_details,this.images=e.images||{};const C=this.number_of_sleeves||T(e),{hasPricePerSleeve:S,sleevePrice:$}=this.getSleevePrice({show_sleeve_price:this.show_sleeve_price,number_of_sleeves:C,salesMultiple:this.sales_multiple,price:this.price,bundled:this.bundled});this.hasPricePerSleeve=S,this.sleevePrice=$}getPrice(e){return e.final_price||0===e.final_price?e.final_price:e.price||0===e.price?e.price:this.final_price}getSleevePrice({show_sleeve_price:e,number_of_sleeves:t,salesMultiple:i,price:s,bundled:n}){let r,o=!0;return n||1!==t?o=!1:r=s*(e?1:i),{hasPricePerSleeve:o,sleevePrice:r}}isBundled(){return!(this.sales_multiple>1&&1===this.unitQuantity)&&(1===this.sales_multiple&&this.unitQuantity>1)}}var vi=(e,t,i)=>{const s="gran-lungo-vertuo-capsule",n="brand_coffee_capsule_pro",{copywriting:r={},options:o={}}=i,a=e=>e.map((({id:e,url:t,name:i,isSelected:s})=>({link:t,label:i,seo_label:i,icon_left:e?l(e.split("/").pop()):"",selected:s}))),l=e=>{switch(e){case c:return s;case"pro":return n;default:return"original"}};let d;if(d=o.hide_technologies_in_navigation?(()=>{if(!r.all_products_navigation_label)return[];const e=t.find((e=>e.isSelected));return e?[{url:e.url,name:r.all_products_navigation_label,isSelected:!0}]:[]})():t,!e.length&&d.length)return a(d);if(!d.length)return e;const u=[...e].filter((e=>{if("coffee"!==e.icon_left&&e.icon_left!==s&&e.icon_left!==n)return e}));return[...a(d),...u]};const yi=({categories:e,productGroups:t,products:i})=>{i.forEach((e=>{e.highlightLabels?.length&&(e.labels=e.highlightLabels.map((e=>({name:e.text,color:e.textColor,bgColor:e.backgroundColor}))))}));const s=pt(e);(e=>{e.forEach((e=>{try{e.parsedData=JSON.parse(e.description)}catch(t){return void console.error("Wrong JSON format in HMC label categories",e.id,e.description,t)}}))})(s);const n=t.filter((e=>s.some((t=>t.id===e.categoryId))));n.forEach((e=>{const t=s.find((t=>t.id===e.categoryId));t.parsedData&&e.productIds.forEach((e=>{const s=i.find((t=>t.id===e));!s||s.highlightLabels?.length>0||(s.labels=s.labels||[],s.labels.push(t.parsedData))}))})),n.forEach((e=>{const i=t.findIndex((t=>t.categoryId===e.categoryId));t.splice(i,1)}))};var ki=(e,t,i,s,n=[])=>{if(!e.data)return[];let r=n;const{categories:o,productGroups:a,enabledTechnologies:l}=e.data.configuration.eCommerceData;n&&n.length||(r=e.data.configuration.eCommerceData.products),r.forEach((e=>{e.view_details_label=t.copywriting?.view_details_label,(()=>{const e=le();return!(!e||!e.user)&&e.user.isLoggedIn})()&&(e.hidePrice=!1);const i=t.products&&t.products.find((t=>t.sku&&t.sku===e.legacyId));i&&(e.highlighted=i.highlighted,e.strikethrough_price=i.strikethrough_price,e.highlighted=i.highlighted,e.additional_message=i.additional_message,e.additional_message_icon=i.additional_message_icon,e.additional_message_link=i.additional_message_link||{},(i.api_override||e.api_override)&&(e.image=e.image||{},e.image.url=i.api_override?.image||e.api_override?.image||e.image.url,e.name=i.api_override?.name||e.api_override?.name||e.name,e.headline=i.api_override?.headline||e.api_override?.headline||e.headline,e.description=i.api_override?.description||e.api_override?.description||e.description,e.api_override=i.api_override||e.api_override))}));const{translations:c}=e.data.configuration;yi({categories:o,productGroups:a,products:r});const d=[];t.categories=t.copywriting?t.copywriting.categories:t.categories,o.forEach((e=>{const n=t.categories.find((t=>t.category_id===e.id)),o=new i(e,n);a.forEach((i=>{_t(i.categoryId)||i.categoryId===e.id&&i.productIds.forEach((i=>{const n=r.find((e=>e.id===i));if(!n)return;n.categoryId=e.id;const a=new s(n,t);o.products.push(a)}))})),o.isProductCategory()&&d.push(o)}));const u=t.copywriting?t.copywriting.nav_links:t.nav_links,h=t.copywriting?t.copywriting.navigation_bubbles.bubbles:t.navigation_bubbles.bubbles,p=vi(u,l,t);let b;return b=((e,t,i)=>{const s=t.filter((e=>!_t(e.categoryId))).map((e=>e.categoryId)),n=[],r=e.map((e=>{const t={...e,link:e.link.replace("#","")};if(s.includes(t.link))return t})).filter((e=>void 0!==e));return s.forEach((e=>{const t=r.find((({link:t})=>t===e));if(t)n.push(t);else{const t=i.find((t=>t.id===e));if(t){const{name:e,id:i,icon:s}=t,r={link:i,tracking_label:e,label:e,visual:{src:s?.url||"",alt:s?.altText||e}};n.push(r)}}})),n})(h,a,o),{categories:d,translations:c,enabledTechnologies:l,categoriesExtraData:o,nav_links:p,bubbles:b}};let wi=100,Ei=null;var Ci=e=>(null!==Ei||e.reduce(((e,t)=>e.concat(t.products)),[]).map((e=>{e&&e.intensity&&(e.intensity<wi&&(wi=e.intensity),e.intensity>Ei&&(Ei=e.intensity))})),{min:wi,max:Ei});const Si={ristretto:"24/cupsize/cupsize-ristretto-ol",espresso:"24/cupsize/cupsize-espresso-ol",lungo:"24/cupsize/cupsize-lungo-ol","lungo-plus":"24/cupsize/cupsize-lungo-plus-ol","ristretto-vertuo":"","espresso-vertuo":"24/cupsize/cupsize-espresso-vl","double-espresso-vertuo":"24/cupsize/cupsize-double-espresso-vl","gran-lungo":"24/cupsize/cupsize-gran-lungo-vl",coffee:"24/cupsize/cupsize-mug-vl",xl:"24/accessory/nomad-travel-mug-vl","cold-brew":"24/coffee/cold-brew","carafe-vertuo":"24/cupsize/cupsize-carafe-vl",alto:"24/cupsize/cupsize-alto-vl",americano:"24/cupsize/cupsize-americano-ol",icedrecipe:"24/recipe/iced-coffee","icedrecipe-vertuo":"24/recipe/iced-vl",milk:"24/coffeenote/milky","cappuccino-and-latte-macchiato":"24/recipe/cappuccino-ol","double-cappuccino":"24/recipe/double-cappuccino-vl",reverso:"24/recipe/reverso-vl","cortado-cappuccino":"24/recipe/cortado-ol","ristretto-b2b":"","espresso-b2b":"","lungo-b2b":"","icedRecipe-b2b":""},$i=e=>{const t=(e?e.split("/")?.pop():"").toLowerCase().replace("capsule-cupsize-","").replace("machine-cupsize.","");return Si[t]||"24/cupsize/cupsize-espresso-ol"};const Li=(e,t)=>e.options?e.options[t]:e[t];var xi=(e,t)=>{const i=({categories:e,productGroups:t,products:i},s,n)=>{const r=s(e);if(!r)return;const o=t.find((e=>r.id===e.categoryId));if(!o)return;o.productIds.forEach((e=>{const t=i.find((t=>t.id===e));n(t,r)}));const a=t.findIndex((e=>e.categoryId===o.categoryId));t.splice(a,1)};i(e.data.configuration.eCommerceData,mt,((e,t)=>e.fairTrade=t.name)),i(e.data.configuration.eCommerceData,bt,(e=>e.highlighted=!0)),i(e.data.configuration.eCommerceData,lt,(e=>e.onlyVertuoNext=!0)),i(e.data.configuration.eCommerceData,ct,(e=>e.organicEu=!0)),i(e.data.configuration.eCommerceData,dt,(e=>e.rainforest=!0)),i(e.data.configuration.eCommerceData,ut,(e=>e.sustainability=!0)),i(e.data.configuration.eCommerceData,ht,(e=>e.arabica=!0));const{min:s,max:n}=Ci(e.data.configuration.eCommerceData.categories);return t.min_intensity=s,t.max_intensity=n,e.data.configuration.eCommerceData.products.forEach((i=>{const s=t.options?t.options.show_sleeve_price:t.show_sleeve_price,{showCapsulePrice:n,price_per_capsule:r,final_price:o}=function(e,t,i){let s,n,r=e;const o=i(t);return"capsule"!==t.type||o?(r=!1,s=t.price):(s=t.price*t.salesMultiple,s=Math.round(100*s)/100,n=t.price),{showCapsulePrice:r,final_price:s,price_per_capsule:n}}(s,i,N);var a,l;i.show_sleeve_price=s,i.label_sleeve=Li(t,"label_sleeve"),i.label_sleeves=Li(t,"label_sleeves"),i.label_capsules=Li(t,"label_capsules"),i.show_sleeve=Li(t,"show_sleeve"),i.capsule_price_label=Li(t,"capsule_price_label"),i.capsule_price_syntax=Li(t,"capsule_price_syntax"),i.price_per_capsule=r,i.final_price=o,i.show_capsule_price=n,i.cupSizes&&(i.cupSizesDetails=(a=i.cupSizes,l=e.data.configuration.eCommerceData.categories,a.map((e=>{const t=l.find((t=>t.id===e));return{icon:$i(t.id),label:t.name,size:t.name.toLowerCase(),capacityLabel:t.capacityLabel,category:t}})))),t.products&&t.products.length&&t.products.forEach((e=>{e.sku&&e.sku===i.legacyId&&(i.number_of_sleeves=e.number_of_sleeves,i.number_of_capsules=e.number_of_capsules,e.bundle_details&&(i.bundle_details=e.bundle_details||{}))}))})),ki(e,t,gi,fi)};const Pi=e=>(e=>{let t=e.split("/").pop();return t=t.replace("capsule-aromatic-","").replace("recipe-",""),["peppery","spicy"].includes(t)?"24/coffeenote/spicy":["woody","wood","oak-wood"].includes(t)?"24/coffeenote/oak-wood":["sugar"].includes(t)?"24/coffeenote/sugar":["sweet"].includes(t)?"24/coffeenote/sweet":["berry"].includes(t)?"24/coffeenote/berry":["baked-apple","apple"].includes(t)?"24/coffeenote/baked-apple":["bergamot"].includes(t)?"24/coffeenote/bergamot":["bitterness","bitter"].includes(t)?"24/coffeenote/bitterness":["blueberry"].includes(t)?"24/coffeenote/blueberry":["bread-aroma","bread"].includes(t)?"24/coffeenote/bread-aroma":["candied-fruit"].includes(t)?"24/coffeenote/candied-fruit":["caramel"].includes(t)?"24/coffeenote/caramel":["cereal"].includes(t)?"24/coffeenote/cereal":["maltedCereal","malted","toasted-cereal"].includes(t)?"24/coffeenote/malted":["roastedCereal","veryRoasted","roasted"].includes(t)?"24/coffeenote/roasted":["hintOfFruity","fruityWiney","fruity"].includes(t)?"24/coffeenote/fruity":["citric","lemon","citrus"].includes(t)?"24/coffeenote/citrus":["cocoa"].includes(t)?"24/coffeenote/cocoa":["chocolate"].includes(t)?"24/coffeenote/chocolate":["cardamom"].includes(t)?"24/coffeenote/cardamom":["ginger"].includes(t)?"24/coffeenote/ginger":["ginseng"].includes(t)?"24/coffeenote/ginseng":["nutty","nut","hazelnut"].includes(t)?"24/coffeenote/hazelnut":["refreshing-mint","peppermint"].includes(t)?"24/coffeenote/peppermint":["almond","almonds"].includes(t)?"24/coffeenote/almonds":["balance","balanced","smooth"].includes(t)?"24/coffeenote/balance":["tropical"].includes(t)?"24/coffeenote/tropical":["coconut"].includes(t)?"24/coffeenote/coconut":["cocktail"].includes(t)?"24/coffeenote/cocktail":["biscuity","biscuit"].includes(t)?"24/coffeenote/biscuit":["whiskey","Whisky","whisky","alcohol"].includes(t)?"24/coffeenote/alcohol":["Floral","floral"].includes(t)?"24/coffeenote/floral":["watermelon"].includes(t)?"24/coffeenote/watermelon":["RedFruit","redfruit","red-fruit"].includes(t)?"24/coffeenote/red-fruit":["flowery","flower"].includes(t)?"24/coffeenote/flowery":["herbal"].includes(t)?"24/coffeenote/herbal":["honey"].includes(t)?"24/coffeenote/honey":["smooth-b2b"].includes(t)?"24/coffeenote/roasted":["sweetnotes-b2b","toffeenotes-b2b","caramellynotes-b2b"].includes(t)?"24/coffeenote/caramel":["rich-b2b","veryRoasted","intense"].includes(t)?"24/coffeenote/intense":["leather"].includes(t)?"24/coffeenote/leather":["powerful-intense"].includes(t)?"24/coffeenote/powerful-intense":["milky","milk"].includes(t)?"24/coffeenote/milky":["pumpkin"].includes(t)?"24/coffeenote/pumpkin":["vanilla"].includes(t)?"24/coffeenote/vanilla":["vegetal"].includes(t)?"24/coffeenote/vegetal":["winey","wine"].includes(t)?"24/coffeenote/winey":"24/coffee/coffee-aroma"})(e);class Ai{#pe="";#be="";#me={};#ge={};#_e="";#fe=[];#ve="</fieldset/>";#ye=`<fieldset><legend class='${h.is.mobile?"t-sm-700-sl":"t-md-700-sl"}'>{title}</legend>`;constructor(e){this.#pe=e.type,this.#be=e.key,this.#me=e.iconFn?e.iconFn:null,this.#ge=e.filterFn?e.filterFn:null;const t=e.title?e.title.toLowerCase():"Filter";this.#_e=t.charAt(0).toUpperCase()+t.slice(1),this.#ye=e.before?e.before:this.#ye,this.#ve=e.after?e.after:this.#ve}set values(e){this.#fe=e}set after(e){this.#ve=e}get after(){return this.#ve}get values(){return this.#fe}get type(){return this.#pe}get filterFn(){return this.#ge}get iconFn(){return this.#me}get key(){return this.#be}get title(){return this.#_e}renderBefore(){return this.#ye.replace("{title}",this.#_e)}renderAfter(){return this.#ve}pushValues(e){-1===(()=>this.#fe.findIndex((t=>t.value===e.value)))()&&this.#fe.push(e)}}class Ii{#ke=null;#we=null;#Ee=null;#Ce=null;#ee="";#Se="";#$e=!1;#Le=!1;constructor({value:e,label:t,filterType:i,filterKey:s,icon:n="",color:r="",selected:o=!1,disabled:a=!1}){e?t?i?s?(this.#ke=e,this.#we=t,this.#Ee=i,this.#Ce=s,this.#ee=n,this.#Se=r,this.#$e=o,this.#Le=a):console.error("DefaultFilterChipType: filterKey is required"):console.error("DefaultFilterChipType: filterType is required"):console.error("DefaultFilterChipType: label is required"):console.error("DefaultFilterChipType: value is required")}set disabled(e){this.#Le=!!e}set selected(e){this.#$e=!!e}get filterType(){return this.#Ee}get value(){return"object"==typeof this.#ke?this.#ke.join(","):this.#ke}get label(){return this.#we}get color(){return this.#Se}render(){return`<nb-chip\n                    id="${this.#Ce}-${this.#ke}"\n                    data-filter-value="${this.#ke}"\n                    data-filter-key="${this.#Ce}"\n                    data-filter-label="${this.#we}"\n                    checked="${this.#$e}"\n                    disabled="${this.#Le}"\n                    ${this.#ee?`icon="${this.#ee}"`:""}\n                    ${this.#Se?`color="${this.#Se}"`:""}\n                >${this.#we}</nb-chip>`}}var Oi=(e,t,i)=>{if(!t)return console.error("createFilter.js No categories found in the data"),[];if(!e)return console.error("createFilter.js No Filter definition found in the variables"),[];const s=[];e.forEach((e=>{s.push(new Ai(e))}));return t.reduce(((e,t)=>e.concat(t.products)),[]).map((e=>{s.forEach((t=>{"object"==typeof e[t.key]?e[t.key].map((e=>{const s=((e,t)=>{const i=e.find((e=>e.id===t));return i?{label:i.name,color:i.cssColorCode?i.cssColorCode:null,icon:i.icon?.icon}:null})(i,e);s&&t.pushValues(new Ii({value:e,label:s.label,filterType:t.type,filterKey:t.key,icon:t.iconFn&&t.iconFn(e),color:s.color?s.color:null}))})):t.pushValues(new Ii({value:e[t.key],label:"function"==typeof t.filterFn?t.filterFn(e[t.key]):e[t.key],filterType:t.type,filterKey:t.key,icon:t.iconFn&&t.iconFn(t.key)}))}))})),s};const Ti=(e,t,i)=>{if(!e)return console.error("plp-coffe.filterIntensity.dto.js categories is not defined"),null;const s=new Ai({type:"default",key:"intensity",title:i["productlistrespblock.filterlabels.intensity"]}),{min:n,max:r}=Ci(e);return[{min:n,max:5,label:t.copywriting?t.copywriting.filter_group_intensity_light:t.filter_group_intensity_light,value:[1,2,3,4,5]},{min:6,max:8,label:t.copywriting?t.copywriting.filter_group_intensity_medium:t.filter_group_intensity_medium,value:[6,7,8]},{min:9,max:r,label:t.copywriting?t.copywriting.filter_group_intensity_intense:t.filter_group_intensity_intense,value:[9,10,11,12,13,14,15]}].map((e=>{s.pushValues(new Ii({value:e.value,label:e.label.replace("{range}",` ${e.min} - ${e.max}`),filterType:s.type,filterKey:s.key}))})),s},Ni=(e,t,i,s)=>[Ti(e,t,s),...Oi([{type:"default",key:"cupSizes",title:s["productlistrespblock.filterlabels.cupsize"],iconFn:$i},{type:"default",key:"flavors",title:s["productlistrespblock.filterlabels.aromatic"],iconFn:Pi}],e,i)],Bi=e=>[{id:"default",label:e.copywriting?.dropdown_recommended_option_label||e.dropdown_recommended_option_label,key:"recommended",order:"asc",checked:!0},{id:"sortPriceAscending",label:e.copywriting?.dropdown_price_ascending_option_label||e.dropdown_price_ascending_option_label,key:"price",order:"asc",checked:!1},{id:"sortPriceDescending",label:e.copywriting?.dropdown_price_descending_option_label||e.dropdown_price_descending_option_label,key:"price",order:"desc",checked:!1},{id:"sortIntensityAscending",label:e.copywriting?.dropdown_intensity_ascending_option_label||e.dropdown_intensity_ascending_option_label,key:"intensity",order:"asc",checked:!1},{id:"sortIntensityDescending",label:e.copywriting?.dropdown_intensity_descending_option_label||e.dropdown_intensity_descending_option_label,key:"intensity",order:"desc",checked:!1}];class Mi extends bi{constructor(){super(),this.plpType="coffee",this.dataTransformService=xi,this.dataFiltersService=Ni,this.dataSortService=Bi}}customElements.get("nb-plp")||customElements.define("nb-plp",Mi);export{Mi as default};
